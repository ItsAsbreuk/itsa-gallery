if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-itsautils/gallery-itsautils.js']) {
   __coverage__['build/gallery-itsautils/gallery-itsautils.js'] = {"path":"build/gallery-itsautils/gallery-itsautils.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":48}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":14},"end":{"line":14,"column":35}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":33}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":17},"end":{"line":30,"column":36}}},"5":{"name":"(anonymous_5)","line":58,"loc":{"start":{"line":58,"column":10},"end":{"line":58,"column":48}}},"6":{"name":"(anonymous_6)","line":67,"loc":{"start":{"line":67,"column":18},"end":{"line":67,"column":29}}},"7":{"name":"(anonymous_7)","line":89,"loc":{"start":{"line":89,"column":16},"end":{"line":89,"column":27}}},"8":{"name":"(anonymous_8)","line":116,"loc":{"start":{"line":116,"column":24},"end":{"line":116,"column":42}}},"9":{"name":"(anonymous_9)","line":118,"loc":{"start":{"line":118,"column":23},"end":{"line":118,"column":50}}},"10":{"name":"oneDone","line":130,"loc":{"start":{"line":130,"column":8},"end":{"line":130,"column":42}}},"11":{"name":"(anonymous_11)","line":131,"loc":{"start":{"line":131,"column":19},"end":{"line":131,"column":36}}},"12":{"name":"(anonymous_12)","line":173,"loc":{"start":{"line":173,"column":19},"end":{"line":173,"column":32}}},"13":{"name":"(anonymous_13)","line":196,"loc":{"start":{"line":196,"column":12},"end":{"line":196,"column":36}}},"14":{"name":"(anonymous_14)","line":208,"loc":{"start":{"line":208,"column":30},"end":{"line":208,"column":45}}},"15":{"name":"(anonymous_15)","line":216,"loc":{"start":{"line":216,"column":32},"end":{"line":216,"column":44}}},"16":{"name":"wrap","line":244,"loc":{"start":{"line":244,"column":8},"end":{"line":244,"column":37}}},"17":{"name":"(anonymous_17)","line":246,"loc":{"start":{"line":246,"column":16},"end":{"line":246,"column":32}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":312,"column":105}},"2":{"start":{"line":13,"column":0},"end":{"line":20,"column":17}},"3":{"start":{"line":15,"column":8},"end":{"line":15,"column":65}},"4":{"start":{"line":27,"column":0},"end":{"line":34,"column":2}},"5":{"start":{"line":28,"column":4},"end":{"line":33,"column":11}},"6":{"start":{"line":32,"column":12},"end":{"line":32,"column":27}},"7":{"start":{"line":35,"column":0},"end":{"line":35,"column":40}},"8":{"start":{"line":58,"column":0},"end":{"line":101,"column":2}},"9":{"start":{"line":59,"column":4},"end":{"line":59,"column":21}},"10":{"start":{"line":60,"column":4},"end":{"line":60,"column":65}},"11":{"start":{"line":61,"column":4},"end":{"line":61,"column":31}},"12":{"start":{"line":63,"column":4},"end":{"line":83,"column":114}},"13":{"start":{"line":72,"column":12},"end":{"line":81,"column":13}},"14":{"start":{"line":73,"column":16},"end":{"line":77,"column":17}},"15":{"start":{"line":74,"column":20},"end":{"line":74,"column":63}},"16":{"start":{"line":76,"column":20},"end":{"line":76,"column":53}},"17":{"start":{"line":79,"column":16},"end":{"line":79,"column":92}},"18":{"start":{"line":85,"column":4},"end":{"line":100,"column":6}},"19":{"start":{"line":90,"column":12},"end":{"line":90,"column":29}},"20":{"start":{"line":91,"column":12},"end":{"line":98,"column":13}},"21":{"start":{"line":92,"column":16},"end":{"line":92,"column":34}},"22":{"start":{"line":94,"column":16},"end":{"line":94,"column":33}},"23":{"start":{"line":96,"column":16},"end":{"line":96,"column":72}},"24":{"start":{"line":116,"column":0},"end":{"line":157,"column":2}},"25":{"start":{"line":117,"column":4},"end":{"line":117,"column":23}},"26":{"start":{"line":118,"column":4},"end":{"line":156,"column":7}},"27":{"start":{"line":119,"column":8},"end":{"line":122,"column":9}},"28":{"start":{"line":120,"column":12},"end":{"line":120,"column":88}},"29":{"start":{"line":121,"column":12},"end":{"line":121,"column":19}},"30":{"start":{"line":124,"column":8},"end":{"line":128,"column":33}},"31":{"start":{"line":130,"column":8},"end":{"line":144,"column":9}},"32":{"start":{"line":131,"column":12},"end":{"line":143,"column":14}},"33":{"start":{"line":132,"column":16},"end":{"line":132,"column":65}},"34":{"start":{"line":133,"column":16},"end":{"line":133,"column":65}},"35":{"start":{"line":135,"column":16},"end":{"line":135,"column":28}},"36":{"start":{"line":137,"column":16},"end":{"line":142,"column":17}},"37":{"start":{"line":138,"column":20},"end":{"line":141,"column":23}},"38":{"start":{"line":146,"column":8},"end":{"line":151,"column":9}},"39":{"start":{"line":147,"column":12},"end":{"line":150,"column":23}},"40":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"41":{"start":{"line":154,"column":12},"end":{"line":154,"column":78}},"42":{"start":{"line":159,"column":0},"end":{"line":159,"column":56}},"43":{"start":{"line":173,"column":0},"end":{"line":180,"column":2}},"44":{"start":{"line":174,"column":4},"end":{"line":179,"column":5}},"45":{"start":{"line":175,"column":8},"end":{"line":175,"column":38}},"46":{"start":{"line":178,"column":8},"end":{"line":178,"column":18}},"47":{"start":{"line":196,"column":0},"end":{"line":214,"column":2}},"48":{"start":{"line":197,"column":4},"end":{"line":197,"column":28}},"49":{"start":{"line":201,"column":4},"end":{"line":203,"column":5}},"50":{"start":{"line":202,"column":8},"end":{"line":202,"column":29}},"51":{"start":{"line":204,"column":4},"end":{"line":204,"column":39}},"52":{"start":{"line":206,"column":4},"end":{"line":206,"column":41}},"53":{"start":{"line":208,"column":4},"end":{"line":213,"column":13}},"54":{"start":{"line":209,"column":8},"end":{"line":209,"column":55}},"55":{"start":{"line":216,"column":0},"end":{"line":310,"column":6}},"56":{"start":{"line":217,"column":8},"end":{"line":221,"column":16}},"57":{"start":{"line":224,"column":8},"end":{"line":226,"column":9}},"58":{"start":{"line":225,"column":12},"end":{"line":225,"column":32}},"59":{"start":{"line":228,"column":8},"end":{"line":230,"column":9}},"60":{"start":{"line":229,"column":12},"end":{"line":229,"column":38}},"61":{"start":{"line":231,"column":8},"end":{"line":233,"column":9}},"62":{"start":{"line":232,"column":12},"end":{"line":232,"column":38}},"63":{"start":{"line":234,"column":8},"end":{"line":234,"column":32}},"64":{"start":{"line":237,"column":8},"end":{"line":237,"column":57}},"65":{"start":{"line":238,"column":8},"end":{"line":238,"column":46}},"66":{"start":{"line":240,"column":8},"end":{"line":242,"column":9}},"67":{"start":{"line":241,"column":12},"end":{"line":241,"column":24}},"68":{"start":{"line":244,"column":8},"end":{"line":291,"column":9}},"69":{"start":{"line":245,"column":12},"end":{"line":290,"column":21}},"70":{"start":{"line":247,"column":20},"end":{"line":249,"column":40}},"71":{"start":{"line":256,"column":0},"end":{"line":263,"column":1}},"72":{"start":{"line":257,"column":4},"end":{"line":257,"column":45}},"73":{"start":{"line":258,"column":4},"end":{"line":262,"column":5}},"74":{"start":{"line":259,"column":8},"end":{"line":259,"column":49}},"75":{"start":{"line":270,"column":24},"end":{"line":279,"column":25}},"76":{"start":{"line":271,"column":28},"end":{"line":271,"column":52}},"77":{"start":{"line":272,"column":28},"end":{"line":272,"column":52}},"78":{"start":{"line":274,"column":28},"end":{"line":277,"column":29}},"79":{"start":{"line":275,"column":32},"end":{"line":275,"column":48}},"80":{"start":{"line":276,"column":32},"end":{"line":276,"column":54}},"81":{"start":{"line":278,"column":28},"end":{"line":278,"column":51}},"82":{"start":{"line":282,"column":20},"end":{"line":284,"column":21}},"83":{"start":{"line":283,"column":24},"end":{"line":283,"column":52}},"84":{"start":{"line":286,"column":20},"end":{"line":288,"column":21}},"85":{"start":{"line":287,"column":24},"end":{"line":287,"column":77}},"86":{"start":{"line":295,"column":8},"end":{"line":295,"column":55}},"87":{"start":{"line":300,"column":8},"end":{"line":307,"column":21}},"88":{"start":{"line":309,"column":8},"end":{"line":309,"column":20}}},"branchMap":{"1":{"line":15,"type":"cond-expr","locations":[{"start":{"line":15,"column":41},"end":{"line":15,"column":56}},{"start":{"line":15,"column":59},"end":{"line":15,"column":64}}]},"2":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":70},"end":{"line":28,"column":75}},{"start":{"line":30,"column":8},"end":{"line":33,"column":10}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":11},"end":{"line":28,"column":37}},{"start":{"line":28,"column":41},"end":{"line":28,"column":67}}]},"4":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":11},"end":{"line":59,"column":15}},{"start":{"line":59,"column":19},"end":{"line":59,"column":20}}]},"5":{"line":60,"type":"cond-expr","locations":[{"start":{"line":60,"column":41},"end":{"line":60,"column":54}},{"start":{"line":60,"column":57},"end":{"line":60,"column":64}}]},"6":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":9}},{"start":{"line":61,"column":13},"end":{"line":61,"column":25}},{"start":{"line":61,"column":29},"end":{"line":61,"column":30}}]},"7":{"line":65,"type":"cond-expr","locations":[{"start":{"line":65,"column":46},"end":{"line":65,"column":51}},{"start":{"line":65,"column":54},"end":{"line":65,"column":56}}]},"8":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":18},"end":{"line":65,"column":19}},{"start":{"line":65,"column":23},"end":{"line":65,"column":42}}]},"9":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":12}},{"start":{"line":72,"column":12},"end":{"line":72,"column":12}}]},"10":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":16},"end":{"line":73,"column":16}},{"start":{"line":73,"column":16},"end":{"line":73,"column":16}}]},"11":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":36},"end":{"line":76,"column":40}},{"start":{"line":76,"column":44},"end":{"line":76,"column":51}}]},"12":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":16},"end":{"line":79,"column":27}},{"start":{"line":79,"column":31},"end":{"line":79,"column":43}},{"start":{"line":79,"column":48},"end":{"line":79,"column":90}}]},"13":{"line":83,"type":"cond-expr","locations":[{"start":{"line":83,"column":59},"end":{"line":83,"column":85}},{"start":{"line":83,"column":88},"end":{"line":83,"column":113}}]},"14":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":15},"end":{"line":83,"column":42}},{"start":{"line":83,"column":47},"end":{"line":83,"column":55}}]},"15":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":12}},{"start":{"line":91,"column":12},"end":{"line":91,"column":12}}]},"16":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":16},"end":{"line":96,"column":26}},{"start":{"line":96,"column":30},"end":{"line":96,"column":41}},{"start":{"line":96,"column":45},"end":{"line":96,"column":71}}]},"17":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":119,"column":8}},{"start":{"line":119,"column":8},"end":{"line":119,"column":8}}]},"18":{"line":132,"type":"cond-expr","locations":[{"start":{"line":132,"column":52},"end":{"line":132,"column":57}},{"start":{"line":132,"column":60},"end":{"line":132,"column":64}}]},"19":{"line":133,"type":"cond-expr","locations":[{"start":{"line":133,"column":52},"end":{"line":133,"column":56}},{"start":{"line":133,"column":59},"end":{"line":133,"column":64}}]},"20":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":16},"end":{"line":137,"column":16}},{"start":{"line":137,"column":16},"end":{"line":137,"column":16}}]},"21":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":8}},{"start":{"line":146,"column":8},"end":{"line":146,"column":8}}]},"22":{"line":197,"type":"binary-expr","locations":[{"start":{"line":197,"column":14},"end":{"line":197,"column":21}},{"start":{"line":197,"column":25},"end":{"line":197,"column":27}}]},"23":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":4},"end":{"line":201,"column":4}},{"start":{"line":201,"column":4},"end":{"line":201,"column":4}}]},"24":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":21},"end":{"line":220,"column":32}},{"start":{"line":220,"column":36},"end":{"line":220,"column":44}}]},"25":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":8},"end":{"line":224,"column":8}},{"start":{"line":224,"column":8},"end":{"line":224,"column":8}}]},"26":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":8},"end":{"line":228,"column":8}},{"start":{"line":228,"column":8},"end":{"line":228,"column":8}}]},"27":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":8},"end":{"line":231,"column":8}},{"start":{"line":231,"column":8},"end":{"line":231,"column":8}}]},"28":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":240,"column":8}},{"start":{"line":240,"column":8},"end":{"line":240,"column":8}}]},"29":{"line":245,"type":"cond-expr","locations":[{"start":{"line":246,"column":16},"end":{"line":289,"column":17}},{"start":{"line":290,"column":16},"end":{"line":290,"column":20}}]},"30":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":0},"end":{"line":256,"column":0}},{"start":{"line":256,"column":0},"end":{"line":256,"column":0}}]},"31":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":24},"end":{"line":270,"column":24}},{"start":{"line":270,"column":24},"end":{"line":270,"column":24}}]},"32":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":28},"end":{"line":274,"column":28}},{"start":{"line":274,"column":28},"end":{"line":274,"column":28}}]},"33":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":20},"end":{"line":282,"column":20}},{"start":{"line":282,"column":20},"end":{"line":282,"column":20}}]},"34":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":24},"end":{"line":282,"column":46}},{"start":{"line":282,"column":50},"end":{"line":282,"column":72}}]},"35":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":20},"end":{"line":286,"column":20}},{"start":{"line":286,"column":20},"end":{"line":286,"column":20}}]}},"code":["(function () { YUI.add('gallery-itsautils', function (Y, NAME) {","","'use strict';","","/*jshint maxlen:160 */","","/**"," * The ItsaUtils module."," *"," * @module gallery-itsautils"," */","","var DATEPATTERN = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z/,","    REVIVER = function(key, value) {","        return DATEPATTERN.test(value) ? new Date(value) : value;","    },","    Lang = Y.Lang,","    YPromise = Y.Promise,","    MIME_JSON = 'application/json',","    NO_ARGS = [];","","","","//============================================================================","// remove this temporarely function of cast as soo as it is availabe in Y.Promise","//============================================================================","YPromise.cast = function (value) {","    return Y.Promise.isPromise(value) && value.constructor === this ? value :","        /*jshint newcap: false */","        new this(function (resolve) {","        /*jshint newcap: true */","            resolve(value);","        });","};","YPromise.prototype.cast = YPromise.cast;","//============================================================================","","// re-definition of Y.later, enabling periodic function with a differetn first interval","","/**"," * Executes the supplied function in the context of the supplied object 'when' milliseconds later.  Executes the function a"," * single time unless periodic is set to true."," * @for YUI"," * @method later"," * @param when {Number} the number of milliseconds to wait until the fn is executed."," * @param o the context object."," * @param fn {Function|String} the function to execute or the name of the method in the 'o' object to execute."," * @param data [Array] data that is provided to the function.  This accepts either a single item or an array.  If an array is provided,"," * the function is executed with one parameter for each array item. If you need to pass a single array parameter, it needs to be wrapped in an array [myarray]."," *"," * Note: native methods in IE may not have the call and apply methods. In this case, it will work, but you are limited to four arguments."," *"," * @param periodic {boolean|Number} if true, executes continuously at supplied, if number, then periodic is considered 'true' but with a perdiod"," * defined by 'periodic', which means: the first timer executes after 'when' and next timers after 'period'."," * interval executes until canceled."," * @return {object} a timer object. Call the cancel() method on this object to stop the timer."," */","Y.later = function(when, o, fn, data, periodic) {","    when = when || 0;","    data = (!Y.Lang.isUndefined(data)) ? Y.Array(data) : NO_ARGS;","    o = o || Y.config.win || Y;","","    var cancelled = false,","        periodshift = (typeof periodic==='number'),","        method = (o && Y.Lang.isString(fn)) ? o[fn] : fn,","        secondairId,","        wrapper = function() {","            // IE 8- may execute a setInterval callback one last time","            // after clearInterval was called, so in order to preserve","            // the cancel() === no more runny-run, we have to jump through","            // an extra hoop.","            if (!cancelled) {","                if (!method.apply) {","                    method(data[0], data[1], data[2], data[3]);","                } else {","                    method.apply(o, data || NO_ARGS);","                }","/*jshint expr:true */","                periodshift && !secondairId && (secondairId=setInterval(wrapper, periodic));","/*jshint expr:false */","            }","        },","        id = ((typeof periodic==='boolean') && periodic) ? setInterval(wrapper, when) : setTimeout(wrapper, when);","","    return {","        id: id,","        interval: periodic,","        shift: periodshift,","        cancel: function() {","            cancelled = true;","            if (this.interval) {","                clearInterval(id);","            } else {","                clearTimeout(id);","/*jshint expr:true */","                this.shift && secondairId && clearInterval(secondairId);","/*jshint expr:false */","            }","        }","    };","};","","","","/*","Returns a promise that is resolved or rejected when all values are resolved or","any is rejected. This is useful for waiting for the resolution of multiple","promises, such as reading multiple files in Node.js or making multiple XHR","requests in the browser.","","@method all","@param {Any[]} values An array of any kind of values, promises or not. If a value is not","@return [Promise] A promise for an array of all the fulfillment values","@static","*/","YPromise.allFulfilled = function (values) {","    var Promise = this;","    return new Promise(function (resolve, reject) {","        if (!Lang.isArray(values)) {","            reject(new TypeError('Promise.all expects an array of values or promises'));","            return;","        }","","        var remaining       = values.length,","            i               = 0,","            length          = values.length,","            resolvedresults = [],","            rejectedresults = [];","","        function oneDone(index, resolved) {","            return function (value) {","                resolvedresults[index] = resolved ? value : null;","                rejectedresults[index] = resolved ? null : value;","","                remaining--;","","                if (!remaining) {","                    resolve({","                        resolved: resolvedresults,","                        rejected: rejectedresults","                    });","                }","            };","        }","","        if (length < 1) {","            return resolve({","                        resolved: resolvedresults,","                        rejected: rejectedresults","                    });","        }","","        for (; i < length; i++) {","            Promise.cast(values[i]).then(oneDone(i, true), oneDone(i, false));","        }","    });","};","","YPromise.prototype.allFulfilled = YPromise.allFulfilled;","","","/**"," * Parse a JSON string, returning the native JavaScript representation."," *"," * @param s {string} JSON string data"," * @return {MIXED} the native JavaScript representation of the JSON string"," * @throws SyntaxError"," * @method parse"," * @static"," */","// JavaScript implementation in lieu of native browser support.  Based on","// the json2.js library from http://json.org","Y.JSON.fullparse = function (s) {","    try {","        return this.parse(s, REVIVER);","    }","    catch(err) {","        throw err;","    }","};","","// now overrule Y.io.json (which comes from gallery-io-utils) and pass in the REVIVER","","/**","Performs an AJAX request and parses the response as JSON notation.","Requires the JSON module.","","@method json","@for io","@static","@param {String} uri Qualified path to transaction resource.","@param {Object} [options] Same configuration options as Y.io.xhr()","@return {Promise} Promise for the response object. Contains an extra","    `abort()` method to cancel the request.","**/","Y.io.json = function (uri, options) {","    options = options || {};","","    // Force the use of the correct headers","    // Since a JSON response is expected, ask for it with the Accept header","    if (!options.headers) {","        options.headers = {};","    }","    options.headers.Accept = MIME_JSON;","","    var promise = Y.io.xhr(uri, options);","","    return Y.mix(promise.then(function (xhr) {","        return Y.JSON.parse(xhr.responseText, REVIVER);","    }), {","        // pass around the abort function","        abort: promise.abort","    }, true);","};","","Y.JSONPRequest.prototype.send = function () {","        var self   = this,","            args   = Y.Array(arguments, 0, true),","            config = self._config,","            proxy  = self._proxy || Y.guid(),","            url;","","        // TODO: support allowCache as time value","        if (config.allowCache) {","            self._proxy = proxy;","        }","","        if (self._requests[proxy] === undefined) {","            self._requests[proxy] = 0;","        }","        if (self._timeouts[proxy] === undefined) {","            self._timeouts[proxy] = 0;","        }","        self._requests[proxy]++;","","","        args.unshift(self.url, 'YUI.Env.JSONP.' + proxy);","        url = config.format.apply(self, args);","","        if (!config.on.success) {","            return self;","        }","","        function wrap(fn, isTimeout) {","            return (typeof fn==='function') ?","                function (data) {","                    var execute = true,","                        counter = '_requests',","                        stringifiedData;","","// ADDED BY Its Asbreuk ==========================================","// at this point, data is already is an object","// don't know when json.parse got into, we stringify and parse","// for a second time:","//================================================================","if (typeof data === 'object') {","    stringifiedData = Y.JSON.stringify(data);","    try {","        data = Y.JSON.fullparse(stringifiedData);","    }","    catch (err) {","    }","}","//================================================================","","                    //if (config.allowCache) {","                        // A lot of wrangling to make sure timeouts result in","                        // fewer success callbacks, but the proxy is properly","                        // cleaned up.","                        if (isTimeout) {","                            ++self._timeouts[proxy];","                            --self._requests[proxy];","                        } else {","                            if (!self._requests[proxy]) {","                                execute = false;","                                counter = '_timeouts';","                            }","                            --self[counter][proxy];","                        }","                    //}","","                    if (!self._requests[proxy] && !self._timeouts[proxy]) {","                        delete YUI.Env.JSONP[proxy];","                    }","","                    if (execute) {","                        fn.apply(config.context, [data].concat(config.args));","                    }","                } :","                null;","        }","","        // Temporary un-sandboxed function alias","        // TODO: queuing","        YUI.Env.JSONP[proxy] = wrap(config.on.success);","","        // Y.Get transactions block each other by design, but can easily","        //  be made non-blocking by just calling execute() on the transaction.","        // https://github.com/yui/yui3/pull/393#issuecomment-11961608","        Y.Get.js(url, {","            onFailure : wrap(config.on.failure),","            onTimeout : wrap(config.on.timeout, true),","            timeout   : config.timeout,","            charset   : config.charset,","            attributes: config.attributes,","            async     : config.async","        }).execute();","","        return self;","    };","","}, '@VERSION@', {\"requires\": [\"yui-base\", \"json\", \"jsonp\", \"promise\", \"yui-later\", \"gallery-io-utils\"]});","","}());"]};
}
var __cov_OTbVxANlros54EWQU$D$CQ = __coverage__['build/gallery-itsautils/gallery-itsautils.js'];
__cov_OTbVxANlros54EWQU$D$CQ.s['1']++;YUI.add('gallery-itsautils',function(Y,NAME){'use strict';__cov_OTbVxANlros54EWQU$D$CQ.f['1']++;__cov_OTbVxANlros54EWQU$D$CQ.s['2']++;var DATEPATTERN=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/,REVIVER=function(key,value){__cov_OTbVxANlros54EWQU$D$CQ.f['2']++;__cov_OTbVxANlros54EWQU$D$CQ.s['3']++;return DATEPATTERN.test(value)?(__cov_OTbVxANlros54EWQU$D$CQ.b['1'][0]++,new Date(value)):(__cov_OTbVxANlros54EWQU$D$CQ.b['1'][1]++,value);},Lang=Y.Lang,YPromise=Y.Promise,MIME_JSON='application/json',NO_ARGS=[];__cov_OTbVxANlros54EWQU$D$CQ.s['4']++;YPromise.cast=function(value){__cov_OTbVxANlros54EWQU$D$CQ.f['3']++;__cov_OTbVxANlros54EWQU$D$CQ.s['5']++;return(__cov_OTbVxANlros54EWQU$D$CQ.b['3'][0]++,Y.Promise.isPromise(value))&&(__cov_OTbVxANlros54EWQU$D$CQ.b['3'][1]++,value.constructor===this)?(__cov_OTbVxANlros54EWQU$D$CQ.b['2'][0]++,value):(__cov_OTbVxANlros54EWQU$D$CQ.b['2'][1]++,new this(function(resolve){__cov_OTbVxANlros54EWQU$D$CQ.f['4']++;__cov_OTbVxANlros54EWQU$D$CQ.s['6']++;resolve(value);}));};__cov_OTbVxANlros54EWQU$D$CQ.s['7']++;YPromise.prototype.cast=YPromise.cast;__cov_OTbVxANlros54EWQU$D$CQ.s['8']++;Y.later=function(when,o,fn,data,periodic){__cov_OTbVxANlros54EWQU$D$CQ.f['5']++;__cov_OTbVxANlros54EWQU$D$CQ.s['9']++;when=(__cov_OTbVxANlros54EWQU$D$CQ.b['4'][0]++,when)||(__cov_OTbVxANlros54EWQU$D$CQ.b['4'][1]++,0);__cov_OTbVxANlros54EWQU$D$CQ.s['10']++;data=!Y.Lang.isUndefined(data)?(__cov_OTbVxANlros54EWQU$D$CQ.b['5'][0]++,Y.Array(data)):(__cov_OTbVxANlros54EWQU$D$CQ.b['5'][1]++,NO_ARGS);__cov_OTbVxANlros54EWQU$D$CQ.s['11']++;o=(__cov_OTbVxANlros54EWQU$D$CQ.b['6'][0]++,o)||(__cov_OTbVxANlros54EWQU$D$CQ.b['6'][1]++,Y.config.win)||(__cov_OTbVxANlros54EWQU$D$CQ.b['6'][2]++,Y);__cov_OTbVxANlros54EWQU$D$CQ.s['12']++;var cancelled=false,periodshift=typeof periodic==='number',method=(__cov_OTbVxANlros54EWQU$D$CQ.b['8'][0]++,o)&&(__cov_OTbVxANlros54EWQU$D$CQ.b['8'][1]++,Y.Lang.isString(fn))?(__cov_OTbVxANlros54EWQU$D$CQ.b['7'][0]++,o[fn]):(__cov_OTbVxANlros54EWQU$D$CQ.b['7'][1]++,fn),secondairId,wrapper=function(){__cov_OTbVxANlros54EWQU$D$CQ.f['6']++;__cov_OTbVxANlros54EWQU$D$CQ.s['13']++;if(!cancelled){__cov_OTbVxANlros54EWQU$D$CQ.b['9'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['14']++;if(!method.apply){__cov_OTbVxANlros54EWQU$D$CQ.b['10'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['15']++;method(data[0],data[1],data[2],data[3]);}else{__cov_OTbVxANlros54EWQU$D$CQ.b['10'][1]++;__cov_OTbVxANlros54EWQU$D$CQ.s['16']++;method.apply(o,(__cov_OTbVxANlros54EWQU$D$CQ.b['11'][0]++,data)||(__cov_OTbVxANlros54EWQU$D$CQ.b['11'][1]++,NO_ARGS));}__cov_OTbVxANlros54EWQU$D$CQ.s['17']++;(__cov_OTbVxANlros54EWQU$D$CQ.b['12'][0]++,periodshift)&&(__cov_OTbVxANlros54EWQU$D$CQ.b['12'][1]++,!secondairId)&&(__cov_OTbVxANlros54EWQU$D$CQ.b['12'][2]++,secondairId=setInterval(wrapper,periodic));}else{__cov_OTbVxANlros54EWQU$D$CQ.b['9'][1]++;}},id=(__cov_OTbVxANlros54EWQU$D$CQ.b['14'][0]++,typeof periodic==='boolean')&&(__cov_OTbVxANlros54EWQU$D$CQ.b['14'][1]++,periodic)?(__cov_OTbVxANlros54EWQU$D$CQ.b['13'][0]++,setInterval(wrapper,when)):(__cov_OTbVxANlros54EWQU$D$CQ.b['13'][1]++,setTimeout(wrapper,when));__cov_OTbVxANlros54EWQU$D$CQ.s['18']++;return{id:id,interval:periodic,shift:periodshift,cancel:function(){__cov_OTbVxANlros54EWQU$D$CQ.f['7']++;__cov_OTbVxANlros54EWQU$D$CQ.s['19']++;cancelled=true;__cov_OTbVxANlros54EWQU$D$CQ.s['20']++;if(this.interval){__cov_OTbVxANlros54EWQU$D$CQ.b['15'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['21']++;clearInterval(id);}else{__cov_OTbVxANlros54EWQU$D$CQ.b['15'][1]++;__cov_OTbVxANlros54EWQU$D$CQ.s['22']++;clearTimeout(id);__cov_OTbVxANlros54EWQU$D$CQ.s['23']++;(__cov_OTbVxANlros54EWQU$D$CQ.b['16'][0]++,this.shift)&&(__cov_OTbVxANlros54EWQU$D$CQ.b['16'][1]++,secondairId)&&(__cov_OTbVxANlros54EWQU$D$CQ.b['16'][2]++,clearInterval(secondairId));}}};};__cov_OTbVxANlros54EWQU$D$CQ.s['24']++;YPromise.allFulfilled=function(values){__cov_OTbVxANlros54EWQU$D$CQ.f['8']++;__cov_OTbVxANlros54EWQU$D$CQ.s['25']++;var Promise=this;__cov_OTbVxANlros54EWQU$D$CQ.s['26']++;return new Promise(function(resolve,reject){__cov_OTbVxANlros54EWQU$D$CQ.f['9']++;__cov_OTbVxANlros54EWQU$D$CQ.s['27']++;if(!Lang.isArray(values)){__cov_OTbVxANlros54EWQU$D$CQ.b['17'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['28']++;reject(new TypeError('Promise.all expects an array of values or promises'));__cov_OTbVxANlros54EWQU$D$CQ.s['29']++;return;}else{__cov_OTbVxANlros54EWQU$D$CQ.b['17'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['30']++;var remaining=values.length,i=0,length=values.length,resolvedresults=[],rejectedresults=[];__cov_OTbVxANlros54EWQU$D$CQ.s['31']++;function oneDone(index,resolved){__cov_OTbVxANlros54EWQU$D$CQ.f['10']++;__cov_OTbVxANlros54EWQU$D$CQ.s['32']++;return function(value){__cov_OTbVxANlros54EWQU$D$CQ.f['11']++;__cov_OTbVxANlros54EWQU$D$CQ.s['33']++;resolvedresults[index]=resolved?(__cov_OTbVxANlros54EWQU$D$CQ.b['18'][0]++,value):(__cov_OTbVxANlros54EWQU$D$CQ.b['18'][1]++,null);__cov_OTbVxANlros54EWQU$D$CQ.s['34']++;rejectedresults[index]=resolved?(__cov_OTbVxANlros54EWQU$D$CQ.b['19'][0]++,null):(__cov_OTbVxANlros54EWQU$D$CQ.b['19'][1]++,value);__cov_OTbVxANlros54EWQU$D$CQ.s['35']++;remaining--;__cov_OTbVxANlros54EWQU$D$CQ.s['36']++;if(!remaining){__cov_OTbVxANlros54EWQU$D$CQ.b['20'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['37']++;resolve({resolved:resolvedresults,rejected:rejectedresults});}else{__cov_OTbVxANlros54EWQU$D$CQ.b['20'][1]++;}};}__cov_OTbVxANlros54EWQU$D$CQ.s['38']++;if(length<1){__cov_OTbVxANlros54EWQU$D$CQ.b['21'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['39']++;return resolve({resolved:resolvedresults,rejected:rejectedresults});}else{__cov_OTbVxANlros54EWQU$D$CQ.b['21'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['40']++;for(;i<length;i++){__cov_OTbVxANlros54EWQU$D$CQ.s['41']++;Promise.cast(values[i]).then(oneDone(i,true),oneDone(i,false));}});};__cov_OTbVxANlros54EWQU$D$CQ.s['42']++;YPromise.prototype.allFulfilled=YPromise.allFulfilled;__cov_OTbVxANlros54EWQU$D$CQ.s['43']++;Y.JSON.fullparse=function(s){__cov_OTbVxANlros54EWQU$D$CQ.f['12']++;__cov_OTbVxANlros54EWQU$D$CQ.s['44']++;try{__cov_OTbVxANlros54EWQU$D$CQ.s['45']++;return this.parse(s,REVIVER);}catch(err){__cov_OTbVxANlros54EWQU$D$CQ.s['46']++;throw err;}};__cov_OTbVxANlros54EWQU$D$CQ.s['47']++;Y.io.json=function(uri,options){__cov_OTbVxANlros54EWQU$D$CQ.f['13']++;__cov_OTbVxANlros54EWQU$D$CQ.s['48']++;options=(__cov_OTbVxANlros54EWQU$D$CQ.b['22'][0]++,options)||(__cov_OTbVxANlros54EWQU$D$CQ.b['22'][1]++,{});__cov_OTbVxANlros54EWQU$D$CQ.s['49']++;if(!options.headers){__cov_OTbVxANlros54EWQU$D$CQ.b['23'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['50']++;options.headers={};}else{__cov_OTbVxANlros54EWQU$D$CQ.b['23'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['51']++;options.headers.Accept=MIME_JSON;__cov_OTbVxANlros54EWQU$D$CQ.s['52']++;var promise=Y.io.xhr(uri,options);__cov_OTbVxANlros54EWQU$D$CQ.s['53']++;return Y.mix(promise.then(function(xhr){__cov_OTbVxANlros54EWQU$D$CQ.f['14']++;__cov_OTbVxANlros54EWQU$D$CQ.s['54']++;return Y.JSON.parse(xhr.responseText,REVIVER);}),{abort:promise.abort},true);};__cov_OTbVxANlros54EWQU$D$CQ.s['55']++;Y.JSONPRequest.prototype.send=function(){__cov_OTbVxANlros54EWQU$D$CQ.f['15']++;__cov_OTbVxANlros54EWQU$D$CQ.s['56']++;var self=this,args=Y.Array(arguments,0,true),config=self._config,proxy=(__cov_OTbVxANlros54EWQU$D$CQ.b['24'][0]++,self._proxy)||(__cov_OTbVxANlros54EWQU$D$CQ.b['24'][1]++,Y.guid()),url;__cov_OTbVxANlros54EWQU$D$CQ.s['57']++;if(config.allowCache){__cov_OTbVxANlros54EWQU$D$CQ.b['25'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['58']++;self._proxy=proxy;}else{__cov_OTbVxANlros54EWQU$D$CQ.b['25'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['59']++;if(self._requests[proxy]===undefined){__cov_OTbVxANlros54EWQU$D$CQ.b['26'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['60']++;self._requests[proxy]=0;}else{__cov_OTbVxANlros54EWQU$D$CQ.b['26'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['61']++;if(self._timeouts[proxy]===undefined){__cov_OTbVxANlros54EWQU$D$CQ.b['27'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['62']++;self._timeouts[proxy]=0;}else{__cov_OTbVxANlros54EWQU$D$CQ.b['27'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['63']++;self._requests[proxy]++;__cov_OTbVxANlros54EWQU$D$CQ.s['64']++;args.unshift(self.url,'YUI.Env.JSONP.'+proxy);__cov_OTbVxANlros54EWQU$D$CQ.s['65']++;url=config.format.apply(self,args);__cov_OTbVxANlros54EWQU$D$CQ.s['66']++;if(!config.on.success){__cov_OTbVxANlros54EWQU$D$CQ.b['28'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['67']++;return self;}else{__cov_OTbVxANlros54EWQU$D$CQ.b['28'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['68']++;function wrap(fn,isTimeout){__cov_OTbVxANlros54EWQU$D$CQ.f['16']++;__cov_OTbVxANlros54EWQU$D$CQ.s['69']++;return typeof fn==='function'?(__cov_OTbVxANlros54EWQU$D$CQ.b['29'][0]++,function(data){__cov_OTbVxANlros54EWQU$D$CQ.f['17']++;__cov_OTbVxANlros54EWQU$D$CQ.s['70']++;var execute=true,counter='_requests',stringifiedData;__cov_OTbVxANlros54EWQU$D$CQ.s['71']++;if(typeof data==='object'){__cov_OTbVxANlros54EWQU$D$CQ.b['30'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['72']++;stringifiedData=Y.JSON.stringify(data);__cov_OTbVxANlros54EWQU$D$CQ.s['73']++;try{__cov_OTbVxANlros54EWQU$D$CQ.s['74']++;data=Y.JSON.fullparse(stringifiedData);}catch(err){}}else{__cov_OTbVxANlros54EWQU$D$CQ.b['30'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['75']++;if(isTimeout){__cov_OTbVxANlros54EWQU$D$CQ.b['31'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['76']++;++self._timeouts[proxy];__cov_OTbVxANlros54EWQU$D$CQ.s['77']++;--self._requests[proxy];}else{__cov_OTbVxANlros54EWQU$D$CQ.b['31'][1]++;__cov_OTbVxANlros54EWQU$D$CQ.s['78']++;if(!self._requests[proxy]){__cov_OTbVxANlros54EWQU$D$CQ.b['32'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['79']++;execute=false;__cov_OTbVxANlros54EWQU$D$CQ.s['80']++;counter='_timeouts';}else{__cov_OTbVxANlros54EWQU$D$CQ.b['32'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['81']++;--self[counter][proxy];}__cov_OTbVxANlros54EWQU$D$CQ.s['82']++;if((__cov_OTbVxANlros54EWQU$D$CQ.b['34'][0]++,!self._requests[proxy])&&(__cov_OTbVxANlros54EWQU$D$CQ.b['34'][1]++,!self._timeouts[proxy])){__cov_OTbVxANlros54EWQU$D$CQ.b['33'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['83']++;delete YUI.Env.JSONP[proxy];}else{__cov_OTbVxANlros54EWQU$D$CQ.b['33'][1]++;}__cov_OTbVxANlros54EWQU$D$CQ.s['84']++;if(execute){__cov_OTbVxANlros54EWQU$D$CQ.b['35'][0]++;__cov_OTbVxANlros54EWQU$D$CQ.s['85']++;fn.apply(config.context,[data].concat(config.args));}else{__cov_OTbVxANlros54EWQU$D$CQ.b['35'][1]++;}}):(__cov_OTbVxANlros54EWQU$D$CQ.b['29'][1]++,null);}__cov_OTbVxANlros54EWQU$D$CQ.s['86']++;YUI.Env.JSONP[proxy]=wrap(config.on.success);__cov_OTbVxANlros54EWQU$D$CQ.s['87']++;Y.Get.js(url,{onFailure:wrap(config.on.failure),onTimeout:wrap(config.on.timeout,true),timeout:config.timeout,charset:config.charset,attributes:config.attributes,async:config.async}).execute();__cov_OTbVxANlros54EWQU$D$CQ.s['88']++;return self;};},'@VERSION@',{'requires':['yui-base','json','jsonp','promise','yui-later','gallery-io-utils']});
