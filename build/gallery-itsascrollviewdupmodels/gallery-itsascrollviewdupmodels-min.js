YUI.add("gallery-itsascrollviewdupmodels",function(e,t){"use strict";function l(){}var n=e.Lang,r=e.DataType.Date,i=r.isValidDate,s=function(e){return new Date(e.getTime())},o=function(e,t){e.setTime(e.getTime()+6e4*t)},u=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},a=function(e,t){return r.isGreater(e,t)&&!u(e,t)},f=function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12,e.setFullYear(n),e.setMonth(r)};l.ATTRS={modelConfig:{value:null,validator:function(e){return n.isObject(e)||e===null},setter:"_setModelConfig"}},e.mix(l.prototype,{_setModelConfigInitiated:null,_prevLastAbberantModelIndex:null,getModelList:function(){var e=this;return e._abberantModelList||e.get("modelList")},_setModelConfig:function(e){var t=this;t._setModelConfigInitiated?t.renderView&&t._rerenderAttributesOnChange&&t._renderView({modelConfig:e}):t._setModelConfigInitiated=!0},_generateAbberantModelList:function(t,u){var l=this,c=l.get("modelList"),h=l._modelListIsLazy,p=l.get("modelConfig"),d=p&&p.date,v=p&&p.enddate,m=p&&p.count,g=p&&p.intervalMinutes,y=p&&p.intervalHours,b=p&&p.intervalDays,w=p&&p.intervalMonths,E=p&&p.duplicateEveryMinutes,S=l.getModelAttr,x=l.setModelAttr,T,N,C,k,L,A,O,M,_;N=function(t,i,u,a,f){var l=n.type(t.get)!=="function",h,p;return l?(h={},e.mix(h,t),delete h.clientId,delete h.id):h=new c.model(t.getAttrs()),u&&(p=s(i),o(p,a),r.isGreater(u,p)?x(h,!1,v,p):f&&x(h,!1,v,s(u))),S(h,d)&&x(h,!1,d,s(i)),h},C=function(e,t){l._originalModels[S(e,"clientId")]=t};if(!t||!l._abberantModelList||u)l._prevLastAbberantModelIndex=null,l._originalModels.length=0,l._abberantModelList&&l._abberantModelList.destroy(),l._abberantModelList=h?new e.LazyModelList:new e.ModelList,l._abberantModelList.comparator=c&&c.comparator,l._abberantModelList.model=c.model;v&&!m?T=function(e){var t=S(e,d),r=S(e,v),u=E&&S(e,E);if(i(t)&&i(r)){n.isNumber(u)||(u=1440),L=s(t),k=N(e,L,r,u),l._abberantModelList.add(k),C(k,e);while(a(r,L))o(L,u),k=N(e,L,r,u),l._abberantModelList.add(k),C(k,e)}else l._abberantModelList.add(e)}:!v&&m?T=function(e){var t=S(e,d),r=S(e,m)||1,u=g&&S(e,g),a=y&&S(e,y),c=b&&S(e,b),h=w&&S(e,w),p,v;if(!i(t))l._abberantModelList.add(e);else{k=N(e,t),l._abberantModelList.add(k),C(k,e),n.isNumber(r)||(r=1),n.isNumber(u)||(u=0),n.isNumber(a)||(a=0),n.isNumber(c)||(c=0),n.isNumber(h)||(h=0),p=1440*c+60*a+u,p===0&&h===0&&(p=1440),L=s(t);for(v=1;v<r;v++)p>0&&o(L,p),h>0&&f(L,h),k=N(e,L),l._abberantModelList.add(k),C(k,e)}}:v&&m&&(L=new Date(0),T=function(e){var t=S(e,d),r=S(e,v)||t,u=S(e,m)||1,c=g&&S(e,g),h=y&&S(e,y),p=b&&S(e,b),x=w&&S(e,w),T=E&&S(e,E),A,O,M,_,D;if(!i(t))l._abberantModelList.add(e);else{n.isNumber(T)||(T=1440),k=N(e,t,r,T),l._abberantModelList.add(k),C(k,e),D=i(r),D||(r=t),n.isNumber(u)||(u=1),n.isNumber(c)||(c=0),n.isNumber(h)||(h=0),n.isNumber(p)||(p=0),n.isNumber(x)||(x=0),A=1440*p+60*h+c,A===0&&x===0&&(A=1440),O=s(t),M=s(r);if(D){L=s(O);while(a(M,L))o(L,T),k=N(e,L,M,T),l._abberantModelList.add(k),C(k,e)}for(_=1;_<u;_++){A>0&&(o(O,A),o(M,A)),x>0&&(f(O,x),f(M,x)),k=N(e,O,M,T,!0),l._abberantModelList.add(k),C(k,e);if(D){L=s(O);while(a(M,L))o(L,T),k=N(e,L,M,T,!0),l._abberantModelList.add(k),C(k,e)}}}}),M=(l._prevLastAbberantModelIndex||-1)+1,l._prevLastAbberantModelIndex=_=c.size()-1;for(O=M;O<=_;O++)A=c.item(O),T(A)}},!0),e.ScrollView.ITSAScrollViewDupModelsExtention=l,e.Base.mix(e.ScrollView,[l])},"@VERSION@",{requires:["base-build","node-base","model-list","datatype-date-math","gallery-itsascrollviewmodellist"]});
