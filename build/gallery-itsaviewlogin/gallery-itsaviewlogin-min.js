YUI.add("gallery-itsaviewlogin",function(e,t){"use strict";function pt(){pt.superclass.constructor.apply(this,arguments)}var n=e.Lang,r="icon",i="message",s="model",o="formconfig",u="validator",a="validationerror",f="mail",l="e"+f,c="address",h=l+c,p="primarybtnonenter",d="fullselect",v="required",m="loggedin",g="stay"+m,y="sername",b="assword",w="emember",E="u"+y,S="p"+b,x="r"+w,T="U"+y,N="P"+b,C="R"+w,k=E+"IsEmail",L="sync",A="itsa",O="login",M=A+"-"+O,_="label",D="placeholder",P="classname",H='<span class="itsa-messagewrapper">',B='<fieldset class="'+M+'">',j="</span>",F='<div class="pure-control-group">',I='<div class="pure-controls">',q='<div class="itsa-',R="</fieldset>",U="</div>",z="Change",W="object",X="string",V="boolean",$="function",J="create",K="ccount",Q="img",G="submit",Y="btn_",Z=Y+G,et=Q+Y,tt=J+"a"+K,nt="btn_"+tt,rt=Q+nt,it=J+"A"+K,st="regain",ot=E+"or"+S,ut="forgot",at="imageButtons",ft='<i class="{icon}"></i>',lt="itsabutton-iconleft",ct='<i class="itsaicon-dialog',ht="gallery-itsa-i18n-login";pt.NAME="itsaviewlogin",e.ITSAViewLogin=e.extend(pt,e.ITSAViewModel,{},{ATTRS:{createAccount:{value:null,validator:function(t){return t instanceof e.LazyPromise}},editable:{value:!0,readOnly:!0},formconfigPassword:{value:{},validator:function(e){return typeof e===W},initOnly:!0},formconfigRemember:{value:{},validator:function(e){return typeof e===W},initOnly:!0},formconfigUsername:{value:{},validator:function(e){return typeof e===W},initOnly:!0},icon:{value:null,validator:function(e){return typeof e===X}},imageButtons:{value:!1,validator:function(e){return typeof e===V},initOnly:!0},message:{value:null,validator:function(e){return typeof e===X}},model:{readOnly:!0},partOfMultiView:{value:!1,readOnly:!0},password:{value:""},regain:{value:null,validator:function(e){return e===null||e===ot||e===E||e===S},initOnly:!0},remember:{value:!1},showStayLoggedin:{value:!1,initOnly:!0},sync:{value:null,validator:function(e){return typeof e===$}},template:{readOnly:!0,getter:"_getterTemplate"},username:{value:""},usernameIsEmail:{value:!1,initOnly:!0},validationerrorPassword:{value:null,validator:function(e){return e===null||typeof e===X},initOnly:!0},validationerrorUsername:{value:null,validator:function(e){return e===null||typeof e===X},initOnly:!0},validatorPassword:{value:null,validator:function(e){return e===null||typeof e===$},initOnly:!0},validatorUsername:{value:null,validator:function(e){return e===null||typeof e===$},initOnly:!0}}}),pt.prototype.initializer=function(){var t=this,n=t._eventhandlers,r;r=t._loginintl=e.Intl.get(ht),t.get(at)?(t.setButtonLabel(et+G,ct+'-login"></i>'+r[O]),t.setPrimaryButton(et+G),t.promiseBeforeRender=function(){return e.usePromise("gallerycss-itsa-dialog","gallerycss-itsa-form","gallerycss-itsa-animatespin")}):(t.setButtonLabel(Z,r[O]),t.setPrimaryButton(Z)),t._defineModel(),n.push(t.after(E+z,function(e){t.get(s).set(E,e.newVal)})),n.push(t.after(S+z,function(e){t.get(s).set(S,e.newVal)})),n.push(t.after(x+z,function(e){t.get(s).set(x,e.newVal)})),n.push(t.after(L+z,function(e){t.get(s)[L+"Promise"]=e.newVal}))},pt.prototype.getLogin=function(){},pt.prototype._defineModel=function(){var t=this,n=t._loginintl,r=t.get(k),i=t.get(at),f=[],l,c,m,y,b;c=t.get(o+T),c[_]||c[D]||(c[_]=n[r?h:E]),c.initialfocus=!0,c[d]=!0,c[p]=!1,c[P]=M+(c[P]?" "+c[P]:""),c[v]=!0,m=t.get(o+N),m[_]||m[D]||(m[_]=n[S]),m[d]=!0,m[p]=!0,m[P]=M+(m[P]?" "+m[P]:""),m[v]=!0,y=t.get(o+C),y.widgetconfig={primarybtnonenter:!0},c[_]&&!m[_]&&(m[_]=" "),m[_]&&!c[_]&&(c[_]=" "),y[_]||(y[_]=n[g]),y.switchlabel=!0,t.get(st)&&f.push(i?{buttonId:et+ut,labelHTML:ct+'-question"></i>'+n[ut],config:{value:ut,classname:lt}}:{buttonId:Y+ut,labelHTML:n[ut],config:{value:ut}}),t.get(it)&&f.push(i?{buttonId:et+tt,labelHTML:ct+'-user"></i>'+n[tt],config:{value:tt,classname:lt}}:{buttonId:nt,labelHTML:n[tt],config:{value:tt}}),f.length>0&&t.addCustomBtns(f),l=e.Base.create("itsaviewloginmodel",e.ITSAFormModel,[],null,{ATTRS:{username:{value:t.get(E),formtype:r?"email":"text",formconfig:c,validator:t.get(u+T),validationerror:t.get(a+T)},password:{value:t.get(S),formtype:S,formconfig:m,validator:t.get(u+N),validationerror:t.get(a+N)},remember:{value:t.get(x),formtype:e.ITSACheckbox,formconfig:y}}}),b=new l,t._set(s,b),b.addTarget(t),b.syncPromise=t.get(L),t._setTemplateRenderer(!0)},pt.prototype._getterTemplate=function(){var e=this,t=e.get(r),s=e.get(at),o;return s?(o=e.get(st)?"{"+et+ut+"}":"",e.get(it)&&(o+="{"+rt+"}"),o+="{"+et+G+"}"):(o=e.get(st)?"{"+Y+ut+"}":"",e.get(it)&&(o+="{"+nt+"}"),o+="{"+Z+"}"),(t?n.sub(ft,{icon:t}):"")+H+(e.get(i)||"")+j+B+F+"{"+E+"}"+U+F+"{"+S+"}"+U+(e.get("showStayLoggedin")?q+'login-checkbox">'+"{remember}"+U:"")+I+o+U+R}},"@VERSION@",{requires:["yui-base","base-build","gallery-itsaformmodel","gallery-itsaviewmodel","gallery-itsacheckbox","gallery-itsa-i18n-login","gallery-itsamodelsyncpromise","gallery-itsamodulesloadedpromise","gallery-lazy-promise"]});
