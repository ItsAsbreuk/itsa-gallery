YUI.add("gallery-itsaviewlogin",function(e,t){"use strict";function ht(){ht.superclass.constructor.apply(this,arguments)}var n=e.Lang,r="icon",i="message",s="model",o="formconfig",u="validator",a="validationerror",f="mail",l="e"+f,c="address",h=l+c,p="primarybtnonenter",d="fullselect",v="required",m="loggedin",g="stay"+m,y="sername",b="assword",w="emember",E="u"+y,S="p"+b,x="r"+w,T="U"+y,N="P"+b,C="R"+w,k=E+"IsEmail",L="itsa",A="login",O=L+"-"+A,M="label",_="placeholder",D="classname",P='<span class="itsa-messagewrapper">',H='<fieldset class="'+O+'">',B="</span>",j='<div class="pure-control-group">',F='<div class="pure-controls">',I='<div class="itsa-',q="</fieldset>",R="</div>",U="Change",z="object",W="string",X="boolean",V="function",$="create",J="ccount",K="img",Q="submit",G="btn_",Y=G+Q,Z=K+G,et=$+"a"+J,tt="btn_"+et,nt=K+tt,rt=$+"A"+J,it="regain",st=E+"or"+S,ot="forgot",ut="imageButtons",at='<i class="{icon}"></i>',ft="itsabutton-iconleft",lt='<i class="itsaicon-dialog',ct="gallery-itsa-i18n-login";ht.NAME="itsaviewlogin",e.ITSAViewLogin=e.extend(ht,e.ITSAViewModel,{},{ATTRS:{createAccount:{value:null,validator:function(t){return t instanceof e.LazyPromise}},editable:{value:!0,readOnly:!0},formconfigPassword:{value:{},validator:function(e){return typeof e===z},initOnly:!0},formconfigRemember:{value:{},validator:function(e){return typeof e===z},initOnly:!0},formconfigUsername:{value:{},validator:function(e){return typeof e===z},initOnly:!0},icon:{value:null,validator:function(e){return typeof e===W}},imageButtons:{value:!1,validator:function(e){return typeof e===X},initOnly:!0},message:{value:null,validator:function(e){return typeof e===W}},model:{readOnly:!0},partOfMultiView:{value:!1,readOnly:!0},password:{value:""},regain:{value:null,validator:function(e){return e===null||e===st||e===E||e===S},initOnly:!0},remember:{value:!1},showStayLoggedin:{value:!1,initOnly:!0},template:{readOnly:!0,getter:"_getterTemplate"},username:{value:""},usernameIsEmail:{value:!1,initOnly:!0},validationerrorPassword:{value:null,validator:function(e){return e===null||typeof e===W},initOnly:!0},validationerrorUsername:{value:null,validator:function(e){return e===null||typeof e===W},initOnly:!0},validatorPassword:{value:null,validator:function(e){return e===null||typeof e===V},initOnly:!0},validatorUsername:{value:null,validator:function(e){return e===null||typeof e===V},initOnly:!0}}}),ht.prototype.initializer=function(){var t=this,n=t._eventhandlers,r;r=t._loginintl=e.Intl.get(ct),t.get(ut)?(t.setButtonLabel(Z+Q,lt+'-login"></i>'+r[A]),t.setPrimaryButton(Z+Q),t.promiseBeforeReady=function(){return e.usePromise("gallerycss-itsa-dialog","gallerycss-itsa-animatespin")}):(t.setButtonLabel(Y,r[A]),t.setPrimaryButton(Y)),t._defineModel(),n.push(t.after(E+U,function(e){t.get(s).set(E,e.newVal)})),n.push(t.after(S+U,function(e){t.get(s).set(S,e.newVal)})),n.push(t.after(x+U,function(e){t.get(s).set(x,e.newVal)}))},ht.prototype.getLogin=function(e){},ht.prototype._defineModel=function(){var t=this,n=t._loginintl,r=t.get(k),i=t.get(ut),f=[],l,c,m,y,b;c=t.get(o+T),c[M]||c[_]||(c[M]=n[r?h:E]),c.initialfocus=!0,c[d]=!0,c[p]=!1,c[D]=O+(c[D]?" "+c[D]:""),c[v]=!0,m=t.get(o+N),m[M]||m[_]||(m[M]=n[S]),m[d]=!0,m[p]=!0,m[D]=O+(m[D]?" "+m[D]:""),m[v]=!0,y=t.get(o+C),y.widgetconfig={primarybtnonenter:!0},c[M]&&!m[M]&&(m[M]=" "),m[M]&&!c[M]&&(c[M]=" "),y[M]||(y[M]=n[g]),y.switchlabel=!0,t.get(it)&&f.push(i?{buttonId:Z+ot,labelHTML:lt+'-question"></i>'+n[ot],config:{value:ot,classname:ft}}:{buttonId:G+ot,labelHTML:n[ot],config:{value:ot}}),t.get(rt)&&f.push(i?{buttonId:Z+et,labelHTML:lt+'-user"></i>'+n[et],config:{value:et,classname:ft}}:{buttonId:tt,labelHTML:n[et],config:{value:et}}),f.length>0&&t.addCustomBtns(f),l=e.Base.create("itsaviewloginmodel",e.ITSAFormModel,[],null,{ATTRS:{username:{value:t.get(E),formtype:r?"email":"text",formconfig:c,validator:t.get(u+T),validationerror:t.get(a+T)},password:{value:t.get(S),formtype:S,formconfig:m,validator:t.get(u+N),validationerror:t.get(a+N)},remember:{value:t.get(x),formtype:e.ITSACheckbox,formconfig:y}}}),b=new l,t._set(s,b),b.addTarget(t),t._setTemplateRenderer(!0)},ht.prototype._getterTemplate=function(){var e=this,t=e.get(r),s=e.get(ut),o;return s?(o=e.get(it)?"{"+Z+ot+"}":"",e.get(rt)&&(o+="{"+nt+"}"),o+="{"+Z+Q+"}"):(o=e.get(it)?"{"+G+ot+"}":"",e.get(rt)&&(o+="{"+tt+"}"),o+="{"+Y+"}"),(t?n.sub(at,{icon:t}):"")+P+(e.get(i)||"")+B+H+j+"{"+E+"}"+R+j+"{"+S+"}"+R+(e.get("showStayLoggedin")?I+'login-checkbox">'+"{remember}"+R:"")+F+o+R+q}},"@VERSION@",{requires:["yui-base","base-build","gallery-itsaformmodel","gallery-itsaviewmodel","gallery-itsacheckbox","gallery-itsa-i18n-login","gallery-itsamodulesloadedpromise","gallery-lazy-promise"]});
