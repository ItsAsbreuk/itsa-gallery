YUI.add("gallery-itsastatusbar",function(e,t){"use strict";function L(){L.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Node,i="body",s="info",o="warn",u="error",a="empty",f="number",l='<div class="itsa-statusbar-container"></div>',c='<div class="itsa-statusbar-empty"></div>',h='<div class="itsa-statusbar-info" style="display: none;"></div>',p='<div class="itsa-statusbar-warn" style="display: none;"></div>',d='<div class="itsa-statusbar-error" style="display: none;"></div>',v="itsa-statusbar-texttransform-",m="textTransform",g="Change",y=5e3,b="uppercase",w="lowercase",E="capitalize",S="_suspended",x="boolean",T="string",N="title",C="button",k='<i class="itsa-dialogicon {icon}"></i>';L.NAME="itsastatusbar",e.ITSAStatusbar=e.extend(L,e.ITSAMessageViewer,{},{ATTRS:{fadeDelay:{value:.2,validator:function(e){return typeof e===f&&e>0}},parentNode:{getter:function(t){return t instanceof r||e.one(t||i)||e.one(i)},validator:function(e){return e instanceof r||typeof e===T}},textTransform:{value:w,validator:function(e){return e===null||e===b||e===w||e===E}},readyText:{value:"ready",validator:function(e){return e===null||typeof e===T}},showIcon:{value:!0,validator:function(e){return typeof e===x}}}}),L.prototype.initializer=function(){var t=this;t._eventhandlers=[],t._bars={},t._renderBars(),e.later(y,t,t.isReady)},L.prototype.isReady=function(){var t=this;return t._readyPromise||(t._readyPromise=e.usePromise("gallery-itsanodepromise","gallerycss-itsa-base","gallerycss-itsa-animatespin","gallerycss-itsa-controll","gallerycss-itsa-dialog"))},L.prototype.resurrect=function(e){var t=this;t.isReady().then(function(){var n=t.panels[e.level];n&&n.showPromise()})},L.prototype.suspend=function(e){var t=this;t.isReady().then(function(){var n=t.panels[e.level];n&&n.hidePromise()})},L.prototype.viewMessage=function(t){console.log("viewmessage "+t.message);var n=this;return n.isReady().then(function(){return new e.Promise(function(r){var i=n._bars,s=i[t.level];n._showBar(s,t).then(function(){return t._promise}).then(function(){return n._hideBar(s)},function(){return n._hideBar(s)}).then(r).then(null,function(t){e.soon(function(){throw t})})})})},L.prototype.destructor=function(){var e=this;e._clearEventhandlers(),e._bars.destroy(!0)},L.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},L.prototype._hideBar=function(e){var t=this;return e.set("text",""),e.hide()},L.prototype._renderBars=function(){var e=this,t=e._eventhandlers,i=e.get(m),f,y,S,x,T,N;N=r.create(l),f=e._bars,y=f[a]=r.create(c),S=f[s]=r.create(h),x=f[o]=r.create(p),T=f[u]=r.create(d),e.get("parentNode").prepend(N.append(y).append(S).append(x).append(T)),i&&N.addClass(v+i),n.each([s,o,u],function(n){t.push(f[n].delegate("tap",function(){var t=e._lastMessage[n];t&&t.resolve()},C))}),t.push(e.on(m+g,function(e){var t=e.newVal;N.removeClass(v+b),N.removeClass(v+w),N.removeClass(v+E),t&&N.addClass(v+t)}))},L.prototype._showBar=function(e,t){var n=this,r=n.get("fadeDelay");return e.set("text",t.message+" <button>close</button>"),e.append("<button>close</button>"),console.log(t[S]?"viewmessage level "+t.level+" not shown: SUSPENDED":"viewmessage about to show level "+t.level),t[S]||(r===0?e.show():e.showPromise(null,{duration:r}))}},"@VERSION@",{requires:["yui-base","event-tap","promise","timers","node-event-delegate","gallery-itsamessageviewer"],skinnable:!0});
