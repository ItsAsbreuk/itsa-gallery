YUI.add("gallery-itsadupmodelviewextention",function(e,t){"use strict";function d(){}var n=e.Lang,r=e.DataType.Date,i=r.isValidDate,s="date_original",o="enddate_original",u=function(e){var t=e.getSeconds(),n=e.getMinutes(),r=e.getHours();return 86400-3600*r-60*n-t},a=function(e){return new Date(e.getTime())},f=function(e,t){e.setTime(e.getTime()+1e3*t)},l=function(e,t){e.setTime(e.getTime()+6e4*t)},c=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},h=function(e,t){return r.isGreater(e,t)&&!c(e,t)},p=function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12,e.setFullYear(n),e.setMonth(r)};d.ATTRS={modelConfig:{value:null,validator:function(e){return e===null||n.isObject(e)},setter:"_setModelConfig"},splitDays:{value:!1,validator:function(e){return typeof e=="boolean"},setter:"_setSplitDays"}},e.mix(d.prototype,{_setModelConfig:function(e){var t=this;t._setSplitDaysInitiated?t.renderView&&t._rerendAttrChg&&t._renderView({modelConfig:e}):t._setModelConfigInitiated=!0},_setSplitDays:function(e){var t=this;t._setSplitDaysInitiated?t.renderView&&t._rerendAttrChg&&t._renderView({modelConfig:e}):t._setSplitDaysInitiated=!0},_generateAbberantModelList:function(t,c){var d=this,v=d.get("modelList"),m=d._listLazy,g=d.get("modelConfig"),y=g&&g.date,b=g&&g.enddate,w=g&&g.count,E=g&&g.intervalMinutes,S=g&&g.intervalHours,x=g&&g.intervalDays,T=g&&g.intervalMonths,N=d.get("splitDays"),C=e.rbind(d.getModelAttr,d),k=e.rbind(d.setModelAttr,d),L,A,O,M,_,D,P,H,B;A=function(t,i,s,o,u){var l=n.type(t.get)!=="function",c,h;return l?(c={},e.mix(c,t),delete c.clientId,delete c.id):c=new v.model(t.getAttrs()),s&&(h=a(i),f(h,o),r.isGreater(s,h)?k(c,b,h,{silent:!0}):u&&k(c,b,a(s),{silent:!0})),C(c,y)&&k(c,y,a(i),{silent:!0}),c},O=function(e,t){d._origModels[C(e,"clientId")]=t};if(!t||!d._abModelList||c)d._prevLastAbberantModelIndex=null,d._origModels.length=0,d._abModelList&&d._abModelList.destroy(),d._abModelList=m?new e.LazyModelList:new e.ModelList,d._abModelList.comparator=v&&v.comparator,d._abModelList.model=v.model;b&&!w?L=function(e){var t=C(e,y),n=C(e,b),r;if(i(t)&&i(n)){N&&(r=u(t),k(e,s,a(t),{silent:!0}),k(e,o,a(n),{silent:!0})),_=a(t),M=A(e,_,n,r),d._abModelList.add(M),O(M,e);while(h(n,_))f(_,r),N&&r!==86400&&(r=86400),M=A(e,_,n,r),d._abModelList.add(M),O(M,e)}else d._abModelList.add(e)}:!b&&w?L=function(e){var t=C(e,y),r=C(e,w)||1,s=E&&C(e,E),o=S&&C(e,S),u=x&&C(e,x),f=T&&C(e,T),c,h;if(!i(t))d._abModelList.add(e);else{M=A(e,t),d._abModelList.add(M),O(M,e),n.isNumber(r)||(r=1),n.isNumber(s)||(s=0),n.isNumber(o)||(o=0),n.isNumber(u)||(u=0),n.isNumber(f)||(f=0),c=1440*u+60*o+s,c===0&&f===0&&(c=1440),_=a(t);for(h=1;h<r;h++)c>0&&l(_,c),f>0&&p(_,f),M=A(e,_),d._abModelList.add(M),O(M,e)}}:b&&w&&(_=new Date(0),L=function(e){var t=C(e,y),r=C(e,b)||t,c=C(e,w)||1,v=E&&C(e,E),m=S&&C(e,S),g=x&&C(e,x),L=T&&C(e,T),D,P,H,B,j,F;if(!i(t))d._abModelList.add(e);else{N&&(D=u(t),k(e,s,a(t),{silent:!0}),k(e,o,a(r),{silent:!0})),M=A(e,t,r,D),d._abModelList.add(M),O(M,e),F=i(r),F||(r=t),n.isNumber(c)||(c=1),n.isNumber(v)||(v=0),n.isNumber(m)||(m=0),n.isNumber(g)||(g=0),n.isNumber(L)||(L=0),P=1440*g+60*m+v,P===0&&L===0&&(P=1440),H=a(t),B=a(r);if(F){_=a(H);while(h(B,_))f(_,D),N&&D!==86400&&(D=86400),M=A(e,_,B,D),d._abModelList.add(M),O(M,e)}for(j=1;j<c;j++){P>0&&(l(H,P),l(B,P)),L>0&&(p(H,L),p(B,L)),M=A(e,H,B,D,!0),k(M,s,a(H),{silent:!0}),k(M,o,a(B),{silent:!0}),d._abModelList.add(M),O(M,e);if(F){_=a(H);while(h(B,_))f(_,D),M=A(e,_,B,D,!0),k(M,s,a(H),{silent:!0}),k(M,o,a(B),{silent:!0}),d._abModelList.add(M),O(M,e)}}}}),H=(d._prevLastAbberantModelIndex||-1)+1,d._prevLastAbberantModelIndex=B=v.size()-1;for(P=H;P<=B;P++)D=v.item(P),L(D)}},!0),e.ITSADupModelViewExtention=d},"@VERSION@",{requires:["yui-base","base-build","node-base","oop","model-list","lazy-model-list","datatype-date-math"]});
