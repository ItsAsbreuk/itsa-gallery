if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-itsainfiniteview/gallery-itsainfiniteview.js']) {
   __coverage__['build/gallery-itsainfiniteview/gallery-itsainfiniteview.js'] = {"path":"build/gallery-itsainfiniteview/gallery-itsainfiniteview.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0},"b":{"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"(anonymous_2)","line":55,"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":32}}},"3":{"name":"(anonymous_3)","line":72,"loc":{"start":{"line":72,"column":22},"end":{"line":72,"column":33}}},"4":{"name":"(anonymous_4)","line":90,"loc":{"start":{"line":90,"column":21},"end":{"line":90,"column":32}}},"5":{"name":"(anonymous_5)","line":140,"loc":{"start":{"line":140,"column":25},"end":{"line":140,"column":36}}},"6":{"name":"(anonymous_6)","line":203,"loc":{"start":{"line":203,"column":23},"end":{"line":203,"column":47}}},"7":{"name":"(anonymous_7)","line":221,"loc":{"start":{"line":221,"column":21},"end":{"line":221,"column":32}}},"8":{"name":"(anonymous_8)","line":236,"loc":{"start":{"line":236,"column":18},"end":{"line":236,"column":29}}},"9":{"name":"(anonymous_9)","line":268,"loc":{"start":{"line":268,"column":29},"end":{"line":268,"column":58}}},"10":{"name":"(anonymous_10)","line":307,"loc":{"start":{"line":307,"column":25},"end":{"line":307,"column":45}}},"11":{"name":"(anonymous_11)","line":333,"loc":{"start":{"line":333,"column":30},"end":{"line":333,"column":41}}},"12":{"name":"(anonymous_12)","line":336,"loc":{"start":{"line":336,"column":16},"end":{"line":336,"column":30}}},"13":{"name":"(anonymous_13)","line":358,"loc":{"start":{"line":358,"column":28},"end":{"line":358,"column":40}}},"14":{"name":"(anonymous_14)","line":375,"loc":{"start":{"line":375,"column":28},"end":{"line":375,"column":40}}},"15":{"name":"(anonymous_15)","line":393,"loc":{"start":{"line":393,"column":28},"end":{"line":393,"column":40}}},"16":{"name":"(anonymous_16)","line":413,"loc":{"start":{"line":413,"column":28},"end":{"line":413,"column":40}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":422,"column":83}},"2":{"start":{"line":53,"column":0},"end":{"line":57,"column":6}},"3":{"start":{"line":56,"column":8},"end":{"line":56,"column":35}},"4":{"start":{"line":59,"column":0},"end":{"line":420,"column":2}},"5":{"start":{"line":73,"column":12},"end":{"line":74,"column":21}},"6":{"start":{"line":76,"column":12},"end":{"line":76,"column":56}},"7":{"start":{"line":77,"column":12},"end":{"line":77,"column":35}},"8":{"start":{"line":78,"column":12},"end":{"line":78,"column":47}},"9":{"start":{"line":79,"column":12},"end":{"line":79,"column":31}},"10":{"start":{"line":96,"column":12},"end":{"line":102,"column":32}},"11":{"start":{"line":104,"column":12},"end":{"line":129,"column":13}},"12":{"start":{"line":105,"column":16},"end":{"line":105,"column":47}},"13":{"start":{"line":108,"column":16},"end":{"line":108,"column":81}},"14":{"start":{"line":109,"column":16},"end":{"line":122,"column":17}},"15":{"start":{"line":110,"column":20},"end":{"line":117,"column":22}},"16":{"start":{"line":119,"column":21},"end":{"line":122,"column":17}},"17":{"start":{"line":120,"column":20},"end":{"line":120,"column":61}},"18":{"start":{"line":121,"column":20},"end":{"line":121,"column":50}},"19":{"start":{"line":125,"column":16},"end":{"line":126,"column":17}},"20":{"start":{"line":127,"column":16},"end":{"line":128,"column":17}},"21":{"start":{"line":130,"column":12},"end":{"line":130,"column":33}},"22":{"start":{"line":146,"column":12},"end":{"line":156,"column":91}},"23":{"start":{"line":157,"column":12},"end":{"line":190,"column":13}},"24":{"start":{"line":158,"column":16},"end":{"line":178,"column":17}},"25":{"start":{"line":160,"column":20},"end":{"line":160,"column":91}},"26":{"start":{"line":161,"column":20},"end":{"line":161,"column":82}},"27":{"start":{"line":162,"column":20},"end":{"line":162,"column":60}},"28":{"start":{"line":164,"column":21},"end":{"line":178,"column":17}},"29":{"start":{"line":166,"column":20},"end":{"line":166,"column":90}},"30":{"start":{"line":167,"column":20},"end":{"line":167,"column":81}},"31":{"start":{"line":168,"column":20},"end":{"line":168,"column":60}},"32":{"start":{"line":172,"column":20},"end":{"line":177,"column":21}},"33":{"start":{"line":173,"column":24},"end":{"line":173,"column":71}},"34":{"start":{"line":174,"column":24},"end":{"line":174,"column":71}},"35":{"start":{"line":175,"column":24},"end":{"line":175,"column":76}},"36":{"start":{"line":176,"column":24},"end":{"line":176,"column":67}},"37":{"start":{"line":179,"column":16},"end":{"line":183,"column":17}},"38":{"start":{"line":180,"column":20},"end":{"line":180,"column":42}},"39":{"start":{"line":186,"column":16},"end":{"line":187,"column":17}},"40":{"start":{"line":188,"column":16},"end":{"line":189,"column":17}},"41":{"start":{"line":209,"column":12},"end":{"line":210,"column":53}},"42":{"start":{"line":212,"column":12},"end":{"line":212,"column":83}},"43":{"start":{"line":222,"column":12},"end":{"line":222,"column":39}},"44":{"start":{"line":237,"column":12},"end":{"line":239,"column":52}},"45":{"start":{"line":241,"column":12},"end":{"line":256,"column":13}},"46":{"start":{"line":242,"column":16},"end":{"line":247,"column":18}},"47":{"start":{"line":250,"column":16},"end":{"line":255,"column":18}},"48":{"start":{"line":269,"column":12},"end":{"line":273,"column":39}},"49":{"start":{"line":275,"column":12},"end":{"line":288,"column":13}},"50":{"start":{"line":276,"column":16},"end":{"line":276,"column":63}},"51":{"start":{"line":277,"column":16},"end":{"line":277,"column":83}},"52":{"start":{"line":278,"column":16},"end":{"line":280,"column":17}},"53":{"start":{"line":279,"column":20},"end":{"line":279,"column":44}},"54":{"start":{"line":281,"column":16},"end":{"line":284,"column":17}},"55":{"start":{"line":283,"column":20},"end":{"line":283,"column":44}},"56":{"start":{"line":287,"column":16},"end":{"line":287,"column":40}},"57":{"start":{"line":291,"column":12},"end":{"line":295,"column":13}},"58":{"start":{"line":293,"column":16},"end":{"line":293,"column":56}},"59":{"start":{"line":294,"column":16},"end":{"line":294,"column":30}},"60":{"start":{"line":296,"column":12},"end":{"line":296,"column":42}},"61":{"start":{"line":308,"column":12},"end":{"line":308,"column":32}},"62":{"start":{"line":322,"column":12},"end":{"line":322,"column":76}},"63":{"start":{"line":334,"column":12},"end":{"line":339,"column":14}},"64":{"start":{"line":337,"column":20},"end":{"line":337,"column":34}},"65":{"start":{"line":359,"column":20},"end":{"line":359,"column":44}},"66":{"start":{"line":376,"column":20},"end":{"line":376,"column":44}},"67":{"start":{"line":394,"column":20},"end":{"line":394,"column":44}},"68":{"start":{"line":414,"column":20},"end":{"line":414,"column":44}}},"branchMap":{"1":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":29},"end":{"line":98,"column":51}},{"start":{"line":98,"column":55},"end":{"line":98,"column":79}},{"start":{"line":98,"column":84},"end":{"line":98,"column":100}}]},"2":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":37},"end":{"line":100,"column":61}},{"start":{"line":100,"column":65},"end":{"line":100,"column":67}}]},"3":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":12},"end":{"line":104,"column":12}},{"start":{"line":104,"column":12},"end":{"line":104,"column":12}}]},"4":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":25}},{"start":{"line":104,"column":29},"end":{"line":104,"column":42}}]},"5":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":16},"end":{"line":109,"column":16}},{"start":{"line":109,"column":16},"end":{"line":109,"column":16}}]},"6":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":21},"end":{"line":119,"column":21}},{"start":{"line":119,"column":21},"end":{"line":119,"column":21}}]},"7":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":16},"end":{"line":125,"column":16}},{"start":{"line":125,"column":16},"end":{"line":125,"column":16}}]},"8":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":16},"end":{"line":127,"column":16}},{"start":{"line":127,"column":16},"end":{"line":127,"column":16}}]},"9":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":29},"end":{"line":150,"column":51}},{"start":{"line":150,"column":55},"end":{"line":150,"column":79}},{"start":{"line":150,"column":84},"end":{"line":150,"column":100}}]},"10":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":24},"end":{"line":154,"column":28}},{"start":{"line":154,"column":32},"end":{"line":154,"column":38}}]},"11":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":24},"end":{"line":155,"column":28}},{"start":{"line":155,"column":32},"end":{"line":155,"column":38}}]},"12":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":12},"end":{"line":157,"column":12}},{"start":{"line":157,"column":12},"end":{"line":157,"column":12}}]},"13":{"line":157,"type":"binary-expr","locations":[{"start":{"line":157,"column":16},"end":{"line":157,"column":25}},{"start":{"line":157,"column":29},"end":{"line":157,"column":44}}]},"14":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":16},"end":{"line":158,"column":16}},{"start":{"line":158,"column":16},"end":{"line":158,"column":16}}]},"15":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":21},"end":{"line":164,"column":21}},{"start":{"line":164,"column":21},"end":{"line":164,"column":21}}]},"16":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":20},"end":{"line":172,"column":20}},{"start":{"line":172,"column":20},"end":{"line":172,"column":20}}]},"17":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":16},"end":{"line":179,"column":16}},{"start":{"line":179,"column":16},"end":{"line":179,"column":16}}]},"18":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":16},"end":{"line":186,"column":16}},{"start":{"line":186,"column":16},"end":{"line":186,"column":16}}]},"19":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":16},"end":{"line":188,"column":16}},{"start":{"line":188,"column":16},"end":{"line":188,"column":16}}]},"20":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":12},"end":{"line":241,"column":12}},{"start":{"line":241,"column":12},"end":{"line":241,"column":12}}]},"21":{"line":277,"type":"binary-expr","locations":[{"start":{"line":277,"column":28},"end":{"line":277,"column":54}},{"start":{"line":277,"column":59},"end":{"line":277,"column":80}}]},"22":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":16},"end":{"line":278,"column":16}},{"start":{"line":278,"column":16},"end":{"line":278,"column":16}}]},"23":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":16},"end":{"line":281,"column":16}},{"start":{"line":281,"column":16},"end":{"line":281,"column":16}}]},"24":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":12},"end":{"line":291,"column":12}},{"start":{"line":291,"column":12},"end":{"line":291,"column":12}}]},"25":{"line":291,"type":"binary-expr","locations":[{"start":{"line":291,"column":17},"end":{"line":291,"column":32}},{"start":{"line":291,"column":37},"end":{"line":291,"column":53}}]},"26":{"line":322,"type":"cond-expr","locations":[{"start":{"line":322,"column":58},"end":{"line":322,"column":63}},{"start":{"line":322,"column":66},"end":{"line":322,"column":73}}]}},"code":["(function () { YUI.add('gallery-itsainfiniteview', function (Y, NAME) {","","'use strict';","","/**"," * ScrollView KeyNav Plugin"," *"," *"," * Plugin that enables infinite-scroll with Y.DataTable, Y.ITSAViewModellist and Y.ITSAScrollViewModellist."," *"," * <u>Behaviour Y.DataTable</u>"," * Y.DataTable will render all the Models that are within the attribute 'data'. This plugin will extend these by calling"," * the ModelList's sync-method with 'readMore'. Thus Y.DataTable will always only expand with external data."," *"," * <u>Behaviour Y.ITSAViewModellist and Y.ITSAScrollViewModellist</u>"," * These widgets have the capability of rendering just the 'batchSize' (attribute), even if there are more items within the (Lazy)ModelList."," * <b>Caution:</b> Be sure to plug-in <u>before</u> you render the ScrollView-instance. If you don't then all innitial available items will"," * be rendered, regardsless of the 'batchSize'. Although you can overcome this, if you use also limit the items by using the attribute 'limitItems'."," *"," *"," * To trigger external data (Models) to be loaded, this plugin enables the scrollview to call the ModelList's sync method with action='readMore'"," * and options = {lastItem: 'lastModel.getAttrs()', loadSize: loadSize}. These values can be used by the remote to determine which and how many"," * items to load."," *"," * When the ScrollView-instance is expanded, it will expand with 'batchSize' items (Models). Any already available in the (Lazy)ModelList"," * will be used, if not enaough available, the plugin will call the (Lazy)ModelList's 'sync' method to retreive more. The number of external items"," * to be retreived is managed with the attribute 'loadSize'."," *"," * Best practice is to make 'loadSize' higher than 'batchSize' --> each sync-call means an extra http-request. And a too high value of 'batchSize'"," * will mean a prefomancehit due to the expansion-rendering of the scrollview-instance."," *"," * @module gallery-itsascrollviewinfinitescroll"," * @class ITSAScrollViewInfiniteScroll"," * @extends Plugin.Base"," * @constructor"," * @since 0.1"," *"," * <i>Copyright (c) 2013 Marco Asbreuk - http://itsasbreuk.nl</i>"," * YUI BSD License - http://developer.yahoo.com/yui/license.html"," *","*/","","// -- Public Static Properties -------------------------------------------------","","/**"," * Internal list that holds event-references"," * @property _eventhandlers"," * @private"," * @type Array"," */","","","var Lang = Y.Lang,","    YArray = Y.Array,","    PARSTEINT = function(value) {","        return parseInt(value, 10);","    };","","Y.namespace('Plugin').ITSAInifiniteView = Y.Base.create('itsainfiniteview', Y.Plugin.Base, [], {","","        _eventhandlers : [],","        _window : null,","        host : null,","","        /**","         * Sets up the toolbar during initialisation. Calls render() as soon as the hosts-editorframe is ready","         *","         * @method initializer","         * @protected","         * @since 0.1","         */","        initializer : function() {","            var instance = this,","                host;","","            instance.host = host = instance.get('host');","            host._itmsAvail = true;","            instance._window = Y.one('window');","            instance._bindUI();","        },","","        /**","         * Tries to expand the scrollview-list.","         *","         * @method expandList","         * @return {Boolean} Whether the scrollviewlist was expanded. Only when external data is requested and returns empty, there actually","         * was no extra data, while this method will return true.","         * @since 0.1","         */","        expandList : function() {","//=============================================================================================================================","//","// NEED SOME WORK HERE: MIGHT BE ASYNCHROUS --> WE NEED TO RETURN A PROMISE","//","//=============================================================================================================================","            var instance = this,","                host = instance.host,","                modelList = (host.getModelListInUse && host.getModelListInUse()) || host.get('data'),","                batchSize = instance.get('batchSize'),","                prevLastModelIndex = host._prevLastModelIndex || -1,","                needExpansion = host._itmsAvail,","                askExternalData;","","            if (modelList && needExpansion) {","                instance._fireExpansion(false);","                // Need to distinquish between a need to call for external data, or expand from within the current modellist","                // The data MIGHT be available in the current modellist, but not rendered in the viewnode yet","                askExternalData = (prevLastModelIndex >= (modelList.size() - 1));","                if (askExternalData) {","                    modelList.sync(","                        'readMore',","                        {","                            lastItem: prevLastModelIndex,","                            batchSize: batchSize","                        },","                        Y.rbind(instance._expansionFinished, instance)","                    );","                }","                else if (host._renderView) {","                    host._renderView(null, {rebuild: false});","                    instance._fireExpansion(true);","                }","            }","            else {","                if (!modelList) {","                }","                if (!host._itmsAvail) {","                }","            }","            return needExpansion;","        },","","        /**","         * Check if expansion of the modelList is needed. If so, it will take action (expand the list by calling 'expandList').","         *","         * @method checkExpansion","         * @since 0.1","         *","        */","        checkExpansion : function() {","//=============================================================================================================================","//","// NEED SOME WORK HERE: MIGHT BE ASYNCHROUS --> WE NEED TO RETURN A PROMISE","//","//=============================================================================================================================","            var instance = this,","                host = instance.host,","                window = instance._window,","                boundingBox = host.get('boundingBox'),","                modelList = (host.getModelListInUse && host.getModelListInUse()) || host.get('data'),","                viewNode = host._viewNode,","                expansionArea = instance.get('expansionArea'),","                axis = host.get('axis'),","                xAxis = axis && axis.x,","                yAxis = axis && axis.y,","                boundingBoxEdge, viewNodeEdge, buffer, docHeight, winHeight, currentScroll;","            if (modelList && host._itmsAvail) {","                if (yAxis) {","                    // ITSAScrollViewModelList with xAxis","                    boundingBoxEdge = boundingBox.getY() + boundingBox.get('offsetHeight');","                    viewNodeEdge = viewNode.getY() + viewNode.get('offsetHeight');","                    buffer = (viewNodeEdge-boundingBoxEdge);","                }","                else if (xAxis) {","                    // ITSAScrollViewModelList with xAxis","                    boundingBoxEdge = boundingBox.getX() + boundingBox.get('offsetWidth');","                    viewNodeEdge = viewNode.getX() + viewNode.get('offsetWidth');","                    buffer = (viewNodeEdge-boundingBoxEdge);","                }","                else {","                    // no ITSAScrollViewModelList, but ITSAViewModelList","                    if (window) {","                        winHeight = PARSTEINT(window.get('winHeight'));","                        docHeight = PARSTEINT(window.get('docHeight')); // --> in Safari this returns the winHeight instead of docheight !!!","                        currentScroll = PARSTEINT(window.get('docScrollY'));","                        buffer = docHeight-winHeight-currentScroll;","                    }","                }","                if (buffer<expansionArea) {","                    instance.expandList();","                }","                else {","                }","            }","            else {","                if (!modelList) {","                }","                if (!host._itmsAvail) {","                }","            }","        },","","        /**","         * Forces to load all items into the scrollview-instance.","         *","         * @method loadAllItems","         * @param {Int} [maxExpansions] Only needed when you use the plugin <b>ITSAInifiniteView</b>. Use this value to limit","         * expansion data-calls. It will prevent you from falling into endless expansion when the list is infinite. If not set this method will expand","         * at the <b>max of ITSAInifiniteView.get('maxExpansions') times by default</b>. If you are responsible for the external data and","         * that data is limited, you might choose to set this value that high to make sure all data is rendered in the scrollview.","         * @since 0.1","        */","        loadAllItems : function(maxExpansions) {","//=============================================================================================================================","//","// NEED SOME WORK HERE: MIGHT BE ASYNCHROUS --> WE NEED TO RETURN A PROMISE","//","//=============================================================================================================================","            var host = this.host,","                modelList = host.getModelListInUse();","","            host._getNodeFromModelOrIndex(null, modelList.size()-1, maxExpansions);","        },","","        /**","         * Cleans up bindings and removes plugin","         * @method destructor","         * @protected","         * @since 0.1","        */","        destructor : function() {","            this._clearEventhandlers();","        },","","        //===============================================================================================","        // private methods","        //===============================================================================================","","        /**","         * Binding events","         *","         * @method _bindUI","         * @private","         * @since 0.1","        */","        _bindUI : function() {","            var instance = this,","                host = instance.host,","                hostIsScrollView = host.get('axis');","","            if (hostIsScrollView) {","                instance._eventhandlers.push(","                    host.after(","                        'scrollEnd',","                        Y.rbind(instance.checkExpansion, instance)","                    )","                );","            }","            else {","                instance._eventhandlers.push(","                    Y.after(","                        'scroll',","                        Y.rbind(instance.checkExpansion, instance)","                    )","                );","            }","        },","","        /**","         *","         *","         * @method _expansionFinished","         * @private","         * @param {Object} transaction Transaction object.","         * @param {Object} load event.","         * @since 0.1","         */","        _expansionFinished : function (transaction, load) {","            var instance = this,","                host = instance.host,","                modelList = host.get('modelList'),","                lastItemOnTop = host.get('lastItemOnTop'),","                newItems, responseData;","","            try {","                responseData = Y.JSON.parse(load.responseText);","                newItems = (Lang.isArray(responseData) && (responseData.length>0));","                if (!newItems) {","                    host._itmsAvail = false;","                }","                if (newItems) {","                    // host._renderView(); will be called when new Models are added","                    modelList.add(newItems);","                }","            }","            catch (e) {","                host._itmsAvail = false;","            }","            // now tricky one: you might need to add the last empty item","            // when itemsOnTop>0","            if ((lastItemOnTop>0) && !host._itmsAvail) {","                // need to add an extra empty LI-element that has the size of the view minus the last element","                host._addEmptyItem(null, lastItemOnTop);","                host.syncUI();","            }","            instance._fireExpansion(true);","        },","","        /**","         * A utility method that fires events at the start and end of an modellist-expansion.","         *","         * @method _fireExpansion","         * @param {Boolean} finished whether it is the 'start'-event or the 'end'-event that should be fired.","         * @private","         * @since 0.1","         */","        _fireExpansion : function (finished) {","            var instance = this;","","            /**","             * Is fired before a 'scrollview-expansion' takes place.","             *","             * @event modelExpansion:start","             * @since 0.1","            **/","            /**","             * Is fired when a 'scrollview-expansion' is finished.","             *","             * @event modelExpansion:end","             * @since 0.1","            **/","            instance.fire('modelExpansion:' + (finished ? 'end' : 'start'));","        },","","        /**","         * Cleaning up all eventlisteners","         *","         * @method _clearEventhandlers","         * @private","         * @since 0.1","         *","        */","        _clearEventhandlers : function() {","            YArray.each(","                this._eventhandlers,","                function(item){","                    item.detach();","                }","            );","        }","","    }, {","        NS : 'itsainfiniteview',","        ATTRS : {","","            /**","             * @description The amount of items that are added to the ModelList after every 'expansion'.","             * The optimal value of this attribute is just how many LI-elements fit into the attribute 'expansionArea'. But it might be set","             * higher to decrease the number of expansioncalls.","             *","             * @default 100","             * @attribute batchSize","             * @type Boolean","             * @since 0.1","            */","            batchSize: {","                value: 100,","                validator:  function(v) {","                    return Lang.isNumber(v);","                }","            },","","            /**","             * @description The amount of items that are requested when external data is needed (called through the (Lazy)ModelList's sync-method).","             * Best practice is to make 'loadSize' higher than 'batchSize' (suggested is 10x batchSize) because each sync-call means an extra","             * http-request.","             *","             * @default 1000","             * @attribute loadSize","             * @type Boolean","             * @since 0.1","            */","            loadSize: {","                value: 1000,","                validator:  function(v) {","                    return Lang.isNumber(v);","                }","            },","","            /**","             * @description Limit expansion data-calls by setting this attribute. It will prevent you from falling into endless expansion when the","             * list is infinite. If you are responsible for the external data and that data is limited, you might choose to set this value that","             * high to make sure all data is rendered in the scrollview. The choosen value represents the number of expansion calls. The true number","             * of added items = maxExpansions * batchSize","             *","             * @default 50","             * @attribute maxExpansions","             * @type Boolean","             * @since 0.1","            */","            maxExpansions: {","                value: 50,","                validator:  function(v) {","                    return Lang.isNumber(v);","                }","            },","","            /**","             * @description The offset-area in <i>pixels</i> that should be minimal available. The offset-area is defined as the area outside","             * the view but with all the remaining scrollview-elements.","             * When the offset-area is less than 'expansionArea', a checkExpansion will be excecuted (after a scroll:end-event).","             *","             * If you encounter faltering scrollbehaviour -due to new loading items- then increase this number. If you do, consider to","             * re-optimize the value of the attribute 'batchSize'.","             *","             * @default 2000","             * @attribute expansionArea","             * @type Boolean","             * @since 0.1","            */","            expansionArea: {","                value: 2000,","                validator:  function(v) {","                    return Lang.isNumber(v);","                }","            }","","        }","    }",");","","}, '@VERSION@', {\"requires\": [\"base-build\", \"plugin\", \"node-base\", \"json-parse\"]});","","}());"]};
}
var __cov_2ktqQvubYlWCNJ5i8KnN1g = __coverage__['build/gallery-itsainfiniteview/gallery-itsainfiniteview.js'];
__cov_2ktqQvubYlWCNJ5i8KnN1g.s['1']++;YUI.add('gallery-itsainfiniteview',function(Y,NAME){'use strict';__cov_2ktqQvubYlWCNJ5i8KnN1g.f['1']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['2']++;var Lang=Y.Lang,YArray=Y.Array,PARSTEINT=function(value){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['2']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['3']++;return parseInt(value,10);};__cov_2ktqQvubYlWCNJ5i8KnN1g.s['4']++;Y.namespace('Plugin').ITSAInifiniteView=Y.Base.create('itsainfiniteview',Y.Plugin.Base,[],{_eventhandlers:[],_window:null,host:null,initializer:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['3']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['5']++;var instance=this,host;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['6']++;instance.host=host=instance.get('host');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['7']++;host._itmsAvail=true;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['8']++;instance._window=Y.one('window');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['9']++;instance._bindUI();},expandList:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['4']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['10']++;var instance=this,host=instance.host,modelList=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['1'][0]++,host.getModelListInUse)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['1'][1]++,host.getModelListInUse())||(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['1'][2]++,host.get('data')),batchSize=instance.get('batchSize'),prevLastModelIndex=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['2'][0]++,host._prevLastModelIndex)||(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['2'][1]++,-1),needExpansion=host._itmsAvail,askExternalData;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['11']++;if((__cov_2ktqQvubYlWCNJ5i8KnN1g.b['4'][0]++,modelList)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['4'][1]++,needExpansion)){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['3'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['12']++;instance._fireExpansion(false);__cov_2ktqQvubYlWCNJ5i8KnN1g.s['13']++;askExternalData=prevLastModelIndex>=modelList.size()-1;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['14']++;if(askExternalData){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['5'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['15']++;modelList.sync('readMore',{lastItem:prevLastModelIndex,batchSize:batchSize},Y.rbind(instance._expansionFinished,instance));}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['5'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['16']++;if(host._renderView){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['6'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['17']++;host._renderView(null,{rebuild:false});__cov_2ktqQvubYlWCNJ5i8KnN1g.s['18']++;instance._fireExpansion(true);}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['6'][1]++;}}}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['3'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['19']++;if(!modelList){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['7'][0]++;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['7'][1]++;}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['20']++;if(!host._itmsAvail){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['8'][0]++;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['8'][1]++;}}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['21']++;return needExpansion;},checkExpansion:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['5']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['22']++;var instance=this,host=instance.host,window=instance._window,boundingBox=host.get('boundingBox'),modelList=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['9'][0]++,host.getModelListInUse)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['9'][1]++,host.getModelListInUse())||(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['9'][2]++,host.get('data')),viewNode=host._viewNode,expansionArea=instance.get('expansionArea'),axis=host.get('axis'),xAxis=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['10'][0]++,axis)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['10'][1]++,axis.x),yAxis=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['11'][0]++,axis)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['11'][1]++,axis.y),boundingBoxEdge,viewNodeEdge,buffer,docHeight,winHeight,currentScroll;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['23']++;if((__cov_2ktqQvubYlWCNJ5i8KnN1g.b['13'][0]++,modelList)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['13'][1]++,host._itmsAvail)){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['12'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['24']++;if(yAxis){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['14'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['25']++;boundingBoxEdge=boundingBox.getY()+boundingBox.get('offsetHeight');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['26']++;viewNodeEdge=viewNode.getY()+viewNode.get('offsetHeight');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['27']++;buffer=viewNodeEdge-boundingBoxEdge;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['14'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['28']++;if(xAxis){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['15'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['29']++;boundingBoxEdge=boundingBox.getX()+boundingBox.get('offsetWidth');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['30']++;viewNodeEdge=viewNode.getX()+viewNode.get('offsetWidth');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['31']++;buffer=viewNodeEdge-boundingBoxEdge;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['15'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['32']++;if(window){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['16'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['33']++;winHeight=PARSTEINT(window.get('winHeight'));__cov_2ktqQvubYlWCNJ5i8KnN1g.s['34']++;docHeight=PARSTEINT(window.get('docHeight'));__cov_2ktqQvubYlWCNJ5i8KnN1g.s['35']++;currentScroll=PARSTEINT(window.get('docScrollY'));__cov_2ktqQvubYlWCNJ5i8KnN1g.s['36']++;buffer=docHeight-winHeight-currentScroll;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['16'][1]++;}}}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['37']++;if(buffer<expansionArea){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['17'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['38']++;instance.expandList();}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['17'][1]++;}}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['12'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['39']++;if(!modelList){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['18'][0]++;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['18'][1]++;}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['40']++;if(!host._itmsAvail){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['19'][0]++;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['19'][1]++;}}},loadAllItems:function(maxExpansions){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['6']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['41']++;var host=this.host,modelList=host.getModelListInUse();__cov_2ktqQvubYlWCNJ5i8KnN1g.s['42']++;host._getNodeFromModelOrIndex(null,modelList.size()-1,maxExpansions);},destructor:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['7']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['43']++;this._clearEventhandlers();},_bindUI:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['8']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['44']++;var instance=this,host=instance.host,hostIsScrollView=host.get('axis');__cov_2ktqQvubYlWCNJ5i8KnN1g.s['45']++;if(hostIsScrollView){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['20'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['46']++;instance._eventhandlers.push(host.after('scrollEnd',Y.rbind(instance.checkExpansion,instance)));}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['20'][1]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['47']++;instance._eventhandlers.push(Y.after('scroll',Y.rbind(instance.checkExpansion,instance)));}},_expansionFinished:function(transaction,load){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['9']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['48']++;var instance=this,host=instance.host,modelList=host.get('modelList'),lastItemOnTop=host.get('lastItemOnTop'),newItems,responseData;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['49']++;try{__cov_2ktqQvubYlWCNJ5i8KnN1g.s['50']++;responseData=Y.JSON.parse(load.responseText);__cov_2ktqQvubYlWCNJ5i8KnN1g.s['51']++;newItems=(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['21'][0]++,Lang.isArray(responseData))&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['21'][1]++,responseData.length>0);__cov_2ktqQvubYlWCNJ5i8KnN1g.s['52']++;if(!newItems){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['22'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['53']++;host._itmsAvail=false;}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['22'][1]++;}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['54']++;if(newItems){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['23'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['55']++;modelList.add(newItems);}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['23'][1]++;}}catch(e){__cov_2ktqQvubYlWCNJ5i8KnN1g.s['56']++;host._itmsAvail=false;}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['57']++;if((__cov_2ktqQvubYlWCNJ5i8KnN1g.b['25'][0]++,lastItemOnTop>0)&&(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['25'][1]++,!host._itmsAvail)){__cov_2ktqQvubYlWCNJ5i8KnN1g.b['24'][0]++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['58']++;host._addEmptyItem(null,lastItemOnTop);__cov_2ktqQvubYlWCNJ5i8KnN1g.s['59']++;host.syncUI();}else{__cov_2ktqQvubYlWCNJ5i8KnN1g.b['24'][1]++;}__cov_2ktqQvubYlWCNJ5i8KnN1g.s['60']++;instance._fireExpansion(true);},_fireExpansion:function(finished){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['10']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['61']++;var instance=this;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['62']++;instance.fire('modelExpansion:'+(finished?(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['26'][0]++,'end'):(__cov_2ktqQvubYlWCNJ5i8KnN1g.b['26'][1]++,'start')));},_clearEventhandlers:function(){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['11']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['63']++;YArray.each(this._eventhandlers,function(item){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['12']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['64']++;item.detach();});}},{NS:'itsainfiniteview',ATTRS:{batchSize:{value:100,validator:function(v){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['13']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['65']++;return Lang.isNumber(v);}},loadSize:{value:1000,validator:function(v){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['14']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['66']++;return Lang.isNumber(v);}},maxExpansions:{value:50,validator:function(v){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['15']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['67']++;return Lang.isNumber(v);}},expansionArea:{value:2000,validator:function(v){__cov_2ktqQvubYlWCNJ5i8KnN1g.f['16']++;__cov_2ktqQvubYlWCNJ5i8KnN1g.s['68']++;return Lang.isNumber(v);}}}});},'@VERSION@',{'requires':['base-build','plugin','node-base','json-parse']});
