YUI.add("gallery-itsaselectlist",function(a){var d=a.Lang,g=a.Node,f=a.UA.ie,j="itsa-hidden",b="Selectlist Shim",c='<iframe frameborder="0" tabindex="-1" class="itsa-shim" title="'+b+'" src="javascript:false;"></iframe>',h="<span class='itsa-selectlist-selectedmain' unselectable='on'></span>",k="<button class='yui3-button'></button>",e="<span class='itsa-button-icon itsa-icon-selectdown'></span>",i="<div class='itsa-selectlist-basediv "+j+"'><div class='itsa-selectlist-scrolldiv'><ul class='itsa-selectlist-ullist'></ul></div></div>";a.ITSASelectList=a.Base.create("itsaselectlist",a.Widget,[],{buttonNode:null,_selectedMainItemNode:null,_selectedItemClass:null,_itemsContainerNode:null,_itemValues:null,_syncWithinSetterItems:false,_eventhandlers:[],initializer:function(m){var l=this;l._selectedItemClass=l.get("hideSelected")?j:"itsa-selectlist-selected";},renderUI:function(){var m=this,o=m.get("boundingBox"),p=m.get("className"),q=m.get("iconClassName"),s=m.get("buttonWidth"),r=m.get("listWidth"),l=m.get("btnSize"),n;if((f>0)&&(f<7)){o.append(m.SHIM_TEMPLATE);}m.buttonNode=a.Node.create(k);o.append(m.buttonNode);m.buttonNode.setHTML(e);m._selectedMainItemNode=a.Node.create(h);m.buttonNode.append(m._selectedMainItemNode);m._itemsContainerNode=a.Node.create(i);m.get("listAlignLeft")?o.addClass("itsa-leftalign"):o.addClass("itsa-rightalign");if(p){o.addClass(p);}if(q){m._selectedMainItemNode.addClass("itsa-button-icon");m._selectedMainItemNode.addClass(q);}if(s){m.buttonNode.setStyle("minWidth",s+"px");}if(r){m._itemsContainerNode.setStyle("width",r+"px");}if(l===1){o.addClass("itsa-buttonsize-small");}else{if(l===2){o.addClass("itsa-buttonsize-medium");}}o.append(m._itemsContainerNode);},bindUI:function(){var l=this,m=l.get("boundingBox");l._eventhandlers.push(m.on("click",l._toggleListbox,l));l._eventhandlers.push(m.on("clickoutside",l.hideListbox,l));l._eventhandlers.push(l._itemsContainerNode.delegate("click",l._itemClick,"li",l));l._eventhandlers.push(l.on("disabledChange",l._disabledChange,l));},syncUI:function(){var t=this,p=t.get("items"),q=t.get("defaultItem"),m=t._itemsContainerNode.one(".itsa-selectlist-ullist"),n,u,s,o,l,r;m.setHTML("");if(p.length>0){for(n=0;n<p.length;n++){u=p[n];s=d.isString(u)?u:(u.text||"");o=(s===q);if(o){l=true;}r=a.Node.create("<li"+((o)?' class="'+t._selectedItemClass+'"':"")+">"+s+"</li>");if(u.returnValue){r.setData("returnValue",u.returnValue);}m.append(r);}t._selectedMainItemNode.setHTML((t.get("selectionOnButton")&&l)?q:t.get("defaultButtonText"));}t._syncWithinSetterItems=true;},_itemClick:function(l){this._selectItem(l.currentTarget,true);},selectItem:function(n,p,m){var l=this,o=l._itemsContainerNode.all("li");if(!l.get("disabled")){if((n>=0)&&(n<o.size())){l._selectItem(o.item(n));}else{if(p){o.removeClass(l._selectedItemClass);if(l.get("selectionOnButton")){l._selectedMainItemNode.setHTML(m||l.get("defaultButtonText"));}}}}},selectItemByValue:function(m,p,o){var l=this,n=a.Array.indexOf(l._itemValues,m.toString().toLowerCase());l.selectItem(n,p,o?l.get("defaultButtonText"):m);},_selectItem:function(n,p){var l=this,m=l._itemsContainerNode.one("li."+l._selectedItemClass),o;if(!l.get("disabled")&&n&&(n!==m)){if(m){m.removeClass(l._selectedItemClass);}n.addClass(l._selectedItemClass);o=n.getHTML();if(l.get("selectionOnButton")){l._selectedMainItemNode.setHTML(o);}l.fire("valueChange",{element:n,value:n.getData("returnValue")||o,index:l._indexOf(n)});if(p){l.fire("selectChange",{element:n,value:n.getData("returnValue")||o,index:l._indexOf(n)});}}},hideListbox:function(){var l=this;if(!l.get("disabled")){l.fire("hide");l._itemsContainerNode.toggleClass(j,true);}},showListbox:function(){var l=this;if(!l.get("disabled")){l.fire("show");l._itemsContainerNode.toggleClass(j,false);}},_toggleListbox:function(){var l=this;if(l._itemsContainerNode.hasClass(j)){l.showListbox();}else{l.hideListbox();}},currentSelected:function(){return this._itemsContainerNode.one("li."+this._selectedItemClass);},currentIndex:function(){return this._indexOf(this.currentSelected());},_indexOf:function(m){var l=this._itemsContainerNode.one(".itsa-selectlist-ullist").all("li");return l.indexOf(m);},_disabledChange:function(m){var l=this;l.buttonNode.toggleClass("yui3-button-disabled",m.newVal);l.hideListbox();},_clearMemory:function(){var l=this;a.Array.each(l._eventhandlers,function(n,m,o){n.detach();});},destructor:function(){this._clearMemory();}},{ATTRS:{btnSize:{value:3,validator:function(l){return(d.isNumber(l)&&(l>0)&&(l<4));}},defaultButtonText:{value:"choose...",validator:function(l){return a.Lang.isString(l);}},buttonWidth:{value:null,validator:function(l){return(a.Lang.isNumber(l)&&(l>=0));}},listWidth:{value:null,validator:function(l){return(a.Lang.isNumber(l)&&(l>=0));}},listAlignLeft:{value:true,validator:function(l){return a.Lang.isBoolean(l);}},className:{value:null,validator:function(l){return a.Lang.isString(l);}},iconClassName:{value:null,validator:function(l){return a.Lang.isString(l);}},items:{value:[],validator:function(l){return a.Lang.isArray(l);},setter:function(o){var l=this,n,m;l._itemValues=[];for(m=0;m<o.length;m++){n=o[m];l._itemValues.push(n.returnValue?n.returnValue.toString().toLowerCase():n.toString().toLowerCase());}if(this._syncWithinSetterItems){this.syncUI();}return o;}},defaultItem:{value:null,validator:function(l){return a.Lang.isString(l);}},selectionOnButton:{value:true,validator:function(l){return a.Lang.isBoolean(l);}},hideSelected:{value:false,validator:function(l){return a.Lang.isBoolean(l);},setter:function(m){var l=this;l._selectedItemClass=m?j:"itsa-selectlist-selected";return m;}}},HTML_PARSER:{defaultItem:function(n){var l=n.all("option"),m=null;l.each(function(q,o,p){if(!m&&(q.getAttribute("selected")==="selected")){m=q.getHTML();}});return m;},items:function(n){var l=n.all("option"),m=[];l.each(function(q,o,p){m.push({text:q.getHTML(),returnValue:q.getAttribute("value")||q.getHTML()});});return m;}}});},"@VERSION@",{requires:["base-build","widget","node-base","cssbutton","event-base","node-event-delegate","event-outside"],skinnable:true});
