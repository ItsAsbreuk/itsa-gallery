YUI.add("gallery-itsalogin",function(e,t){"use strict";var n=e.ITSAMessageControllerClass,r,i=e.Lang,s=e.Intl,o="boolean",u="info",a="_",f="ogin",l="l"+f,c="getL"+f,h="application",p="itsaicon-dialog-"+u,d="username",v="password",m="forgot",g="stayloggedin",y="gallery-itsalogin";n.prototype.translate=function(e){return this._intl[e]||e},n.translatePromise=function(t){return e.usePromise("intl").then(function(){var e=s.get(y);return e[t]||t},function(){return t})},n.prototype.translatePromise=n.translatePromise,n.prototype[a+c]=function(t,n,r,i){var s=this,a=s._retrieveLoginParams(t,n,r,i),f,y,b,w,E,S,x,T,N;return t=a.title,n=a.message,r=a.config,E=a.syncPromise,T="btn_submit",S=typeof r.imageButtons===o&&r.imageButtons,N=typeof r.forgotButton===o&&r.forgotButton,x=(N?"{btn_forgot}":"")+"{btn_submit}",S&&(x=x.replace(/\{btn_/g,"{imgbtn_"),T=T.replace(/btn_/g,"imgbtn_")),y=r.formconfigUsername||{},y.label||y.placeholder||(y.label=s._intl[d]),y.fullselect=!0,y.primarybtnonenter=!1,y.classname="itsa-login"+(y.classname?" "+y.classname:""),y.required=!0,b=r.formconfigPassword||{},b.label||b.placeholder||(b.label=s._intl[v]),b.fullselect=!0,b.primarybtnonenter=!0,b.classname="itsa-login"+(b.classname?" "+b.classname:""),b.required=!0,w=r.formconfigRemember||{},y.label&&!b.label&&(b.label=" "),b.label&&!y.label&&(y.label=" "),w.label||(w.label=s._intl[g]),w.switchlabel=!0,s.readyPromise().then(function(){f=e.Base.create("itsamessageinput",e.ITSAMessage,[],null,{ATTRS:{username:{value:y.value||"",formtype:"text",formconfig:y,validator:r.validatorUsername,validationerror:r.validationerrorUsername},password:{value:b.value||"",formtype:v,formconfig:b,validator:r.validatorPassword,validationerror:r.validationerrorPassword},remember:{value:w.value||!1,formtype:e.ITSACheckbox,formconfig:w}}}),n='<span id="itsa-messagewrapper">'+n+"</span>"+'<fieldset class="'+"itsa-login"+'">'+'<div class="pure-control-group">{'+d+"}</div>"+'<div class="pure-control-group">{'+v+"}</div>"+'<div class="itsa-login-checkbox">{remember}</div>'+"</fieldset>";var i=new f;return i.syncPromise=E,i.icon=r.icon||p,i.target="itsadialog",i.title=t,i.message=n,i.footer=x,i.imageButtons=S,i.closeButton=!0,i.primaryButton=r.primaryButton||T,i.target=r.target,i.level=r.level||u||r.type,i.source=r.source||h,i.messageType=c,N&&(i.customBtns=[{buttonId:"btn_forgot",labelHTML:s._intl[m],config:{value:"forgot"}},{buttonId:"imgbtn_forgot",labelHTML:'<i class="itsaicon-dialog-question"></i>'+s._intl[m],config:{value:"forgot",classname:"itsabutton-iconleft"}}]),i.buttonLabels=[{buttonType:"btn_submit",labelHTML:s._intl[l]},{buttonType:"imgbtn_submit",labelHTML:'<i class="itsaicon-dialog-login"></i>'+s._intl[l]}],s.queueMessage(i)})},n.prototype._retrieveLoginParams=function(t,n,r,s){var o=typeof n=="string",u,a;return o||(s=r,r=n,n=t,t=null),u=typeof n=="string",u||(s=r,r=n,n="",t=null),a=i.isObject(r),a||(s=r,r={},n="",t=null),typeof s=="function"||(s=function(){return new e.Promise(function(e,t){t(new Error("no syncPromise defined"))})}),{title:t,message:n,config:r,syncPromise:s}},r=e.ITSAMessageController,r._intl=s.get(y),e[l]=e.bind(r[a+c],r)},"@VERSION@",{requires:["yui-base","intl","gallery-itsamessagecontroller","gallery-itsacheckbox","gallery-itsadialog","gallery-itsamessage","gallery-itsaviewmodelpanel","gallerycss-itsa-base","gallerycss-itsa-animatespin","gallerycss-itsa-dialog"],lang:["ar","bg","bs","cs","da","de","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","nb","nl","pl","pt","ru","sk","sr","sv","uk","zh"],skinnable:!0});
