YUI.add("gallery-itsalogin",function(e,t){"use strict";var n=e.ITSAMessageControllerClass,r,i=e.Lang,s=e.Intl,o="boolean",u="info",a="_",f="ogin",l="l"+f,c="getL"+f,h="application",p="itsaicon-dialog-",d=p+u,v=p+"question",m="username",g="password",y="forgot",b="stayloggedin",w="gallery-itsalogin";n.prototype.translate=function(e){return this._intl[e]||e},n.translatePromise=function(t){return e.usePromise("intl").then(function(){var e=s.get(w);return e[t]||t},function(){return t})},n.prototype.translatePromise=n.translatePromise,n.prototype[a+c]=function(t,n,r,i){var s=this,a=s._intl,f=s._retrieveLoginParams(t,n,r,i),p,w,E,S,x,T,N,C,k,L,A,O,M,_;return t=f.title,n=f.message,r=f.config,T=f.syncPromise,L="btn_submit",C=typeof r.imageButtons===o&&r.imageButtons,N=r.regain,A=typeof r.forgotButton===o&&r.forgotButton||N,k=(A?"{btn_forgot}":"")+"{btn_submit}",C&&(k=k.replace(/\{btn_/g,"{imgbtn_"),L=L.replace(/btn_/g,"imgbtn_")),E=r.formconfigUsername||{},E.label||E.placeholder||(E.label=a[m]),E.fullselect=!0,E.primarybtnonenter=!1,E.classname="itsa-login"+(E.classname?" "+E.classname:""),E.required=!0,S=r.formconfigPassword||{},S.label||S.placeholder||(S.label=a[g]),S.fullselect=!0,S.primarybtnonenter=!0,S.classname="itsa-login"+(S.classname?" "+S.classname:""),S.required=!0,x=r.formconfigRemember||{},E.label&&!S.label&&(S.label=" "),S.label&&!E.label&&(E.label=" "),x.label||(x.label=a[b]),x.switchlabel=!0,s.readyPromise().then(function(){var i,o;return p=e.Base.create("itsamessageinput",e.ITSAMessage,[],null,{ATTRS:{username:{value:E.value||"",formtype:"text",formconfig:E,validator:r.validatorUsername,validationerror:r.validationerrorUsername},password:{value:S.value||"",formtype:g,formconfig:S,validator:r.validatorPassword,validationerror:r.validationerrorPassword},remember:{value:x.value||!1,formtype:e.ITSACheckbox,formconfig:x}}}),n='<span id="itsa-messagewrapper">'+n+"</span>"+'<fieldset class="'+"itsa-login"+'">'+'<div class="pure-control-group">{'+m+"}</div>"+'<div class="pure-control-group">{'+g+"}</div>"+'<div class="itsa-login-checkbox">{remember}</div>'+"</fieldset>",i=new p,i.syncPromise=T,i.icon=r.icon||d,i.target="itsadialog",i.title=t,i.message=n,i.footer=k,i.imageButtons=C,i.closeButton=!0,i.primaryButton=r.primaryButton||L,i.timeoutReject=r.timeoutReject,i.level=r.level||u,i.source=r.source||h,i.messageType=c,i.buttonLabels=[{buttonType:"btn_submit",labelHTML:a[l]},{buttonType:"imgbtn_submit",labelHTML:'<i class="itsaicon-dialog-login"></i>'+a[l]}],A&&(O=r.formconfigForgotEmail||{},i.customBtns=[{buttonId:"btn_forgot",labelHTML:a[y],config:{value:"forgot",data:'data-itsalogin="forgotbutton"'}},{buttonId:"imgbtn_forgot",labelHTML:'<i class="itsaicon-dialog-question"></i>'+a[y],config:{value:"forgot",data:'data-itsalogin="forgotbutton"',classname:"itsabutton-iconleft"}}],M=N===m+"or"+g,_=N===g,M&&(w=e.Base.create("itsamessageforgot",e.ITSAMessage,[],null,{ATTRS:{emailaddress:{formtype:"email",formconfig:e.merge(O,{required:!0})},username:{formtype:"text",formconfig:e.merge(E,{required:!0}),validator:r.validatorUsername,validationerror:r.validationerrorUsername}}}),n="<form>"+(r.forgotMessage||a[y+"what"])+'<div class="itsa-dialog-forgotbutton itsadialog-firstbutton">{btn_'+y+m+"}</div>"+'<div class="itsa-dialog-forgotbutton">{btn_'+y+g+"}</div>"+"</form>",o=new w,o.icon=r.iconquestion||v,o.title=r.titleForgotUsernameOrPassword||a[y+m+"or"+g],o.message=n,o.closeButton=!0,o.customBtns=[{buttonId:"btn_"+y+m,labelHTML:a[y+m],config:{value:y+m}},{buttonId:"btn_"+y+g,labelHTML:a[y+g],config:{value:y+g}}]),i.forgotMessage=o),s.queueMessage(i)})},n.prototype._retrieveLoginParams=function(t,n,r,s){var o=typeof n=="string",u,a;return o||(s=r,r=n,n=t,t=null),u=typeof n=="string",u||(s=r,r=n,n="",t=null),a=i.isObject(r),a||(s=r,r={},n="",t=null),typeof s=="function"||(s=function(){return new e.Promise(function(e,t){t(new Error("no syncPromise defined"))})}),{title:t,message:n,config:r,syncPromise:s}},r=e.ITSAMessageController,r._intl=s.get(w),e[l]=e.bind(r[a+c],r)},"@VERSION@",{requires:["yui-base","intl","gallery-itsamessagecontroller","gallery-itsacheckbox","gallery-itsadialog","gallery-itsamessage","gallery-itsaviewmodelpanel","gallerycss-itsa-base","gallerycss-itsa-animatespin","gallerycss-itsa-dialog"],lang:["ar","bg","bs","cs","da","de","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","nb","nl","pl","pt","ru","sk","sr","sv","uk","zh"],skinnable:!0});
