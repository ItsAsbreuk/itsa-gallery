YUI.add("gallery-itsastorage",function(e,t){"use strict";function r(){r.superclass.constructor.apply(this,arguments)}var n=e.StorageLite;r.NAME="itsastorage",e.ITSAStorageClass=e.extend(r,e.Base),r.prototype.initializer=function(){var t=this;t._ready=new e.Promise(function(t,n){e.StorageLite.on("storage-lite:ready",function(){var r=e.StorageLite.clear.toString(),i=r.replace(/\s/g,"")==="function(){}";i?n("noop"):t()})})},r.prototype.clear=function(){var e=this;return e._ready.then(function(){n.clear()})},r.prototype.getItem=function(e){var t=this;return t._ready.then(function(){var t=n.getItem(e,!0),r;t&&t.expire&&(r=(new Date).getTime(),t.expire<r&&(n.removeItem(e),t=null));if(!t)throw new Error("item not found");return t.value})},r.prototype.length=function(){var e=this;return e._ready.then(function(){return n.length()})},r.prototype.removeItem=function(e){var t=this;return t._ready.then(function(){n.removeItem(e)})},r.prototype.setItem=function(e,t,r){var i=this;return i._ready.then(function(){var i={value:t};r&&(i.expire=r.getTime()),n.setItem(e,i,!0)})},e.Global.ITSAStorage||(e.Global.ITSAStorage=new r),e.ITSAStorage=e.Global.ITSAStorage},"@VERSION@",{requires:["yui-base","base-base","promise","gallery-storage-lite"]});
