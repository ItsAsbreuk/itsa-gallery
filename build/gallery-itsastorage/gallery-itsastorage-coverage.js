if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-itsastorage/gallery-itsastorage.js']) {
   __coverage__['build/gallery-itsastorage/gallery-itsastorage.js'] = {"path":"build/gallery-itsastorage/gallery-itsastorage.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":50}}},"2":{"name":"ITSAStorageClass","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":28}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":41},"end":{"line":44,"column":52}}},"4":{"name":"(anonymous_4)","line":46,"loc":{"start":{"line":46,"column":36},"end":{"line":46,"column":63}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":47},"end":{"line":47,"column":58}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":35},"end":{"line":64,"column":47}}},"7":{"name":"(anonymous_7)","line":67,"loc":{"start":{"line":67,"column":8},"end":{"line":67,"column":19}}},"8":{"name":"(anonymous_8)","line":83,"loc":{"start":{"line":83,"column":37},"end":{"line":83,"column":52}}},"9":{"name":"(anonymous_9)","line":86,"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":19}}},"10":{"name":"(anonymous_10)","line":112,"loc":{"start":{"line":112,"column":36},"end":{"line":112,"column":48}}},"11":{"name":"(anonymous_11)","line":115,"loc":{"start":{"line":115,"column":8},"end":{"line":115,"column":19}}},"12":{"name":"(anonymous_12)","line":127,"loc":{"start":{"line":127,"column":40},"end":{"line":127,"column":55}}},"13":{"name":"(anonymous_13)","line":130,"loc":{"start":{"line":130,"column":8},"end":{"line":130,"column":19}}},"14":{"name":"(anonymous_14)","line":148,"loc":{"start":{"line":148,"column":37},"end":{"line":148,"column":67}}},"15":{"name":"(anonymous_15)","line":151,"loc":{"start":{"line":151,"column":8},"end":{"line":151,"column":19}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":171,"column":92}},"2":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}},"3":{"start":{"line":31,"column":0},"end":{"line":33,"column":1}},"4":{"start":{"line":32,"column":4},"end":{"line":32,"column":67}},"5":{"start":{"line":35,"column":0},"end":{"line":35,"column":38}},"6":{"start":{"line":37,"column":0},"end":{"line":37,"column":56}},"7":{"start":{"line":44,"column":0},"end":{"line":55,"column":2}},"8":{"start":{"line":45,"column":4},"end":{"line":45,"column":24}},"9":{"start":{"line":46,"column":4},"end":{"line":54,"column":7}},"10":{"start":{"line":47,"column":8},"end":{"line":53,"column":11}},"11":{"start":{"line":48,"column":12},"end":{"line":49,"column":81}},"12":{"start":{"line":51,"column":12},"end":{"line":51,"column":46}},"13":{"start":{"line":64,"column":0},"end":{"line":73,"column":2}},"14":{"start":{"line":65,"column":4},"end":{"line":65,"column":24}},"15":{"start":{"line":66,"column":4},"end":{"line":72,"column":6}},"16":{"start":{"line":70,"column":12},"end":{"line":70,"column":33}},"17":{"start":{"line":83,"column":0},"end":{"line":104,"column":2}},"18":{"start":{"line":84,"column":4},"end":{"line":84,"column":24}},"19":{"start":{"line":85,"column":4},"end":{"line":103,"column":6}},"20":{"start":{"line":87,"column":12},"end":{"line":88,"column":20}},"21":{"start":{"line":89,"column":12},"end":{"line":95,"column":13}},"22":{"start":{"line":90,"column":16},"end":{"line":90,"column":45}},"23":{"start":{"line":91,"column":16},"end":{"line":94,"column":17}},"24":{"start":{"line":92,"column":20},"end":{"line":92,"column":49}},"25":{"start":{"line":93,"column":20},"end":{"line":93,"column":32}},"26":{"start":{"line":96,"column":12},"end":{"line":101,"column":13}},"27":{"start":{"line":97,"column":16},"end":{"line":97,"column":50}},"28":{"start":{"line":100,"column":16},"end":{"line":100,"column":34}},"29":{"start":{"line":112,"column":0},"end":{"line":119,"column":2}},"30":{"start":{"line":113,"column":4},"end":{"line":113,"column":24}},"31":{"start":{"line":114,"column":4},"end":{"line":118,"column":6}},"32":{"start":{"line":116,"column":12},"end":{"line":116,"column":41}},"33":{"start":{"line":127,"column":0},"end":{"line":136,"column":2}},"34":{"start":{"line":128,"column":4},"end":{"line":128,"column":24}},"35":{"start":{"line":129,"column":4},"end":{"line":135,"column":6}},"36":{"start":{"line":133,"column":12},"end":{"line":133,"column":41}},"37":{"start":{"line":148,"column":0},"end":{"line":163,"column":2}},"38":{"start":{"line":149,"column":4},"end":{"line":149,"column":24}},"39":{"start":{"line":150,"column":4},"end":{"line":162,"column":6}},"40":{"start":{"line":154,"column":12},"end":{"line":156,"column":14}},"41":{"start":{"line":158,"column":12},"end":{"line":158,"column":59}},"42":{"start":{"line":160,"column":12},"end":{"line":160,"column":56}},"43":{"start":{"line":167,"column":0},"end":{"line":167,"column":70}},"44":{"start":{"line":169,"column":0},"end":{"line":169,"column":37}}},"branchMap":{"1":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":33}},{"start":{"line":51,"column":36},"end":{"line":51,"column":45}}]},"2":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":89,"column":12}},{"start":{"line":89,"column":12},"end":{"line":89,"column":12}}]},"3":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":16},"end":{"line":89,"column":20}},{"start":{"line":89,"column":24},"end":{"line":89,"column":35}}]},"4":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":16}},{"start":{"line":91,"column":16},"end":{"line":91,"column":16}}]},"5":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":12},"end":{"line":96,"column":12}},{"start":{"line":96,"column":12},"end":{"line":96,"column":12}}]},"6":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":12},"end":{"line":158,"column":18}},{"start":{"line":158,"column":23},"end":{"line":158,"column":57}}]},"7":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":0},"end":{"line":167,"column":20}},{"start":{"line":167,"column":25},"end":{"line":167,"column":68}}]}},"code":["(function () { YUI.add('gallery-itsastorage', function (Y, NAME) {","","'use strict';","","/**"," * The ItsaStorage module."," *"," * @module itsa-storage"," */","","/**"," *"," * @class ITSAStorage"," * @extends Base"," * @constructor"," *"," * <i>Copyright (c) 2012 Marco Asbreuk - http://theinternetwizard.net</i>"," * YUI BSD License - http://developer.yahoo.com/yui/license.html"," *","*/","","/**"," * Y.ItsaStorage can be used straight ahead with all its functions"," * @instance Y.ItsaStorage"," * @static"," *","*/","","var YStorageLite = Y.StorageLite;","","function ITSAStorageClass() {","    ITSAStorageClass.superclass.constructor.apply(this, arguments);","}","","ITSAStorageClass.NAME = 'itsastorage';","","Y.ITSAStorageClass = Y.extend(ITSAStorageClass, Y.Base);","","/**"," * @method initializer"," * @protected"," * @since 0.1","*/","ITSAStorageClass.prototype.initializer = function() {","    var instance = this;","    instance._ready = new Y.Promise(function (resolve, reject) {","        Y.StorageLite.on('storage-lite:ready', function() {","            var localstorageClearFn = Y.StorageLite.clear.toString(),","                noop = (localstorageClearFn.replace(/\\s/g, '')==='function(){}');","/*jshint expr:true */","            noop ? reject('noop') : resolve();","/*jshint expr:false */","        });","    });","};",""," // -- Public Methods -------------------------------------------------------","","/**"," * Removes all items from the data store."," *"," * @method clear"," */","ITSAStorageClass.prototype.clear = function () {","    var instance = this;","    return instance._ready.then(","        function() {","            // can throw an error (not likely, because the db will decrease)","            // thrown errors will make the returned promise reject","            YStorageLite.clear();","        }","    );","};","","/**"," * Returns the item with the specified key, or <code>null</code> if the item"," * was not found."," *"," * @method getItem"," * @param {String} key"," * @return {Object|null} item or <code>null</code> if not found"," */","ITSAStorageClass.prototype.getItem = function (key) {","    var instance = this;","    return instance._ready.then(","        function() {","            var item = YStorageLite.getItem(key, true),","                now;","            if (item && item.expire) {","                now = (new Date()).getTime();","                if (item.expire<now) {","                    YStorageLite.removeItem(key); // synchronous remove","                    item = null;","                }","            }","            if (!item) {","                throw new Error('item not found');","            }","            else {","                return item.value;","            }","        }","    );","};","","/**"," * Returns the number of items in the data store."," *"," * @method length"," * @return {Number} number of items in the data store"," */","ITSAStorageClass.prototype.length = function () {","    var instance = this;","    return instance._ready.then(","        function() {","            return YStorageLite.length();","        }","    );","};","","/**"," * Removes the item with the specified key."," *"," * @method removeItem"," * @param {String} key"," */","ITSAStorageClass.prototype.removeItem = function (key) {","    var instance = this;","    return instance._ready.then(","        function() {","            // can throw an error (not likely, because the db will decrease)","            // thrown errors will make the returned promise reject","            YStorageLite.removeItem(key);","        }","    );","}; // can throw an error","","/**"," * Stores an item under the specified key. If the key already exists in the"," * data store, it will be replaced."," *"," * @method setItem"," * @param {String} key"," * @param {Object} value"," * @param {bool} json (optional) <code>true</code> if the item should be"," *     serialized to a JSON string before being stored"," */","ITSAStorageClass.prototype.setItem = function (key, value, expire) {","    var instance = this;","    return instance._ready.then(","        function() {","            // can throw an error (not likely, because the db will decrease)","            // thrown errors will make the returned promise reject","            var storevalue = {","                value: value","            };","/*jshint expr:true */","            expire && (storevalue.expire=expire.getTime());","/*jshint expr:false */","            YStorageLite.setItem(key, storevalue, true);","        }","    );","}; // can throw an error","","// define 1 global messagecontroller","/*jshint expr:true */","Y.Global.ITSAStorage || (Y.Global.ITSAStorage=new ITSAStorageClass());","/*jshint expr:false */","Y.ITSAStorage = Y.Global.ITSAStorage;","","}, '@VERSION@', {\"requires\": [\"yui-base\", \"base-base\", \"promise\", \"gallery-storage-lite\"]});","","}());"]};
}
var __cov_e93Z5GBKlN$0xYbIBFze9A = __coverage__['build/gallery-itsastorage/gallery-itsastorage.js'];
__cov_e93Z5GBKlN$0xYbIBFze9A.s['1']++;YUI.add('gallery-itsastorage',function(Y,NAME){'use strict';__cov_e93Z5GBKlN$0xYbIBFze9A.f['1']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['2']++;var YStorageLite=Y.StorageLite;__cov_e93Z5GBKlN$0xYbIBFze9A.s['3']++;function ITSAStorageClass(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['2']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['4']++;ITSAStorageClass.superclass.constructor.apply(this,arguments);}__cov_e93Z5GBKlN$0xYbIBFze9A.s['5']++;ITSAStorageClass.NAME='itsastorage';__cov_e93Z5GBKlN$0xYbIBFze9A.s['6']++;Y.ITSAStorageClass=Y.extend(ITSAStorageClass,Y.Base);__cov_e93Z5GBKlN$0xYbIBFze9A.s['7']++;ITSAStorageClass.prototype.initializer=function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['3']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['8']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['9']++;instance._ready=new Y.Promise(function(resolve,reject){__cov_e93Z5GBKlN$0xYbIBFze9A.f['4']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['10']++;Y.StorageLite.on('storage-lite:ready',function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['5']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['11']++;var localstorageClearFn=Y.StorageLite.clear.toString(),noop=localstorageClearFn.replace(/\s/g,'')==='function(){}';__cov_e93Z5GBKlN$0xYbIBFze9A.s['12']++;noop?(__cov_e93Z5GBKlN$0xYbIBFze9A.b['1'][0]++,reject('noop')):(__cov_e93Z5GBKlN$0xYbIBFze9A.b['1'][1]++,resolve());});});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['13']++;ITSAStorageClass.prototype.clear=function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['6']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['14']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['15']++;return instance._ready.then(function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['7']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['16']++;YStorageLite.clear();});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['17']++;ITSAStorageClass.prototype.getItem=function(key){__cov_e93Z5GBKlN$0xYbIBFze9A.f['8']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['18']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['19']++;return instance._ready.then(function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['9']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['20']++;var item=YStorageLite.getItem(key,true),now;__cov_e93Z5GBKlN$0xYbIBFze9A.s['21']++;if((__cov_e93Z5GBKlN$0xYbIBFze9A.b['3'][0]++,item)&&(__cov_e93Z5GBKlN$0xYbIBFze9A.b['3'][1]++,item.expire)){__cov_e93Z5GBKlN$0xYbIBFze9A.b['2'][0]++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['22']++;now=new Date().getTime();__cov_e93Z5GBKlN$0xYbIBFze9A.s['23']++;if(item.expire<now){__cov_e93Z5GBKlN$0xYbIBFze9A.b['4'][0]++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['24']++;YStorageLite.removeItem(key);__cov_e93Z5GBKlN$0xYbIBFze9A.s['25']++;item=null;}else{__cov_e93Z5GBKlN$0xYbIBFze9A.b['4'][1]++;}}else{__cov_e93Z5GBKlN$0xYbIBFze9A.b['2'][1]++;}__cov_e93Z5GBKlN$0xYbIBFze9A.s['26']++;if(!item){__cov_e93Z5GBKlN$0xYbIBFze9A.b['5'][0]++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['27']++;throw new Error('item not found');}else{__cov_e93Z5GBKlN$0xYbIBFze9A.b['5'][1]++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['28']++;return item.value;}});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['29']++;ITSAStorageClass.prototype.length=function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['10']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['30']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['31']++;return instance._ready.then(function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['11']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['32']++;return YStorageLite.length();});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['33']++;ITSAStorageClass.prototype.removeItem=function(key){__cov_e93Z5GBKlN$0xYbIBFze9A.f['12']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['34']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['35']++;return instance._ready.then(function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['13']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['36']++;YStorageLite.removeItem(key);});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['37']++;ITSAStorageClass.prototype.setItem=function(key,value,expire){__cov_e93Z5GBKlN$0xYbIBFze9A.f['14']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['38']++;var instance=this;__cov_e93Z5GBKlN$0xYbIBFze9A.s['39']++;return instance._ready.then(function(){__cov_e93Z5GBKlN$0xYbIBFze9A.f['15']++;__cov_e93Z5GBKlN$0xYbIBFze9A.s['40']++;var storevalue={value:value};__cov_e93Z5GBKlN$0xYbIBFze9A.s['41']++;(__cov_e93Z5GBKlN$0xYbIBFze9A.b['6'][0]++,expire)&&(__cov_e93Z5GBKlN$0xYbIBFze9A.b['6'][1]++,storevalue.expire=expire.getTime());__cov_e93Z5GBKlN$0xYbIBFze9A.s['42']++;YStorageLite.setItem(key,storevalue,true);});};__cov_e93Z5GBKlN$0xYbIBFze9A.s['43']++;(__cov_e93Z5GBKlN$0xYbIBFze9A.b['7'][0]++,Y.Global.ITSAStorage)||(__cov_e93Z5GBKlN$0xYbIBFze9A.b['7'][1]++,Y.Global.ITSAStorage=new ITSAStorageClass());__cov_e93Z5GBKlN$0xYbIBFze9A.s['44']++;Y.ITSAStorage=Y.Global.ITSAStorage;},'@VERSION@',{'requires':['yui-base','base-base','promise','gallery-storage-lite']});
