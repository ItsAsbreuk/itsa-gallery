YUI.add("gallery-itsapanel",function(e,t){"use strict";var n,r=e.Array,i=e.Lang,s="gallerycss-itsa-",o="destroyed",u="string",a="boolean",f="visible",l="boundingBox",c="contentBox",h="paddingTop",p="paddingBottom",d="button",v="itsa-",m="focused",g=v+m,y="hidden",b="View",w="panel",E="Change",S="floated",x="header"+b,T="body"+b,N="footer"+b,C="rendered",k="number",L="offsetHeight",A="offsetWidth",O="borderTopWidth",M="borderBottomWidth",_="borderLeftWidth",D="borderRightWidth",P="modal",H="px",B="title",j="footer",F="Right",I="centered",q="drag",R=q+"able",U="resize",z="resizable",W="dd",X="-plugin",V="styled",$=v+w,J=v+V+w,K=v+y+w,Q=v+y+"section",G=v+"inline"+w,Y="className",Z=v+"panelheader",et=v+"panelbody",tt=v+"panelfooter",nt=v+"panelinnerheader",rt=v+"panelinnerbody",it=v+"panelinnerfooter",st=v+w+"closebtn",ot='<div class="'+Z+'"><div class="'+nt+'"></div></div>',ut='<div class="'+et+'"><div class="'+rt+'"></div></div>',at='<div class="'+tt+'"><div class="'+it+'"></div></div>',ft="<"+d+' class="pure-'+d+" itsa"+d+"-onlyicon "+st+'" data-focusable="true"><i class="itsaicon-form-abort"></i></'+d+">",lt='<div>{panel_title}</div><div class="itsa-rightalign">{panel_title_right}</div>',ct="",ht='<div>{panel_footer}</div><div class="itsa-rightalign">{panel_footer_right}</div>',pt=function(e,t){return parseInt(e.getStyle(t),10)},dt="click",vt=dt+"outside",mt="value",gt=d+dt,yt=d+":hide";n=e.ITSAPanel=e.Base.create("itsapanel",e.Widget,[e.WidgetPosition,e.WidgetAutohide,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],null,{ATTRS:{bodyView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setBodyView"},className:{value:null,validator:function(e){return e===null||typeof e===u}},dragable:{value:!1,validator:function(e){return typeof e===a}},footer:{value:null,validator:function(e){return e===null||typeof e===u}},footerRight:{value:null,validator:function(e){return e===null||typeof e===u}},footerView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setFooterView"},floated:{value:!0,validator:function(e){return typeof e===a}},focusOnShow:{value:!0,validator:function(e){return typeof e===a}},headerView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setHeaderView"},height:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},getter:"_getHeight",setter:"_setHeight"},maxHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMaxHeight"},maxWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMaxWidth"},minHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMinHeight"},minWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMinWidth"},resizable:{value:!1,validator:function(e){return typeof e===a}},styled:{value:!0,validator:function(e){return typeof e===a}},visible:{value:!1,validator:function(e){return typeof e===a}},width:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},getter:"_getWidth",setter:"_setWidth"},title:{value:null,validator:function(e){return e===null||typeof e===u}},titleRight:{value:null,validator:function(e){return e===null||typeof e===u}}}}),n.prototype.initializer=function(){var t=this,n=t.get(l),r=t.get(Y);e.use(s+"base",s+"form"),t.publish(yt,{defaultFn:e.bind(t.hide,t),emitFacade:!0}),t._eventhandlers=[],n.addClass($),n.toggleClass(G,!t.get(S)),n.toggleClass(J,t.get(V)),n.toggleClass(g,t.get(m)),n.addClass(K),r&&n.addClass(r),t.renderPromise().then(function(){t._setDimensions(),t.get(f)&&n.removeClass(K)})},n.prototype.bindUI=function(){var t=this,n=t.get(l),r=t.get(c),i=t._eventhandlers,s=t.get(x),u=t.get(T),a=t.get(N);s instanceof e.View&&s.addTarget(t),u instanceof e.View&&u.addTarget(t),a instanceof e.View&&a.addTarget(t),t.get(R)&&t.get(S)&&e.use(W+X,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+Z)&&n.dd.addTarget(t)}),t.get(z)&&e.use(U+X,function(){t.get(o)||r.plug(e.Plugin.Resize,{handles:["r","b","br"]}).resize.addTarget(t)}),i.push(t.after(S+E,function(r){n.toggleClass(G,!r.newVal),t.get(R)&&(r.newVal&&!n.dd&&e.use(W+X,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+Z)&&n.dd.addTarget(t)}),!r.newVal&&n.dd&&n.dd.removeTarget(t)&&n.unplug(W))})),i.push(t.after(R+E,function(r){r.newVal&&t.get(S)&&!n.dd&&e.use(W+X,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+Z)&&n.dd.addTarget(t)}),!r.newVal&&n.dd&&n.dd.removeTarget(t)&&n.unplug(W)})),i.push(t.after(z+E,function(n){n.newVal&&!r[U]&&e.use(U+X,function(){t.get(o)||r.plug(e.Plugin.Resize,{handles:["r","b","br"]}).resize.addTarget(t)}),!n.newVal&&r[U]&&r[U].removeTarget(t)&&r[U].unplug(U)})),i.push(t.after([q+":"+q,q+":end"],function(){var t=e.ITSAFormElement,n=t&&t.tipsyValid,r=t&&t.tipsyInvalid;n&&n.get(f)&&n._alignTooltip(n._lastnode),r&&r.get(f)&&r._alignTooltip(r._lastnode)})),i.push(t.after([U+":end","height"+E,"width"+E,"minHeight"+E,"minWidth"+E],function(e){t.get(I)&&t.centered(),e.type===U+":end"&&(t._widthSet=!0)&&(t._heightSet=!0)})),i.push(t.after(f+E,function(e){var r=e.newVal;n.toggleClass(K,!r),r?(t.get(P)||t.get("focusOnShow"))&&t.focus():t.blur()})),i.push(t.after([x+E,T+E,N+E],function(n){n.prevVal instanceof e.View&&n.prevVal.removeTarget(t),n.newVal instanceof e.View&&n.newVal.addTarget(t)})),i.push(t.after(V+E,function(e){n.toggleClass(J,e.newVal)})),i.push(t.after(Y+E,function(e){e.prevVal&&n.removeClass(e.prevVal),e.newVal&&n.addClass(e.newVal)})),i.push(t.on(P+E,function(e){!t.get(S)&&e.preventDefault()})),i.push(t._header.delegate(dt,function(e){t.fire(yt,{buttonNode:e.target})},"."+st)),i.push(n.on(dt,function(e){var n=e.target,r={type:gt,target:t,value:n.get(mt),buttonNode:n};t.focus(),t.fire(gt,r)})),i.push(n.on(vt,function(){t.blur()})),i.push(t.after(m+E,function(e){n.toggleClass
(g,e.newVal)})),i.push(t.after("*:viewrendered",function(){t._adjustPaddingTop(),t._adjustPaddingBottom(),t._setDimensions()}))},n.prototype.renderUI=function(){var e=this,t=e.get(c);t.setHTML(ot+ut+at),e._header=t.one("."+nt),e._body=t.one("."+rt),e._footer=t.one("."+it),e._footercont=t.one("."+tt),e._renderHeader(),e._renderBody(),e._renderFooter()},n.prototype.destructor=function(){var t=this,n=t.get(l),r=t.get(c),i=t.get(x),s=t.get(T),o=t.get(N);i instanceof e.View&&i.removeTarget(t),s instanceof e.View&&s.removeTarget(t),o instanceof e.View&&o.removeTarget(t),n.hasPlugin(W)&&n.dd.removeTarget(t)&&n.unplug(W),r.hasPlugin[U]&&r[U].removeTarget(t)&&r.unplug(U),t._clearEventhandlers()},n.prototype._adjustPaddingBottom=function(){var e=this;e.get(c).setStyle(p,e._footer.get(L)+H)},n.prototype._adjustPaddingTop=function(){var e=this;e.get(c).setStyle(h,e._header.get(L)+H)},n.prototype._clearEventhandlers=function(){r.each(this._eventhandlers,function(e){e.detach()})},n.prototype._getHeight=function(){this.get(l).get(L)},n.prototype._getWidth=function(){this.get(l).get(A)},n.prototype._renderHeader=function(){var t=this,n=t.get(B),r=t.get(B+F),s=t.get(x);!s||typeof s===u?t._header.setHTML(i.sub(s||lt,{panel_title:n||"",panel_title_right:r||ft})):s instanceof e.View&&(s._set("container",t._header),s.render&&s.render()),t._adjustPaddingTop()},n.prototype._renderBody=function(){var t=this,n=t.get(T);!n||typeof n===u?t._body.setHTML(n||ct):n instanceof e.View&&(n._set("container",t._body),n.render&&n.render())},n.prototype._renderFooter=function(){var t=this,n=t.get(j),r=t.get(j+F),s=t.get(N),o=t._footer,a=!s&&!n&&!r;a||(!s||typeof s===u?o.setHTML(i.sub(s||ht,{panel_footer:n||"",panel_footer_right:r||""})):s instanceof e.View&&(s._set("container",t._footer),s.render&&s.render()),o.removeClass(Q)),t._footercont.toggleClass(Q,a),t._adjustPaddingBottom()},n.prototype._setBodyView=function(){var e=this;e.get(C)&&e._renderBody()},n.prototype._setDimensions=function(){var e=this,t=e.get(c);e._widthSet||t.setStyle("width",""),e._heightSet||t.setStyle("height",""),e._widthSet||t.setStyle("width",1+t.get(A)+H),e._heightSet||t.setStyle("height",1+t.get(L)+H)},n.prototype._setFooterView=function(){var e=this;e.get(C)&&e._renderFooter()},n.prototype._setHeaderView=function(){var e=this;e.get(C)&&e._renderHeader()},n.prototype._setHeight=function(e){var t=this,n=t.get(l);e&&(e-=pt(n,O)+pt(n,M)),t.get(c).setStyle("height",e?e+H:""),t._heightSet=typeof e===k},n.prototype._setMaxHeight=function(e){this.get(c).setStyle("maxHeight",e?e+H:"")},n.prototype._setMaxWidth=function(e){this.get(c).setStyle("maxWidth",e?e+H:"")},n.prototype._setMinHeight=function(e){this.get(c).setStyle("minHeight",e?e+H:"")},n.prototype._setMinWidth=function(e){this.get(c).setStyle("minWidth",e?e+H:"")},n.prototype._setWidth=function(e){var t=this,n=t.get(l);e&&(e-=pt(n,_)+pt(n,D)),t.get(c).setStyle("width",e?e+H:""),t._widthSet=typeof e===k}},"@VERSION@",{requires:["node-pluginhost","dd-ddm","base-build","widget-autohide","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","view","widget","gallery-itsawidgetrenderpromise"],skinnable:!0});
