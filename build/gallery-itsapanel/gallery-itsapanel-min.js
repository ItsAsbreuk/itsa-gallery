YUI.add("gallery-itsapanel",function(e,t){"use strict";var n,r=e.Array,i=e.Lang,s="string",o="boolean",u="visible",a="boundingBox",f="contentBox",l="paddingTop",c="paddingBottom",h="itsa-",p="hidden",d="View",v="panel",m="Change",g="floated",y="header"+d,b="body"+d,w="footer"+d,E="rendered",S="number",x="offsetHeight",T="offsetWidth",N="borderTopWidth",C="borderBottomWidth",k="borderLeftWidth",L="borderRightWidth",A="modal",O="px",M="centered",_="dragable",D="resize",P="resizable",H="dd",B="-plugin",j="styled",F=h+v,I=h+j+v,q=h+p+v,R=h+p+"section",U=h+"inline"+v,z=h+"panelheader",W=h+"panelbody",X=h+"panelfooter",V=h+"panelinnerheader",$=h+"panelinnerbody",J=h+"panelinnerfooter",K=h+v+"closebtn",Q='<div class="'+z+'"><div class="'+V+'"></div></div>',G='<div class="'+W+'"><div class="'+$+'"></div></div>',Y='<div class="'+X+'"><div class="'+J+'"></div></div>',Z='{panel_title}<button class="pure-button itsabutton-onlyicon '+K+'"><i class="itsaicon-form-abort"></i></button>',et="",tt="{panel_footer}",nt=function(e,t){return parseInt(e.getStyle(t),10)},rt="button",it="click",st="value",ot=rt+it;n=e.ITSAPanel=e.Base.create("ITSAPanel",e.Widget,[e.WidgetPosition,e.WidgetAutohide,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],null,{ATTRS:{bodyView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setBodyView"},dragable:{value:!1,validator:function(e){return typeof e===o}},footer:{value:null,validator:function(e){return e===null||typeof e===s}},footerView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setFooterView"},floated:{value:!0,validator:function(e){return typeof e===o}},headerView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setHeaderView"},height:{value:null,validator:function(e){return e===null||typeof e===S},getter:"_getHeight",setter:"_setHeight"},maxHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMaxHeight"},maxWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMaxWidth"},minHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMinHeight"},minWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMinWidth"},resizable:{value:!1,validator:function(e){return typeof e===o}},styled:{value:!0,validator:function(e){return typeof e===o}},visible:{value:!1,validator:function(e){return typeof e===o}},width:{value:null,validator:function(e){return e===null||typeof e===S},getter:"_getWidth",setter:"_setWidth"},title:{value:null,validator:function(e){return e===null||typeof e===s}}}}),n.prototype.initializer=function(){var t=this,n=t.get(f),r=t.get(a);e.use("gallerycss-itsa-base","gallerycss-itsa-form"),t._eventhandlers=[],r.addClass(F),r.toggleClass(U,!t.get(g)),r.toggleClass(I,t.get(j)),r.addClass(q),t.renderPromise().then(function(){n.setStyle("height",n.get(x)+O),n.setStyle("width",n.get(T)+O),t.get(u)&&r.removeClass(q)})},n.prototype.bindUI=function(){var t=this,n=t.get(a),r=t.get(f),i=t._eventhandlers,s=t.get(y),o=t.get(b),l=t.get(w);s instanceof e.View&&s.addTarget(t),o instanceof e.View&&o.addTarget(t),l instanceof e.View&&l.addTarget(t),t.get(_)&&t.get(g)&&e.use(H+B,function(){n.plug(e.Plugin.Drag),n.dd.addHandle("."+z)}),t.get(P)&&e.use(D+B,function(){r.plug(e.Plugin.Resize,{handles:["r","b","br"]}),r.resize.addTarget(t)}),i.push(t.after(g+m,function(r){n.toggleClass(U,!r.newVal),t.get(_)&&(r.newVal&&!n.dd&&e.use(H+B,function(){n.plug(e.Plugin.Drag),n.dd.addHandle("."+z)}),!r.newVal&&n.dd&&n.unplug(H))})),i.push(t.after(_+m,function(r){r.newVal&&t.get(g)&&!n.dd&&e.use(H+B,function(){n.plug(e.Plugin.Drag),n.dd.addHandle("."+z)}),!r.newVal&&n.dd&&n.unplug(H)})),i.push(t.after(P+m,function(n){n.newVal&&!r[D]&&e.use(D+B,function(){r.plug(e.Plugin.Resize,{handles:["r","b","br"]}),r.resize.addTarget(t)}),!n.newVal&&r[D]&&r[D].removeTarget(t)&&r.unplug(D)})),i.push(t.after([D+":end","height"+m,"width"+m,"minHeight"+m,"minWidth"+m],function(){t.get(M)&&t.centered()})),i.push(t.after(u+m,function(e){n.toggleClass(q,!e.newVal)})),i.push(t.after([y+m,b+m,w+m],function(n){n.prevVal instanceof e.View&&n.prevVal.removeTarget(t),n.newVal instanceof e.View&&n.newVal.addTarget(t)})),i.push(t.after(j+m,function(e){n.toggleClass(I,e.newVal)})),i.push(t.on(A+m,function(e){!t.get(g)&&e.preventDefault()})),i.push(t._header.delegate(it,e.bind(t.hide,t),"."+K)),i.push(r.on(it,function(e){var n=e.target,r={type:ot,target:t,value:n.get(st),buttonNode:n};t.fire(ot,r)})),i.push(t.after("*:viewrendered",function(){t._adjustPaddingTop(),t._adjustPaddingBottom()}))},n.prototype.renderUI=function(){var e=this,t=e.get(f);t.setHTML(Q+G+Y),e._header=t.one("."+V),e._body=t.one("."+$),e._footer=t.one("."+J),e._renderHeader(),e._renderBody(),e._renderFooter()},n.prototype.destructor=function(){var t=this,n=t.get(a),r=t.get(f),i=t.get(y),s=t.get(b),o=t.get(w);i instanceof e.View&&i.removeTarget(t),s instanceof e.View&&s.removeTarget(t),o instanceof e.View&&o.removeTarget(t),n.hasPlugin(H)&&n.unplug(H),r.hasPlugin[D]&&r[D].removeTarget(t)&&r.unplug(D),t._clearEventhandlers()},n.prototype._adjustPaddingBottom=function(){var e=this;e.get(f).setStyle(c,e._footer.get(x)+O)},n.prototype._adjustPaddingTop=function(){var e=this;e.get(f).setStyle(l,e._header.get(x)+O)},n.prototype._clearEventhandlers=function(){r.each(this._eventhandlers,function(e){e.detach()})},n.prototype._getHeight=function(){this.get(a).get(x)},n.prototype._getWidth=function(){this.get(a).get(T)},n.prototype._renderHeader=function(){var t=this,n=t.get("title"),r=t.get(y);!r||typeof r===s?t._header.setHTML(i.sub(r||Z,{panel_title:n||""})):r instanceof e.View&&(r.set("container",t._header),r.render&&r.render()),t._adjustPaddingTop()},n.prototype._renderBody=function(){var t=this,n=t.get(b);!n||typeof n===s?t._body.setHTML(n||
et):n instanceof e.View&&(n.set("container",t._body),n.render&&n.render())},n.prototype._renderFooter=function(){var t=this,n=t.get("footer"),r=t.get(w),o=t._footer,u=!r&&!n;u?o.addClass(R):(!r||typeof headerView===s?o.setHTML(i.sub(r||tt,{panel_footer:n||""})):r instanceof e.View&&(r.set("container",t._footer),r.render&&r.render()),o.removeClass(R)),t._adjustPaddingBottom()},n.prototype._setBodyView=function(){var e=this;e.get(E)&&e._renderBody()},n.prototype._setFooterView=function(){var e=this;e.get(E)&&e._renderFooter()},n.prototype._setHeaderView=function(){var e=this;e.get(E)&&e._renderHeader()},n.prototype._setHeight=function(e){var t=this,n=t.get(a);e&&(e-=nt(n,N)+nt(n,C)),t.get(f).setStyle("height",e?e+O:"")},n.prototype._setMaxHeight=function(e){this.get(f).setStyle("maxHeight",e?e+O:"")},n.prototype._setMaxWidth=function(e){this.get(f).setStyle("maxWidth",e?e+O:"")},n.prototype._setMinHeight=function(e){this.get(f).setStyle("minHeight",e?e+O:"")},n.prototype._setMinWidth=function(e){this.get(f).setStyle("minWidth",e?e+O:"")},n.prototype._setWidth=function(e){var t=this,n=t.get(a);e&&(e-=nt(n,k)+nt(n,L)),t.get(f).setStyle("width",e?e+O:"")}},"@VERSION@",{requires:["node-pluginhost","base-build","widget-autohide","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","view","widget","gallery-itsawidgetrenderpromise"],skinnable:!0});
