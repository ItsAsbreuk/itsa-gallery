YUI.add("gallery-itsapanel",function(e,t){"use strict";var n,r=e.Array,i=e.Lang,s="gallerycss-itsa-",o="destroyed",u="string",a="boolean",f="visible",l="boundingBox",c="contentBox",h="paddingTop",p="paddingBottom",d="button",v="itsa-",m="focused",g=v+m,y="hidden",b="View",w="panel",E="Change",S="floated",x="header"+b,T="body"+b,N="footer"+b,C="rendered",k="number",L="offsetHeight",A="offsetWidth",O="borderTopWidth",M="borderBottomWidth",_="borderLeftWidth",D="borderRightWidth",P="modal",H="px",B="centered",j="drag",F=j+"able",I="resize",q="resizable",R="dd",U="-plugin",z="styled",W=v+w,X=v+z+w,V=v+y+w,$=v+y+"section",J=v+"inline"+w,K=v+"panelheader",Q=v+"panelbody",G=v+"panelfooter",Y=v+"panelinnerheader",Z=v+"panelinnerbody",et=v+"panelinnerfooter",tt=v+w+"closebtn",nt='<div class="'+K+'"><div class="'+Y+'"></div></div>',rt='<div class="'+Q+'"><div class="'+Z+'"></div></div>',it='<div class="'+G+'"><div class="'+et+'"></div></div>',st="{panel_title}<"+d+' class="pure-'+d+" itsa"+d+"-onlyicon "+tt+'" data-focusable="true"><i class="itsaicon-form-abort"></i></'+d+">",ot="",ut="{panel_footer}",at=function(e,t){return parseInt(e.getStyle(t),10)},ft="click",lt=ft+"outside",ct="value",ht=d+ft,pt=d+":hide";n=e.ITSAPanel=e.Base.create("itsapanel",e.Widget,[e.WidgetPosition,e.WidgetAutohide,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],null,{ATTRS:{bodyView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setBodyView"},dragable:{value:!1,validator:function(e){return typeof e===a}},footer:{value:null,validator:function(e){return e===null||typeof e===u}},footerView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setFooterView"},floated:{value:!0,validator:function(e){return typeof e===a}},focusOnShow:{value:!0,validator:function(e){return typeof e===a}},headerView:{value:null,validator:function(t){return t===null||typeof t===u||t instanceof e.View},setter:"_setHeaderView"},height:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},getter:"_getHeight",setter:"_setHeight"},maxHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMaxHeight"},maxWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMaxWidth"},minHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMinHeight"},minWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},setter:"_setMinWidth"},resizable:{value:!1,validator:function(e){return typeof e===a}},styled:{value:!0,validator:function(e){return typeof e===a}},visible:{value:!1,validator:function(e){return typeof e===a}},width:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===k},getter:"_getWidth",setter:"_setWidth"},title:{value:null,validator:function(e){return e===null||typeof e===u}}}}),n.prototype.initializer=function(){var t=this,n=t.get(l);e.use(s+"base",s+"form"),t.publish(pt,{defaultFn:e.bind(t.hide,t),emitFacade:!0}),t._eventhandlers=[],n.addClass(W),n.toggleClass(J,!t.get(S)),n.toggleClass(X,t.get(z)),n.toggleClass(g,t.get(m)),n.addClass(V),t.renderPromise().then(function(){t._setDimensions(),t.get(f)&&n.removeClass(V)})},n.prototype.bindUI=function(){var t=this,n=t.get(l),r=t.get(c),i=t._eventhandlers,s=t.get(x),u=t.get(T),a=t.get(N);s instanceof e.View&&s.addTarget(t),u instanceof e.View&&u.addTarget(t),a instanceof e.View&&a.addTarget(t),t.get(F)&&t.get(S)&&e.use(R+U,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+K)&&n.dd.addTarget(t)}),t.get(q)&&e.use(I+U,function(){t.get(o)||r.plug(e.Plugin.Resize,{handles:["r","b","br"]}).resize.addTarget(t)}),i.push(t.after(S+E,function(r){n.toggleClass(J,!r.newVal),t.get(F)&&(r.newVal&&!n.dd&&e.use(R+U,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+K)&&n.dd.addTarget(t)}),!r.newVal&&n.dd&&n.dd.removeTarget(t)&&n.unplug(R))})),i.push(t.after(F+E,function(r){r.newVal&&t.get(S)&&!n.dd&&e.use(R+U,function(){t.get(o)||n.plug(e.Plugin.Drag).dd.addHandle("."+K)&&n.dd.addTarget(t)}),!r.newVal&&n.dd&&n.dd.removeTarget(t)&&n.unplug(R)})),i.push(t.after(q+E,function(n){n.newVal&&!r[I]&&e.use(I+U,function(){t.get(o)||r.plug(e.Plugin.Resize,{handles:["r","b","br"]}).resize.addTarget(t)}),!n.newVal&&r[I]&&r[I].removeTarget(t)&&r[I].unplug(I)})),i.push(t.after([j+":"+j,j+":end"],function(){var t=e.ITSAFormElement,n=t.tipsyValid,r=t.tipsyInvalid;n&&n.get(f)&&n._alignTooltip(n._lastnode),r&&r.get(f)&&r._alignTooltip(r._lastnode)})),i.push(t.after([I+":end","height"+E,"width"+E,"minHeight"+E,"minWidth"+E],function(e){t.get(B)&&t.centered(),e.type===I+":end"&&(t._widthSet=!0)&&(t._heightSet=!0)})),i.push(t.after(f+E,function(e){var r=e.newVal;n.toggleClass(V,!r),r?(t.get(P)||t.get("focusOnShow"))&&t.focus():t.blur()})),i.push(t.after([x+E,T+E,N+E],function(n){n.prevVal instanceof e.View&&n.prevVal.removeTarget(t),n.newVal instanceof e.View&&n.newVal.addTarget(t)})),i.push(t.after(z+E,function(e){n.toggleClass(X,e.newVal)})),i.push(t.on(P+E,function(e){!t.get(S)&&e.preventDefault()})),i.push(t._header.delegate(ft,function(e){t.fire(pt,{buttonNode:e.target})},"."+tt)),i.push(n.on(ft,function(e){var n=e.target,r={type:ht,target:t,value:n.get(ct),buttonNode:n};t.focus(),t.fire(ht,r)})),i.push(n.on(lt,function(){t.blur()})),i.push(t.after(m+E,function(e){n.toggleClass(g,e.newVal)})),i.push(t.after("*:viewrendered",function(){t._adjustPaddingTop(),t._adjustPaddingBottom(),t._setDimensions()}))},n.prototype.renderUI=function(){var e=this,t=e.get(c);t.setHTML(nt+rt+it),e._header=t.one("."+Y),e._body=t.one("."+Z),e._footer=t.one("."+et),e._renderHeader(),e._renderBody(),e._renderFooter()},n.prototype.destructor=function(){var t=this,n=t.get(l),r=t.get(c),i=t.get(x),s=t.get(T),o=t.get(N);i instanceof e.View&&i.removeTarget(t),s instanceof e.View&&s.removeTarget(t),o instanceof e.View&&o.removeTarget(t),n.hasPlugin(R)&&
n.dd.removeTarget(t)&&n.unplug(R),r.hasPlugin[I]&&r[I].removeTarget(t)&&r.unplug(I),t._clearEventhandlers()},n.prototype._adjustPaddingBottom=function(){var e=this;e.get(c).setStyle(p,e._footer.get(L)+H)},n.prototype._adjustPaddingTop=function(){var e=this;e.get(c).setStyle(h,e._header.get(L)+H)},n.prototype._clearEventhandlers=function(){r.each(this._eventhandlers,function(e){e.detach()})},n.prototype._getHeight=function(){this.get(l).get(L)},n.prototype._getWidth=function(){this.get(l).get(A)},n.prototype._renderHeader=function(){var t=this,n=t.get("title"),r=t.get(x);!r||typeof r===u?t._header.setHTML(i.sub(r||st,{panel_title:n||""})):r instanceof e.View&&(r._set("container",t._header),r.render&&r.render()),t._adjustPaddingTop()},n.prototype._renderBody=function(){var t=this,n=t.get(T);!n||typeof n===u?t._body.setHTML(n||ot):n instanceof e.View&&(n._set("container",t._body),n.render&&n.render())},n.prototype._renderFooter=function(){var t=this,n=t.get("footer"),r=t.get(N),s=t._footer,o=!r&&!n;o?s.addClass($):(!r||typeof headerView===u?s.setHTML(i.sub(r||ut,{panel_footer:n||""})):r instanceof e.View&&(r._set("container",t._footer),r.render&&r.render()),s.removeClass($)),t._adjustPaddingBottom()},n.prototype._setBodyView=function(){var e=this;e.get(C)&&e._renderBody()},n.prototype._setDimensions=function(){var e=this,t=e.get(c);e._widthSet||t.setStyle("width",""),e._heightSet||t.setStyle("height",""),e._widthSet||t.setStyle("width",t.get(A)+H),e._heightSet||t.setStyle("height",t.get(L)+H)},n.prototype._setFooterView=function(){var e=this;e.get(C)&&e._renderFooter()},n.prototype._setHeaderView=function(){var e=this;e.get(C)&&e._renderHeader()},n.prototype._setHeight=function(e){var t=this,n=t.get(l);e&&(e-=at(n,O)+at(n,M)),t.get(c).setStyle("height",e?e+H:""),t._heightSet=typeof e===k},n.prototype._setMaxHeight=function(e){this.get(c).setStyle("maxHeight",e?e+H:"")},n.prototype._setMaxWidth=function(e){this.get(c).setStyle("maxWidth",e?e+H:"")},n.prototype._setMinHeight=function(e){this.get(c).setStyle("minHeight",e?e+H:"")},n.prototype._setMinWidth=function(e){this.get(c).setStyle("minWidth",e?e+H:"")},n.prototype._setWidth=function(e){var t=this,n=t.get(l);e&&(e-=at(n,_)+at(n,D)),t.get(c).setStyle("width",e?e+H:""),t._widthSet=typeof e===k}},"@VERSION@",{requires:["node-pluginhost","dd-ddm","base-build","widget-autohide","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","view","widget","gallery-itsawidgetrenderpromise"],skinnable:!0});
