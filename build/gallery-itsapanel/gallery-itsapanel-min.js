YUI.add("gallery-itsapanel",function(e,t){"use strict";var n,r=e.Array,i=e.Lang,s="string",o="boolean",u="visible",a="boundingBox",f="contentBox",l="paddingTop",c="paddingBottom",h="itsa-",p="hidden",d="View",v="panel",m="Change",g="floated",y="header"+d,b="body"+d,w="footer"+d,E="rendered",S="number",x="offsetHeight",T="px",N="dragable",C="dd",k="styled",L=h+v,A=h+k+v,O=h+p+v,M=h+p+"section",_=h+"inline"+v,D=h+"panelheader",P=h+"panelbody",H=h+"panelfooter",B=h+"panelinnerheader",j=h+"panelinnerbody",F=h+"panelinnerfooter",I=h+v+"closebtn",q='<div class="'+D+'"><div class="'+B+'"></div></div>',R='<div class="'+P+'"><div class="'+j+'"></div></div>',U='<div class="'+H+'"><div class="'+F+'"></div></div>',z='{panel_title}<div class="'+I+'"><i class="itsaicon-form-abort"></i></div>',W="",X="{panel_footer}",V=function(e,t){return parseInt(e.getStyle(t),10)};n=e.ITSAPanel=e.Base.create("ITSAPanel",e.Widget,[e.WidgetPosition,e.WidgetAutohide,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],null,{ATTRS:{bodyView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setBodyView"},dragable:{value:!0,validator:function(e){return typeof e===o}},footer:{value:null,validator:function(e){return e===null||typeof e===s}},footerView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setFooterView"},floated:{value:!0,validator:function(e){return typeof e===o}},headerView:{value:null,validator:function(t){return t===null||typeof t===s||t instanceof e.View},setter:"_setHeaderView"},maxHeight:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMaxHeight"},maxWidth:{value:null,lazyAdd:!1,validator:function(e){return e===null||typeof e===S},setter:"_setMaxWidth"},styled:{value:!0,validator:function(e){return typeof e===o}},visible:{value:!1,validator:function(e){return typeof e===o}},title:{value:null,validator:function(e){return e===null||typeof e===s}}}}),n.prototype.initializer=function(){var t=this,n=t.get(a);e.use("gallerycss-itsa-base","gallerycss-itsa-form"),t._eventhandlers=[],n.addClass(L),n.toggleClass(O,!t.get(u)),n.toggleClass(_,!t.get(g)),n.toggleClass(A,t.get(k))},n.prototype.bindUI=function(){var t=this,n=t.get(a),r=t._eventhandlers,i=t.get(y),s=t.get(b),o=t.get(w);i instanceof e.View&&i.addTarget(t),s instanceof e.View&&s.addTarget(t),o instanceof e.View&&o.addTarget(t),t.get(N)&&t.get(g)&&n.plug(e.Plugin.Drag)&&n.dd.addHandle("."+D),r.push(t.after(g+m,function(r){n.toggleClass(_,!r.newVal),t.get(N)&&(r.newVal&&!n.dd&&n.plug(e.Plugin.Drag)&&n.dd.addHandle("."+D),!r.newVal&&n.dd&&n.unplug(C))})),r.push(t.after(N+m,function(r){r.newVal&&t.get(g)&&!n.dd&&n.plug(e.Plugin.Drag)&&n.dd.addHandle("."+D),!r.newVal&&n.dd&&n.unplug(C)})),r.push(t.after(u+m,function(e){n.toggleClass(O,!e.newVal)})),r.push(t.after([y+m,b+m,w+m],function(n){n.prevVal instanceof e.View&&n.prevVal.removeTarget(t),n.newVal instanceof e.View&&n.newVal.addTarget(t)})),r.push(t.after(k+m,function(e){n.toggleClass(A,e.newVal)})),r.push(t._header.delegate("click",e.bind(t.hide,t),"."+I)),r.push(t.after("*:viewrendered",function(){t._adjustPaddingTop(),t._adjustPaddingBottom()}))},n.prototype.renderUI=function(){var e=this,t=e.get(f);t.setHTML(q+R+U),e._header=t.one("."+B),e._body=t.one("."+j),e._footer=t.one("."+F),e._renderHeader(),e._renderBody(),e._renderFooter()},n.prototype.destructor=function(){var t=this,n=t.get(a),r=t.get(y),i=t.get(b),s=t.get(w);r instanceof e.View&&r.removeTarget(t),i instanceof e.View&&i.removeTarget(t),s instanceof e.View&&s.removeTarget(t),n.hasPlugin("dd")&&n.unplug(C),t._clearEventhandlers()},n.prototype._adjustPaddingBottom=function(){var e=this;e.get(f).setStyle(c,e._footer.get(x)+T)},n.prototype._adjustPaddingTop=function(){var e=this;e.get(f).setStyle(l,e._header.get(x)+T)},n.prototype._clearEventhandlers=function(){r.each(this._eventhandlers,function(e){e.detach()})},n.prototype._renderHeader=function(){var t=this,n=t.get("title"),r=t.get(y);!r||typeof r===s?t._header.setHTML(i.sub(r||z,{panel_title:n||""})):r instanceof e.View&&(r.set("container",t._header),r.render&&r.render()),t._adjustPaddingTop()},n.prototype._renderBody=function(){var t=this,n=t.get(b);!n||typeof n===s?t._body.setHTML(n||W):n instanceof e.View&&(n.set("container",t._body),n.render&&n.render())},n.prototype._renderFooter=function(){var t=this,n=t.get("footer"),r=t.get(w),o=t._footer,u=!r&&!n;u?o.addClass(M):(!r||typeof headerView===s?o.setHTML(i.sub(r||X,{panel_footer:n||""})):r instanceof e.View&&(r.set("container",t._footer),r.render&&r.render()),o.removeClass(M)),t._adjustPaddingBottom()},n.prototype._setBodyView=function(){var e=this;e.get(E)&&e._renderBody()},n.prototype._setFooterView=function(){var e=this;e.get(E)&&e._renderFooter()},n.prototype._setHeaderView=function(){var e=this;e.get(E)&&e._renderHeader()},n.prototype._setMaxHeight=function(e){var t=this;t.renderPromise().then(function(){var n=t.get(f);t._body.setStyle("maxHeight",e?e-V(n,l)-V(n,c)+T:"")})},n.prototype._setMaxWidth=function(e){this.get(f).setStyle("maxWidth",e?e+T:"")}},"@VERSION@",{requires:["dd-plugin","base-build","widget-autohide","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","view","widget","gallery-itsawidgetrenderpromise"],skinnable:!0});
