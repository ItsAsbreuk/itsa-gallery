YUI.add("gallery-itsascrollviewmodellist",function(e,t){"use strict";function u(){}var n=e.Lang,r="itsa-scrollviewmodel",i="itsa-scrollviewmodellist",s=i+"-groupheader",o=function(e,t){return parseInt(e.getStyle(t),10)};u.ATTRS={lastItemOnTop:{value:0,validator:function(e){return n.isNumber(e)&&e>-1&&e<3},setter:"_setLastItemOnTop"}},e.mix(u.prototype,{_lastItemTopInit:!1,saveScrollTo:function(e,t){var n=this,r=n.get("boundingBox"),i=n._viewNode,s;e&&(e=Math.max(0,e),s=i.get("offsetWidth")-r.get("offsetWidth"),e=Math.min(e,s)),t&&(t=Math.max(0,t),s=i.get("offsetHeight")-r.get("offsetHeight"),t=Math.min(t,s)),n.scrollTo(e,t)},scrollIntoView:function(t,i,u){var a=this,f=a.get("boundingBox"),l=a.get("axis"),c=l.y,h=c?f.get("offsetHeight"):f.get("offsetWidth"),p=c?f.getY():f.getX(),d=a._viewNode,v=a.itsainfiniteview,m=a.pages,g,y,b,w,E,S,x,T,N,C,k,L;x=function(e){var t=c?e.getY():e.getX(),r;return c?r=t+e.get("offsetHeight")+o(e,"marginTop")+o(e,"marginBottom"):r=t+e.get("offsetWidth")+o(e,"marginLeft")+o(e,"marginRight"),t<p||i&&n.isBoolean(i.forceTop)&&i.forceTop?-1:r>p+h||i&&n.isBoolean(i.forceBottom)&&i.forceBottom?1:0},t instanceof e.Node&&(E=t),E||n.isNumber(t)?(E=E||a.getNodeFromIndex(t,u),N=x(E),m&&N!==0&&(S=d.all(">li"),S.some(function(e,n){return e.hasClass(r)||t++,n===t}))):(E=t&&a.getNodeFromModel(t,u),N=x(E),m&&N!==0&&(S=d.all(">li"),t=0,S.some(function(e,n){var r=e===E;return r&&(t=n),r}))),(!i||!n.isBoolean(i.noFocus)||!i.noFocus)&&a._focusModelNode(E);if(E&&N!==0){T=N===-1;if(T&&i&&n.isBoolean(i.showHeaders)&&i.showHeaders){L=E.previous();while(L&&L.hasClass(s))E=L,L=L.previous()}c?(g=E.getY(),y=a.get("scrollY"),C=E.get("offsetHeight")+o(E,"marginTop")+o(E,"marginBottom"),b=d.get("offsetHeight")-h):(g=E.getX(),y=a.get("scrollX"),C=E.get("offsetWidth")+o(E,"marginLeft")+o(E,"marginRight"),b=d.get("offsetWidth")-h),v&&!T&&v.checkExpansion();if(m){if(!T){while(C<h&&t>0)k=!0,t--,E=E.previous("li"),c?C+=E.get("offsetHeight")+o(E,"marginTop")+o(E,"marginBottom"):C+=E.get("offsetWidth")+o(E,"marginLeft")+o(E,"marginRight");k&&t++,t=Math.min(t,a._getMaxPaginatorGotoIndex(t,u))}m.scrollToIndex(t)}else w=Math.round(y+g-p-(T?0:h-C)),c?a.saveScrollTo(null,w):a.saveScrollTo(w,null)}else!E},_setLastItemOnTop:function(e){var t=this;t._lastItemTopInit?e?(t._addEmptyItem(null,e),t.syncUI()):(t._removeEmptyItem(),t.syncUI()):t._lastItemTopInit=!0}},!0),e.ScrollView.ITSAScrollviewModellist=u,e.Base.mix(e.ScrollView,[e.ITSAModellistViewExtention]),e.Base.mix(e.ScrollView,[u])},"@VERSION@",{requires:["gallery-itsamodellistviewextention"],skinnable:!0});
