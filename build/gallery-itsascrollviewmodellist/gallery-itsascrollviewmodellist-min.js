YUI.add("gallery-itsascrollviewmodellist",function(e,t){"use strict";var n=e.Lang,r="itsa-model",i="itsa-modellistview",s=i+"-groupheader",o=function(e,t){return parseInt(e.getStyle(t),10)};e.ITSAScrollViewModellist=e.Base.create("itsascrollviewmodellist",e.ScrollView,[e.ITSAModellistViewExtention],{_lastItemTopInit:!1,saveScrollTo:function(e,t){var n=this,r=n.get("boundingBox"),i=n._viewNode,s;e&&(e=Math.max(0,e),s=i.get("offsetWidth")-r.get("offsetWidth"),e=Math.min(e,s)),t&&(t=Math.max(0,t),s=i.get("offsetHeight")-r.get("offsetHeight"),t=Math.min(t,s)),n.scrollTo(e,t)},scrollIntoView:function(t,i,u){var a=this,f=a.get("boundingBox"),l=a.get("axis"),c=l.y,h=c?f.get("offsetHeight"):f.get("offsetWidth"),p=c?f.getY():f.getX(),d=a._viewNode,v=a.itsainfiniteview,m=a.pages,g=i&&n.isBoolean(i.showHeaders)&&i.showHeaders,y=i&&n.isBoolean(i.noFocus)&&i.noFocus,b=i&&n.isBoolean(i.editMode)&&i.editMode,w,E,S,x,T,N,C,k,L,A,O,M;N=function(e){var t=c?e.getY():e.getX(),r;return c?r=t+e.get("offsetHeight")+o(e,"marginTop")+o(e,"marginBottom"):r=t+e.get("offsetWidth")+o(e,"marginLeft")+o(e,"marginRight"),t<p||i&&n.isBoolean(i.forceTop)&&i.forceTop?-1:r>p+h||i&&n.isBoolean(i.forceBottom)&&i.forceBottom?1:0},t instanceof e.Node&&(x=t),x||n.isNumber(t)?(x=x||a.getNodeFromIndex(t,u),x&&(k=N(x),m&&k!==0&&(T=d.get("children"),T.some(function(e,n){return e.hasClass(r)||t++,n===t})))):(x=t&&a.getNodeFromModel(t,u),k=N(x),x&&m&&k!==0&&(T=d.all(">li"),t=0,T.some(function(e,n){var r=e===x;return r&&(t=n),r})));if(x){y||(M=x,a._focusModelNode(M),b&&e.use("gallery-itsatabkeymanager",function(e){M.itsatabkeymanager||M.plug(e.Plugin.ITSATabKeyManager),M.itsatabkeymanager.focusInitialItem()}));if(k===0&&g){O=x.previous();while(O&&O.hasClass(s))x=O,O=O.previous();k=N(x)}if(k!==0){C=k===-1;if(C&&g){O=x.previous();while(O&&O.hasClass(s))t--,x=O,O=O.previous()}c?(w=x.getY(),E=a.get("scrollY"),L=x.get("offsetHeight")+o(x,"marginTop")+o(x,"marginBottom")):(w=x.getX(),E=a.get("scrollX"),L=x.get("offsetWidth")+o(x,"marginLeft")+o(x,"marginRight"));if(m){if(!C){while(L<h&&t>0)A=!0,t--,x=x.previous("li"),c?L+=x.get("offsetHeight")+o(x,"marginTop")+o(x,"marginBottom"):L+=x.get("offsetWidth")+o(x,"marginLeft")+o(x,"marginRight");A&&t++,t=Math.min(t,a._getMaxPaginatorGotoIndex(t,u))}m.scrollToIndex(t)}else S=Math.round(E+w-p-(C?0:h-L)),c?a.saveScrollTo(null,S):a.saveScrollTo(S,null);v&&!C&&v.checkExpansion()}}},_setLastItemOnTop:function(e){var t=this;t._lastItemTopInit?e?(t._addEmptyItem(null,e),t.syncUI()):(t._removeEmptyItem(),t.syncUI()):t._lastItemTopInit=!0}},{ATTRS:{lastItemOnTop:{value:0,validator:function(e){return n.isNumber(e)&&e>-1&&e<3},setter:"_setLastItemOnTop"}}})},"@VERSION@",{requires:["yui-base","node-style","base-base","base-build","scrollview","gallery-itsamodellistviewextention"],skinnable:!0});
