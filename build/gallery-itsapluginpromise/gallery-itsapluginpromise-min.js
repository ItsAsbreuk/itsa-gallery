YUI.add("gallery-itsapluginpromise",function(e,t){"use strict";function r(){}var n=2e4;e.mix(r.prototype,{hasPluginPromise:function(t,n){var r=this,i=e.bind(n&&n.checkafterrender?r._hostRenderPromise:r._hostReadyPromise,r);return i(n&&n.timeout).then(function(){return new e.Promise(function(e,n){r.hasPlugin(t)?e(r):n(new Error(t+" not plugged in"))})})},plugAfterReadyPromise:function(){var e=this,t=arguments,n=t[0];return e._hostReadyPromise(t[2]).then(function(){e.plug.apply(e,t)}).then(function(){return n&&n.readyPromise&&n.readyPromise(t[2])||!0}).then(function(){return n&&e[n.ns]})},plugAfterRenderPromise:function(){var e=this,t=arguments,n=t[0];return e._hostRenderPromise(t[2]).then(function(){e.plug.apply(e,t)}).then(function(){return n&&n.readyPromise&&n.readyPromise(t[2])||!0}).then(function(){return n&&e[n.ns]})},plugPromise:function(){var t=this,n=arguments,r=n[0],i=r&&r.readyPromise;return new e.Promise(function(e,s){t.plug.apply(t,n),i?i(n[2]).then(function(){e(r&&t[r.ns])},s):e(r&&t[r.ns])})},_hostReadyPromise:function(t){var n=this;return n._hostreadypromise||(n._hostreadypromise=new e.Promise(function(r,i){e.Widget&&n instanceof e.Widget?e.use("gallery-itsawidgetrenderpromise",function(){n.readyPromise(t).then(r,i)}):r()})),n._hostreadypromise},_hostRenderPromise:function(t){var n=this;return n._hostrenderpromise||(n._hostrenderpromise=new e.Promise(function(r,i){e.Widget&&n instanceof e.Widget?e.use("gallery-itsawidgetrenderpromise",function(){n.renderPromise(t).then(r,i)}):i(new Error("Host is no widget"))})),n._hostrenderpromise}}),e.Plugin.Host.ITSAPluginPromise=r,e.Base.mix(e.Plugin.Host,[r]),e.Plugin.Base.prototype.promiseBeforeReady=function(){return new e.Promise(function(e){e()})},e.Plugin.Base.prototype.readyPromise=function(t){var r=this;return r._readypromise||(r._readypromise=new e.Promise(function(i,s){r.promiseBeforeReady().then(i,s),t!==0&&e.later(t||n,null,function(){var e="readyPromise is rejected by timeout of "+(t||n)+" ms";s(new Error(e))})})),r._readypromise}},"@VERSION@",{requires:["yui-base","base-base","base-build","pluginhost-base","plugin","event-delegate","promise"]});
