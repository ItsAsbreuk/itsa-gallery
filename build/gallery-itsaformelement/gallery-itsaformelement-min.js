YUI.add("gallery-itsaformelement",function(e,t){"use strict";var n,r,i,s=e.Array,o=e.Object,u=e.Lang,a=e.Intl,f=e.one("body"),l=l,c="data",h="hotkey",p=c+"-for",d=p+h,v="disabled",m="widget",g="string",y="itsa-"+m+"-parent",b="pure",w="button",E=b+"-"+w,S=E+"-active",x=" itsa"+w+"-bordered",T="date",N="time",C=T+N,k=" "+E+"-"+C+" itsa"+w+"-onlyicon",L=E+"-"+v,A=E+"-primary",O="modelattribute",M="hideatstartup",_="itsa-invisible",D="renderpromise",P="gallery",H="-itsa",B="editor",j="error",F="boolean",I="[data-formelement][data-content]",q='[data-valid="false"]',R="tipsy-formelement",U="boundingBox",z="touchstart",W="touchend",X="focus",V="blur",$="keypress",J="right",K="picker",Q="click",G="itsaicon-datetime-",Y=G+T,Z=G+N,et=G+C,tt=' data-formelement="true"',nt='<span class="format',rt="</span>",it="itsa-"+h,st='<span class="'+it+'" data-'+h+'="{'+h+'}" '+d+'="{nodeid}">$1'+rt,ot="itsabutton-asktoclick",ut="^[\\w!#$%&'*+/=?`{|}~^-]+(?:\\.[\\w!#$%&'*+/=?`{|}~^-]+)*@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$",at="[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+(/[\\w-]+)*",ft="^(http://)?"+at,lt="^(https://)?"+at,ct="^(https?://)?"+at,ht="^(([-]?[1-9][0-9]*)|0)$",pt="^[-]?(([1-9][0-9]*)|0)(\\.[0-9]+)?$",dt='<label for="',vt="</label>",mt="text",gt="password",yt="email",bt="url",wt="radio",Et="checkbox",St="hidden",xt="textarea",Tt="div",Nt="label",Ct="span",kt="plain",Lt="initialfocus",At="fullselect",Ot="submitonenter",Mt="number",_t=b+"-"+wt,Dt=b+"-"+Et,Pt="readonly",Ht="checked",Bt="required",jt="name",Ft="value",It="placeholder",qt="pattern",Rt="class",Ut="labelHTML",zt="switch",Wt=zt+"ed",Xt=zt+Nt,Vt=zt+Ft,$t=Nt+c,Jt=Ft+Wt,Kt=Ft+"non"+Wt,Qt="focusable",Gt="spinbusy",Yt="{"+v+"}",Zt="{"+Pt+"}",en="{"+Ht+"}",tn="{"+Bt+"}",nn="{"+jt+"}",rn="{"+Ft+"}",sn="{"+It+"}",on="{"+qt+"}",un="{"+c+"}",an="{"+Rt+"}",fn="{"+St+"}",ln='id="{id}"',cn="{"+Jt+"}",hn="{"+Kt+"}",pn="{"+$t+"}",dn="{"+Ut+"}",vn="{"+Qt+"}",mn="type",gn="submit",yn="reset",bn="<input "+mn+'="',wn="<"+w+" "+mn+'="',En=Rt+jt,Sn=Nt+"Class"+jt,xn="{"+mn+"}",Tn=' data-labeldatetime="true"',Nn=c+"-"+C+"=",Cn=c+"-"+w+mn,kn=c+"-"+w+"sub"+mn,Ln="<"+Ct+" "+ln+">UNDEFINED ELEMENTTYPE</"+Ct+">",An="<"+Ct+" "+ln+nn+un+fn+an+">"+rn+"</"+Ct+">",On=bn+mt+'" '+ln+nn+rn+sn+Yt+tn+Zt+on+un+vn+fn+an+" />",Mn=bn+gt+'" '+ln+nn+rn+sn+Yt+tn+Zt+on+un+vn+fn+an+" />",_n=bn+yt+'" '+ln+nn+rn+sn+Yt+tn+Zt+un+vn+fn+an+on+" />",Dn=bn+bt+'" '+ln+nn+rn+sn+Yt+tn+Zt+un+vn+fn+an+on+" />",Pn=bn+mt+'" '+ln+nn+rn+sn+Yt+tn+Zt+un+vn+fn+an+on+" />",Hn=bn+wt+'" '+ln+nn+rn+Yt+en+un+vn+fn+an+" />",Bn=bn+Et+'" '+ln+nn+rn+Yt+Zt+en+un+vn+fn+an+" />",jn=bn+St+'" '+ln+nn+rn+" />",Fn="<"+xt+" "+ln+nn+sn+Yt+tn+Zt+un+vn+fn+an+">"+rn+"</"+xt+">",In=hn+"<"+Tt+" "+ln+nn+fn+un+vn+an+"></"+Tt+">"+cn,qn=wn+xn+'" '+ln+nn+rn+un+vn+fn+an+">"+dn+"</"+w+">",Rn=hn+wn+w+'" '+ln+nn+rn+fn+tn+Tn+Zt+" "+Nn+'"'+T+'"'+un+vn+an+"><i "+Rt+'="'+Y+'"></i></'+w+">"+cn,Un=hn+wn+w+'" '+ln+nn+rn+fn+tn+Tn+Zt+" "+Nn+'"'+N+'"'+un+vn+an+"><i "+Rt+'="'+Z+'"></i></'+w+">"+cn,zn=hn+wn+w+'" '+ln+nn+rn+fn+tn+Tn+Zt+" "+Nn+'"'+C+'"'+un+vn+an+"><i "+Rt+'="'+et+'"></i></'+w+">"+cn,Wn={widget:In,plain:An,text:On,password:Mn,email:_n,url:Dn,number:Pn,radio:Hn,checkbox:Bn,hidden:jn,textarea:Fn,button:qn,reset:qn,submit:qn,date:Rn,time:Un,datetime:zn},Xn=function(t,n,r,i,s,o,u,a,f){var l=s?" "+s:"",c=a?" "+_:"",h=typeof n===g&&n.length>0?" formattime-"+n:"";return i||(t==="date"?i="%x":t==="time"?i="%X":i="%x %X"),e.use(P+H+"datetimepicker"),nt+"value"+h+l+c+'" '+p+'="'+f+'"'+l+o+u+">"+e.Date.format(r,{format:i})+rt},Vn={date:!0,time:!0,datetime:!0},$n={text:!0,number:!0,password:!0,textarea:!0,email:!0,url:!0},Jn={button:!0,submit:!0,reset:!0},Kn={radio:!0,checkbox:!0},Qn=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,Gn=function(t,n){return t.replace?t.replace(Qn,function(t,r){return e.Lang.isUndefined(n[r])?"":n[r]}):t};e.Node.prototype.displayInDoc=function(){var e=this,t=e.inDoc();while(e&&t)t=e.getStyle("display")!=="none",t&&(e=e.get("parentNode"));return t},n=e.ITSAFormElement={},n.getElement=function(t,r,i){var s,o,u,a;i=i||e.guid(),r=r||{},o=typeof t=="function"&&t.NAME,typeof t===g&&(t=t.toLowerCase()),s={type:t,nodeid:i,config:r,name:r.name,html:n._renderedElement(o?t.NAME:t,r,i,o)};if(o){u=t;try{a=s.widget=new u(r.widgetconfig),t.NAME===B+"Base"?e.use(P+H+B+D,function(){a.renderOnAvailable("#"+i)}):e.use(P+H+m+D,function(){a.renderOnAvailable("#"+i)})}catch(f){e.fire(j,f)}}return s},n._renderedElement=function(t,r,i,f){var l=e.merge(r),d=typeof l[Xt]===F?l[Xt]:!1,b=typeof l[Qt]===F?l[Qt]:!0,S=typeof l[At]===F?l[At]:!1,T=typeof l[Ot]===F?l[Ot]:!1,N=typeof l[M]===F?l[M]:!1,D=r.tooltip,B=r.tooltipinvalid,j=r.nossl,I=r.onlyssl,q=r.digits,R=r[Ft],U=r[O],z=r[Vt],W=r[c],X=tt,V=Vn[t],$=r[h],J,K,Q,G,Y,Z,et,it,ot,at,mt,Et,Tt,Ct,zt,Wt,Yt,Zt,en;return W&&(X+=" "+W),U&&(X+=" data-"+O+'="true"'),l[c]=X,D&&(D=D.replace(/"/g,"''"),l[c]+=' data-content="'+D+'" data-contentvalid="'+D+'"'),B&&typeof B===g&&B.length>0&&(l[c]+=' data-contentinvalid="'+B.replace(/"/g,"''")+'"'),r[Lt]&&(l[c]+=" data-"+Lt+'="true"'),r[jt]&&(l[jt]=" "+jt+'="'+l[jt]+'"'),Z=typeof r[St]===F?r[St]:!1,et=typeof l[v]===F?l[v]:!1,l[St]=Z?" "+St+'="'+St+'"':"",l[v]=et?" "+v+'="'+v+'"':"",$&&(u.isObject($)&&(zt=a.getLang(P+"-itsaformelement")||e.config.lang,Zt=[],o.each($,function(e,t){typeof t===g&&typeof e===g&&Zt.push(t)}),Yt=0,en=zt.length,s.some(Zt,function(e){var t=e.length;return(t>Yt&&(Yt===0||t<=en)||t<Yt&&Yt>en)&&zt.match(new RegExp("^"+e))&&(Wt=e,Yt=Wt.length),e===zt}),$=$[Wt]),typeof $===g&&$.length===1&&(Ct=$.toLowerCase())),f?(l[c]+=' data-type="'+t+'"',l[Rt]=' class="'+(r[En]||"")+" "+y+(N?" "+_:"")+'"',r[Nt]&&(l[$t]=l[$t]||"",l[$t]+=" data-"+m+Nt+'="true"'),l[Qt]=b?" data-"+Qt+'="true"':"",t==="slider"&&(l[z?Jt:Kt]=nt+"value formatslider-"+r.name+(r[En]?" "+r[En]:"")+'" '+p+'="'+i+'"'+l[St]+l[v]+">"+R+rt),t=m):(it=!r["remove"+Bt]&&(typeof l[Bt]===F?l[Bt]:t===gt),mt=typeof l[Pt]===F?l[Pt]:!1,l[Qt]=b?" data-"+Qt+'="true"':"",l[Bt]=it?" "+Bt+'="'+Bt+'"':"",l[Pt]=mt?" "+Pt+'="'+Pt+'"'
:"",r[It]&&(l[It]=" "+It+'="'+l[It]+'"'),r[qt]&&(l[qt]=" "+qt+'="'+l[qt]+'"'),t!==xt&&t!==kt&&R&&(l[Ft]=" "+Ft+'="'+l[Ft]+'"'),t===yt?l[qt]=" "+qt+'="'+ut+'"':t===bt?typeof j===F&&j?l[qt]=" "+qt+'="'+ft+'"':typeof I===F&&I?l[qt]=" "+qt+'="'+lt+'"':l[qt]=" "+qt+'="'+ct+'"':t===Mt?l[qt]=" "+qt+'="'+(typeof q===F&&q?pt:ht)+'"':Kn[t]?(Y=t===wt?_t:Dt,ot=typeof l[Ht]===F?l[Ht]:!1,l[Ht]=ot?" "+Ht+'="'+Ht+'"':""):Jn[t]?(delete l[Nt],at=!0,l[mn]=t,l[c]+=" data-"+w+mn+'="'+(r[w+mn]||t)+'"',Q=r.primary,K=et,r[Gt]&&(l[c]+=" data-"+Gt+'="true"',e.use(P+"css"+H+"-animatespin")),r[Ut]||(l[Ut]=R||t),l[Ft]=" "+Ft+'="'+(r[Ft]||e.Escape.html(l[Ut]))+'"',Ct&&(Tt=new RegExp("(?![^<]*>)("+Ct+")","i"))&&Tt.test(l[Ut])&&(l[Ut]=l[Ut].replace(Tt,u.sub(st,{hotkey:Ct,nodeid:i})),n._HKList||n._actHKList())):V&&(e.use(P+"css"+H+"-"+C),u.isDate(R)||(R=new Date),at=!0,K=et,l[Ft]=' value="'+R.getTime()+'"',l[c]+=" data-"+C+'picker="true"',l[z?Jt:Kt]=Xn(t,r.name||"",R,l.format,r[En],l[St],l[v],N,i)),r.removepattern&&l[qt]&&(l[c]+=" data-"+qt+"="+l[qt].substr(9),delete l[qt]),$n[t]&&(n._TXTList||n._actTXTList()),S&&$n[t]&&(l[c]+=" data-"+At+'="true"'),T&&$n[t]&&(l[c]+=" data-"+Ot+'="true"'),(r[En]||at||N||V)&&(l[Rt]=' class="'+(V?"":r[En]||"")+(at?" "+E+x:"")+(V?k:"")+(K?" "+L:"")+(Q?" "+A:"")+(N?" "+_:"")+'"')),G=Wn[t]||Ln,l[Nt]&&(Ct&&(Tt=new RegExp("(?![^<]*>)("+Ct+")","i"))&&Tt.test(l[Nt])&&(l[Nt]=l[Nt].replace(Tt,u.sub(st,{hotkey:Ct,nodeid:i})),n._HKList||n._actHKList()),Y?(l[Nt]='<span class="formatlabel">'+l[Nt]+rt,J=' class="'+Y+(r[Sn]?" "+r[Sn]:"")+'"',G=dt+'{id}"'+fn+pn+J+">"+(d?G+"{label}":"{label}"+G)+vt):(J=r[Sn]?' class="'+r[Sn]+'"':"",Et=(V?"<"+Nt:dt+'{id}"')+fn+pn+J+">{label}"+vt,d?G+=Et:G=Et+G)),l.id=i,Gn(G,l)},n.tooltipReadyPromise=function(){return n._tooltipreadypromise||(n._tooltipreadypromise=new e.Promise(function(t,n){e.use(P+"-tipsy",P+H+m+D,function(){r=(new e.Tipsy({placement:J,selector:I+":not("+q+")",showOn:[z,X],hideOn:[W,V,$]})).render(),i=(new e.Tipsy({placement:J,selector:I+q,showOn:[z,X],hideOn:[W,V,$]})).render(),r.get(U).addClass(),i.get(U).addClass(R+"-invalid"),e.batch(r.renderPromise(),i.renderPromise()).then(t,n)})})),n._tooltipreadypromise},n._pressedBtn=null,n._actHKList=function(){n._HKList=!0,f.on("keydown",function(t){var r=t.charCode,i,s,o,u,a;t.altKey&&(i=String.fromCharCode(r).toLowerCase(),s=e.one("."+it+"[data-"+h+'="'+i+'"]:not(['+v+"]):not(["+Pt+"])"),s&&(o=s.getAttribute(d),u=e.one("#"+o)),u&&(u.getStyle("visibility")==="hidden"||!u.displayInDoc())?(s=e.all("."+it+"[data-"+h+'="'+i+'"]:not(['+v+"]):not(["+Pt+"])"),s.some(function(t,n){return n>0&&(o=t.getAttribute(d),u=e.one("#"+o),a=u&&u.getStyle("visibility")!=="hidden"&&u.displayInDoc()&&u),a})):a=u,a&&(t.halt(),a.focus(),a.get("tagName")==="BUTTON"&&(a.addClass(S),e.fire(ot,{buttonNode:a}),n._pressedBtn=a)))}),f.on("keyup",function(){var e=n._pressedBtn;e&&(e.removeClass(S),n._pressedBtn=null)})},n._actTXTList=function(){n._TXTList=!0,f.delegate(X,function(t){var n=t.target,r=n.getAttribute(c+"-"+At)==="true",i;!r&&n.test("input")&&t.preventDefault(),i=n.getData(l),e.ITSAFormElement._activeNode=n,i?n.clearData(l):r?n.select():(n.set("selectionStart",n.get("value").length),n.set("scrollTop",999999))},function(e,t){var n=t.target;return e===n&&n.test("input[type=text],input[type=password],input[type=url],input[type=email],textarea")}),f.delegate("mousedown",function(t){var n=t.target;e.ITSAFormElement._activeNode!==n&&n.setData(l,!0)},function(e,t){var n=t.target;return e===n&&n.test("input[type=text],input[type=password],input[type=url],input[type=email],textarea")})},e.later(500,null,n.tooltipReadyPromise),s.each([T,N,C],function(t){var n={on:function(e,n,r){n._handle=e.on(Q,function(e){var n=e.target;n&&n.get("tagName")!=="BUTTON"&&(n=n.get("parentNode"),e.target=n),n&&n.getAttribute(c+"-"+C)===t&&r.fire(e)})},detach:function(e,t){t._handle.detach()}};n.delegate=n.on,n.detachDelegate=n.detach,e.Event.define(t+K+Q,n)}),s.each([gn,yn],function(t){var n={on:function(e,n,r){n._handle=e.on(Q,function(e){var n=e.target;n&&n.get("tagName")!=="BUTTON"&&(n=n.get("parentNode"),e.target=n),n&&(n.getAttribute(Cn)===t||n.getAttribute(Cn)===w&&n.getAttribute(kn)===t)&&r.fire(e)})},detach:function(e,t){t._handle.detach()}};n.delegate=n.on,n.detachDelegate=n.detach,e.Event.define(t+":"+Q,n)})},"@VERSION@",{requires:["yui-base","node-core","node-event-delegate","datatype-date-format","event-base","event-synthetic","yui-later","promise","event-tap","event-custom","escape","intl","gallerycss-itsa-base"],skinnable:!0});
