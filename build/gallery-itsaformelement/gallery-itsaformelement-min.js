YUI.add("gallery-itsaformelement",function(e,t){"use strict";var n,r,i,s=e.Array,o=e.Lang,u=e.one("body"),a=a,f="disabled",l="widget",c="itsa-"+l+"-parent",h="pure",p="button",d=h+"-"+p,v="date",m="time",g=v+m,y=" "+d+"-"+g+" "+d+"-notext",b=d+"-"+f,w=d+"-primary",E="modelattribute",S="hideatstartup",x="itsa-invisible",T="renderpromise",N="gallery",C="-itsa",k="editor",L="error",A="boolean",O="picker",M="click",_="itsaicon-datetime-",D=_+v,P=_+m,H=_+g,B=' data-formelement="true"',j='<span class="format',F="</span>",I="^[\\w!#$%&'*+/=?`{|}~^-]+(?:\\.[\\w!#$%&'*+/=?`{|}~^-]+)*@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$",q="[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+(/[\\w-]+)*",R="^(http://)?"+q,U="^(https://)?"+q,z="^(https?://)?"+q,W="^(([-]?[1-9][0-9]*)|0)$",X="^[-]?(([1-9][0-9]*)|0)(\\.[0-9]+)?$",V='<label for="',$="</label>",J="text",K="password",Q="email",G="url",Y="radio",Z="checkbox",et="hidden",tt="textarea",nt="div",rt="label",it="span",st="plain",ot="initialfocus",ut="fullselect",at="number",ft=h+"-"+Y,lt=h+"-"+Z,ct="readonly",ht="checked",pt="required",dt="name",vt="value",mt="placeholder",gt="pattern",yt="data",bt="class",wt="labelHTML",Et="switch",St=Et+"ed",xt=Et+rt,Tt=Et+vt,Nt=rt+yt,Ct=vt+St,kt=vt+"non"+St,Lt="focusable",At="spinbusy",Ot="{"+f+"}",Mt="{"+ct+"}",_t="{"+ht+"}",Dt="{"+pt+"}",Pt="{"+dt+"}",Ht="{"+vt+"}",Bt="{"+mt+"}",jt="{"+gt+"}",Ft="{"+yt+"}",It="{"+bt+"}",qt="{"+et+"}",Rt='id="{id}"',Ut="{"+Ct+"}",zt="{"+kt+"}",Wt="{"+Nt+"}",Xt="{"+wt+"}",Vt="{"+Lt+"}",$t="type",Jt="submit",Kt="reset",Qt="<input "+$t+'="',Gt="<"+p+" "+$t+'="',Yt=bt+dt,Zt=rt+"Class"+dt,en="{"+$t+"}",tn=' data-labeldatetime="true"',nn=yt+"-"+g+"=",rn=yt+"-"+p+$t,sn=yt+"-"+p+"sub"+$t,on="<"+it+" "+Rt+">UNDEFINED ELEMENTTYPE</"+it+">",un="<"+it+" "+Rt+Pt+Ft+qt+It+">"+Ht+"</"+it+">",an=Qt+J+'" '+Rt+Pt+Ht+Bt+Ot+Dt+Mt+jt+Ft+Vt+qt+It+" />",fn=Qt+K+'" '+Rt+Pt+Ht+Bt+Ot+Dt+Mt+jt+Ft+Vt+qt+It+" />",ln=Qt+Q+'" '+Rt+Pt+Ht+Bt+Ot+Dt+Mt+Ft+Vt+qt+It+jt+" />",cn=Qt+G+'" '+Rt+Pt+Ht+Bt+Ot+Dt+Mt+Ft+Vt+qt+It+jt+" />",hn=Qt+J+'" '+Rt+Pt+Ht+Bt+Ot+Dt+Mt+Ft+Vt+qt+It+jt+" />",pn=Qt+Y+'" '+Rt+Pt+Ht+Ot+_t+Ft+Vt+qt+It+" />",dn=Qt+Z+'" '+Rt+Pt+Ht+Ot+Mt+_t+Ft+Vt+qt+It+" />",vn=Qt+et+'" '+Rt+Pt+Ht+" />",mn="<"+tt+" "+Rt+Pt+Bt+Ot+Dt+Mt+Ft+Vt+qt+It+">"+Ht+"</"+tt+">",gn=zt+"<"+nt+" "+Rt+Pt+qt+Ft+Vt+It+"></"+nt+">"+Ut,yn=Gt+en+'" '+Rt+Pt+Ht+Ft+Vt+qt+It+">"+Xt+"</"+p+">",bn=zt+Gt+p+'" '+Rt+Pt+Ht+qt+Dt+tn+Mt+" "+nn+'"'+v+'"'+Ft+Vt+It+"><i "+bt+'="'+D+'"></i></'+p+">"+Ut,wn=zt+Gt+p+'" '+Rt+Pt+Ht+qt+Dt+tn+Mt+" "+nn+'"'+m+'"'+Ft+Vt+It+"><i "+bt+'="'+P+'"></i></'+p+">"+Ut,En=zt+Gt+p+'" '+Rt+Pt+Ht+qt+Dt+tn+Mt+" "+nn+'"'+g+'"'+Ft+Vt+It+"><i "+bt+'="'+H+'"></i></'+p+">"+Ut,Sn={widget:gn,plain:un,text:an,password:fn,email:ln,url:cn,number:hn,radio:pn,checkbox:dn,hidden:vn,textarea:mn,button:yn,reset:yn,submit:yn,date:bn,time:wn,datetime:En},xn=function(t,n,r,i,s,o,u,a,f){var l=s?" "+s:"",c=a?" "+x:"",h=typeof n=="string"&&n.length>0?" formattime-"+n:"";return i||(t==="date"?i="%x":t==="time"?i="%X":i="%x %X"),e.use(N+C+"datetimepicker"),j+"value"+h+l+c+'" data-for="'+f+'"'+l+o+u+">"+e.Date.format(r,{format:i})+F},Tn={date:!0,time:!0,datetime:!0},Nn={text:!0,number:!0,password:!0,textarea:!0,email:!0,url:!0},Cn={button:!0,submit:!0,reset:!0},kn={radio:!0,checkbox:!0},Ln=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,An=function(t,n){return t.replace?t.replace(Ln,function(t,r){return e.Lang.isUndefined(n[r])?"":n[r]}):t};n=e.ITSAFormElement={},n.getElement=function(t,r,i){var s,o,u,a;i=i||e.guid(),r=r||{},o=typeof t=="function"&&t.NAME,typeof t=="string"&&(t=t.toLowerCase()),s={type:t,nodeid:i,config:r,name:r.name,html:n._renderedElement(o?t.NAME:t,r,i,o)};if(o){u=t;try{a=s.widget=new u(r.widgetconfig),t.NAME===k+"Base"?e.use(N+C+k+T,function(){a.renderOnAvailable("#"+i)}):e.use(N+C+l+T,function(){a.renderOnAvailable("#"+i)})}catch(f){e.fire(L,f)}}return s},n._renderedElement=function(t,n,r,i){var s=e.merge(n),u=typeof s[xt]===A?s[xt]:!1,a=typeof s[Lt]===A?s[Lt]:!0,h=typeof s[ut]===A?s[ut]:!1,v=typeof s[S]===A?s[S]:!1,m=n.tooltip,T=n.tooltipinvalid,k=n.nossl,L=n.onlyssl,O=n.digits,M=n[vt],_=n[E],D=n[Tt],P=n[yt],H=B,q=Tn[t],J,Z,nt,it,Et,St,Ot,Mt,_t,Dt,Pt,Ht;return P&&(H+=" "+P),_&&(H+=" data-"+E+'="true"'),s[yt]=H,m&&(m=m.replace(/"/g,"''"),s[yt]+=' data-content="'+m+'" data-contentvalid="'+m+'"'),T&&typeof T=="string"&&T.length>0&&(s[yt]+=' data-contentinvalid="'+T.replace(/"/g,"''")+'"'),n[ot]&&(s[yt]+=" data-"+ot+'="true"'),n[dt]&&(s[dt]=" "+dt+'="'+s[dt]+'"'),St=typeof n[et]===A?n[et]:!1,Ot=typeof s[f]===A?s[f]:!1,s[et]=St?" "+et+'="'+et+'"':"",s[f]=Ot?" "+f+'="'+f+'"':"",i?(s[yt]+=' data-type="'+t+'"',s[bt]=' class="'+(n[Yt]||"")+" "+c+(v?" "+x:"")+'"',n[rt]&&(s[Nt]=s[Nt]||"",s[Nt]+=" data-"+l+rt+'="true"'),s[Lt]=a?" data-"+Lt+'="true"':"",t==="slider"&&(s[D?Ct:kt]=j+"value formatslider-"+n.name+(n[Yt]?" "+n[Yt]:"")+'" data-for="'+r+'"'+s[et]+s[f]+">"+M+F),t=l):(Mt=!n["remove"+pt]&&(typeof s[pt]===A?s[pt]:t===K),Pt=typeof s[ct]===A?s[ct]:!1,s[Lt]=a?" data-"+Lt+'="true"':"",s[pt]=Mt?" "+pt+'="'+pt+'"':"",s[ct]=Pt?" "+ct+'="'+ct+'"':"",n[mt]&&(s[mt]=" "+mt+'="'+s[mt]+'"'),n[gt]&&(s[gt]=" "+gt+'="'+s[gt]+'"'),t!==tt&&t!==st&&M&&(s[vt]=" "+vt+'="'+s[vt]+'"'),t===Q?s[gt]=" "+gt+'="'+I+'"':t===G?typeof k===A&&k?s[gt]=" "+gt+'="'+R+'"':typeof L===A&&L?s[gt]=" "+gt+'="'+U+'"':s[gt]=" "+gt+'="'+z+'"':t===at?s[gt]=" "+gt+'="'+(typeof O===A&&O?X:W)+'"':kn[t]?(Et=t===Y?ft:lt,_t=typeof s[ht]===A?s[ht]:!1,s[ht]=_t?" "+ht+'="'+ht+'"':""):Cn[t]?(delete s[rt],Dt=!0,s[$t]=t,s[yt]+=" data-"+p+$t+'="'+(n[p+$t]||t)+'"',nt=n.primary,Z=Ot,n[At]&&(s[yt]+=" data-"+At+'="true"',e.use(N+"css"+C+"-animatespin")),n[wt]||(s[wt]=M||t),s[vt]=" "+vt+'="'+(n[vt]||e.Escape.html(s[wt]))+'"'):q&&(e.use(N+"css"+C+"-base",N+"css"+C+"-"+g),o.isDate(M)||(M=new Date),Dt=!0,Z=Ot,s[vt]=' value="'+M.getTime()+'"',s[yt]+=" data-"+g+'picker="true"',s[D?Ct:kt]=xn(t,n.name||"",M,s.format,n[Yt],s[et],s[f],v,r)),n.removepattern&&s[gt]&&(s[yt]+=" data-"+gt+"="+s[gt].substr(9),delete s[gt]),h&&Nn[t]&&(s[yt]+=" data-"+
ut+'="true"'),(n[Yt]||Dt||v||q)&&(s[bt]=' class="'+(q?"":n[Yt]||"")+(Dt?" "+d:"")+(q?y:"")+(Z?" "+b:"")+(nt?" "+w:"")+(v?" "+x:"")+'"')),it=Sn[t]||on,s[rt]&&(Et?(s[rt]='<span class="formatlabel">'+s[rt]+F,J=' class="'+Et+(n[Zt]?" "+n[Zt]:"")+'"',it=V+'{id}"'+qt+Wt+J+">"+(u?it+"{label}":"{label}"+it)+$):(J=n[Zt]?' class="'+n[Zt]+'"':"",Ht=(q?"<"+rt:V+'{id}"')+qt+Wt+J+">{label}"+$,u?it+=Ht:it=Ht+it)),s.id=r,An(it,s)},n.tooltipReadyPromise=function(){return n._tooltipreadypromise||(n._tooltipreadypromise=new e.Promise(function(t,n){e.use(N+"-tipsy",N+C+l+T,function(){r=(new e.Tipsy({placement:"right",selector:'[data-formelement][data-content]:not([data-valid="false"])',showOn:["touchstart","focus"],hideOn:["touchend","blur","keypress"]})).render(),i=(new e.Tipsy({placement:"right",selector:'[data-formelement][data-content][data-valid="false"]',showOn:["touchstart","focus"],hideOn:["touchend","blur","keypress"]})).render(),r.get("boundingBox").addClass("tipsy-formelement"),i.get("boundingBox").addClass("tipsy-formelement-invalid"),e.batch(r.renderPromise(),i.renderPromise()).then(t,n)})})),n._tooltipreadypromise},e.later(500,null,n.tooltipReadyPromise),u.delegate("focus",function(t){var n=t.target,r=n.getAttribute(yt+"-"+ut)==="true",i;!r&&n.test("input")&&t.preventDefault(),i=n.getData(a),e.ITSAFormElement._activeNode=n,i?n.clearData(a):r?n.select():(n.set("selectionStart",n.get("value").length),n.set("scrollTop",999999))},function(e,t){var n=t.target;return e===n&&n.test("input[type=text],input[type=password],input[type=url],input[type=email],textarea")}),u.delegate("mousedown",function(t){var n=t.target;e.ITSAFormElement._activeNode!==n&&n.setData(a,!0)},function(e,t){var n=t.target;return e===n&&n.test("input[type=text],input[type=password],input[type=url],input[type=email],textarea")}),s.each([v,m,g],function(t){var n={on:function(e,n,r){n._handle=e.on(M,function(e){var n=e.target;n&&n.get("tagName")!=="BUTTON"&&(n=n.get("parentNode"),e.target=n),n&&n.getAttribute(yt+"-"+g)===t&&r.fire(e)})},detach:function(e,t){t._handle.detach()}};n.delegate=n.on,n.detachDelegate=n.detach,e.Event.define(t+O+M,n)}),s.each([Jt,Kt],function(t){var n={on:function(e,n,r){n._handle=e.on(M,function(e){var n=e.target;n&&n.get("tagName")!=="BUTTON"&&(n=n.get("parentNode"),e.target=n),n&&(n.getAttribute(rn)===t||n.getAttribute(rn)===p&&n.getAttribute(sn)===t)&&r.fire(e)})},detach:function(e,t){t._handle.detach()}};n.delegate=n.on,n.detachDelegate=n.detach,e.Event.define(t+":"+M,n)})},"@VERSION@",{requires:["yui-base","node-core","node-event-delegate","datatype-date-format","event-base","event-synthetic","yui-later","promise","event-tap","event-custom","escape"],skinnable:!0});
