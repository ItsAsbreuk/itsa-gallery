YUI.add("gallery-itsawidgetrenderpromise",function(e,t){"use strict";var n=2e4,r=1e3;e.Widget.prototype.renderOnAvailablePromise=function(t,n){var i=this,s,o=n&&n.timeout,u=n&&n.promisetype,a=n&&n.stayalive&&typeof n.stayalive=="boolean"&&n.stayalive,f=n&&n.stayalivetimer||r;return i.nodeAvailablePromise=new e.Promise(function(e){t||(i.render(),e())}),t&&(e.use("gallery-itsanodepromise",function(){i.nodeAvailablePromise=e.Node.availablePromise(t,o).then(e.bind(i.render,i,t)).then(function(){return o=o||0,u==="afterrender"?i.renderPromise(o):u==="afterready"?i.readyPromise(o):!0})}),a&&(s=e.later(f,null,function(){i.nodeAvailablePromise.getStatus()!=="pending"&&!e.one(t)&&(s.cancel(),i.nodeAvailablePromise=i.renderOnAvailablePromise(t,n))},null,!0))),i.nodeAvailablePromise},e.Widget.prototype.renderPromise=function(t){var r=this;return r._renderPromise||(r._renderPromise=new e.Promise(function(i,s){r.after("render",function(){i()}),r.get("rendered")&&i(),t!==0&&e.later(t||n,null,function(){var e="renderPromise is rejected by timeout of "+(t||n)+" ms";s(new Error(e))})})),r._renderPromise},e.Widget.prototype.promiseBeforeReady=function(){return new e.Promise(function(e){e()})},e.Widget.prototype.readyPromise=function(t){var n=this,r;return n._readyPromise||(r=[],r.push(n.renderPromise(t)),r.push(n.promiseBeforeReady(t)),n._readyPromise=e.batch.apply(e,r)),n._readyPromise}},"@VERSION@",{requires:["yui-base","yui-later","widget","promise"]});
