YUI.add("gallery-itsaviewmodelpanel",function(e,t){var n=e.ClassNameManager.getClassName,r=e.Lang,i="yui3-itsaformelement",s="focusable",o="closeclick",u="submitclick",a="saveclick",f="resetclick",l="addclick",c="destroyclick";e.ITSAViewModelPanel=e.Base.create("itsaviewmodelpanel",e.ITSAViewModel,[e.WidgetPosition,e.WidgetStdMod,e.WidgetAutohide,e.WidgetButtons,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],{initializer:function(){var e=this,t=e.get("title");t&&e.set("headerContent",t),e.set("bodyContent","")},_bindViewUI:function(){var t=this,n=t._eventhandlers,r=t.get("staticPosition"),i=t.get("boundingBox"),s=t.view,o;r&&(i.addClass("itsa-staticposition"),i.setStyle("position","")),t.get("dragable")&&!r&&(o=t.getStdModNode(e.WidgetStdMod.HEADER),e.use("dd-plugin",function(e){i.plug(e.Plugin.Drag),o&&i.dd.addHandle(".yui3-widget-hd")})),t.constructor.superclass._bindViewUI.apply(t),n.push(s.after("model:destroy",function(){t.hide()})),n.push(t.after("staticPositionChange",function(e){var t=e.newVal;i.toggleClass("itsa-staticposition",t),i.setStyle("position","")})),n.push(t.after("dragableChange",function(n){var r=n.newVal;r&&!t.get("staticPosition")?(o=t.getStdModNode(e.WidgetStdMod.HEADER),e.use("dd-plugin",function(e){i.plug(e.Plugin.Drag),o&&i.dd.addHandle(".yui3-widget-hd")})):i.unplug("dd")}))},_addModel:function(t){var n=this,r=n.get("model"),i,s,o,u;r&&(t.buttonNode=t.target,t.target=r,t.type=l,i=n.get("newModelClass"),s=e.clone(n.get("newModelDefinition")),u=new i(s),u.sync=r.sync,r.hasPlugin("itsaeditmodel")&&(o=e.clone(r.itsaeditmodel.getAttrs()),e.use("gallery-itsaeditmodel",function(e){u.plug(e.Plugin.ITSAEditModel,o)})),t.newModel=u,r.fire(l,t))},_closeModel:function(e){var t=this,n=t.get("model");n&&(e.buttonNode=e.target,e.target=n,e.type=o,t.hide(),n.fire(o,e))},_destroyModel:function(t){var n=this,r=n.get("model");r&&(t.buttonNode=t.target,t.target=r,t.type=c,syncOptions=n.get("syncOptions"),options=e.merge({remove:!0},syncOptions.destroy||{}),t.promise=r.destroyPromise(options),r.fire(c,t))},_resetModel:function(e){var t=this,n=t.get("model");n&&(button=e.target,button.focus(),e.buttonNode=button,e.target=n,e.type=f,n.fire(f,e))},_saveModel:function(e){var t=this,n=t.get("model");n&&(button=e.target,button.focus(),e.buttonNode=button,e.target=n,e.type=a,syncOptions=t.get("syncOptions"),options=syncOptions.save||{},e.promise=n.savePromise(options),n.fire(a,e))},_submitModel:function(e){var t=this,n=t.get("model");n&&(button=e.target,button.focus(),e.buttonNode=button,e.target=n,e.type=u,syncOptions=t.get("syncOptions"),options=syncOptions.submit||{},e.promise=n.submitPromise(options),n.fire(u,e))},_getViewContainer:function(){return this.getStdModNode(e.WidgetStdMod.BODY)},_widgetRenderer:function(){var e=this;e.constructor.superclass.constructor.superclass.renderer.apply(e)},_setZIndex:function(e){return typeof e=="string"&&(e=parseInt(e,10)),typeof e!="number"&&(e=1),e<1&&(e=1),e},BUTTONS:{add:{label:"Add",action:"_addModel",template:'<button type="button" />',classNames:[i+"-add",s]},close:{label:"Close",action:"_closeModel",section:"header",template:'<button type="button" />',classNames:n("button","close")},destroy:{label:"Destroy",action:"_destroyModel",template:'<button type="button" />',classNames:[i+"-destroy",s]},reset:{label:"Reset",action:"_resetModel",template:'<button type="button" />',classNames:[i+"-reset",s]},save:{label:"Save",action:"_saveModel",template:'<button type="button" />',classNames:[i+"-save",s]},submit:{label:"Submit",action:"_submitModel",template:'<button type="button" />',classNames:[i+"-submit",s]}}},{ATTRS:{buttons:{value:["close"]},dragable:{value:!1,validator:function(e){return typeof e=="boolean"}},title:{value:null,validator:function(e){return typeof e=="string"}},newModelDefinition:{value:{},validator:function(e){return r.isObject(e)}},newModelClass:{value:e.Model},staticPosition:{value:!1,validator:function(e){return typeof e=="boolean"}},syncOptions:{value:{},validator:function(e){return r.isObject(e)}},zIndex:{value:1,setter:"_setZIndex"}}})},"@VERSION@",{requires:["base-build","classnamemanager","pluginhost-base","gallery-itsaviewmodel","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"],skinnable:!0});
