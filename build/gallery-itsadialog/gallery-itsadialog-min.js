YUI.add("gallery-itsadialog",function(e,t){"use strict";function p(){p.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=5e3,s="model",o="title",u="footer",a="info",f="warn",l="error",c="value",h="itsa-dialog";p.NAME="itsadialog",e.extend(p,e.ITSAMessageViewer),p.prototype.initializer=function(){var t=this;t._eventhandlers=[],e.later(i,t,t.renderPromise)},p.prototype.renderPromise=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel").then(e.bind(t._renderPanels,t)))},p.prototype._renderPanels=function(){var t=this,n={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:200,dragable:!0,maxWidth:550,className:h},r=t._eventhandlers,i;i=t.panels={},i[a]=new e.ITSAViewModelPanel(n),i[f]=new e.ITSAViewModelPanel(n),i[l]=new e.ITSAViewModelPanel(n),r.push(i[a].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),r.push(i[f].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),r.push(i[l].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),i[a].render(),i[f].render(),i[l].render()},p.prototype.viewMessage=function(t){var n=this;return n.renderPromise().then(function(){return new e.Promise(function(e){var i=t.get("level"),c=t.get("primaryButton"),h=n.panels,p=h[i],d=t.get("noButtons"),v=t.get(u),m=/btn_/.test(v),g,y;h[a].hide(),h[f].hide(),console.log("check noButtons "+d),console.log("GOING TO HIDE ALL PANELS "+t.get("title")+" needs to show"),h[l].hide(),p=h[i],p.set(o+"Right",m||d?"":null),p.set("template",t.get("message")),p.set(u+"Template",d?null:v),!d&&v&&r.isValue(c)&&(g=p.get("footerView"),y=typeof c=="boolean"&&!c,y?g.removePrimaryButton():g.setPrimaryButton(c)),p.set(s,t),p.set(o,t.get(o)),t.promise.then(null,function(){return!0}).then(function(){t.UIToModel(),e(t)}),console.log("SHOWING PANEL "+i),p.show(),console.log("PANEL "+i+" is shown "+p.get("visible"))})})},p.prototype.resurrect=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e];n&&n.show()})},p.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[a].destroy(),e[f].destroy(),e[l].destroy()},p.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},e.Global.ITSADialog||(e.Global.ITSADialog=new p({handleAnonymous:!0})),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
