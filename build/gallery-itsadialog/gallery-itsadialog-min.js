YUI.add("gallery-itsadialog",function(e,t){"use strict";function c(){c.superclass.constructor.apply(this,arguments)}var n=e.Array,r=5e3,i="model",s="title",o="footer",u="info",a="warn",f="error",l="value";c.NAME="itsadialog",e.extend(c,e.ITSAMessageViewer),c.prototype.initializer=function(){var t=this;t._eventhandlers=[],e.later(r,t,t.renderPromise)},c.prototype.renderPromise=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel").then(e.bind(t._renderPanels,t)))},c.prototype._renderPanels=function(){var t=this,n={visible:!1,centered:!0,modal:!0,minWidth:200,dragable:!0},r=t._eventhandlers,s;s=t.panels={},s[u]=new e.ITSAViewModelPanel(n),s[a]=new e.ITSAViewModelPanel(n),s[f]=new e.ITSAViewModelPanel(n),r.push(s[u].on("*:hide",function(e){var t=e.target,n=t.get(i),r=e.buttonNode,s=r&&r.get(l);n.resolvePromise(s)})),r.push(s[a].on("*:hide",function(e){var t=e.target,n=t.get(i),r=e.buttonNode,s=r&&r.get(l);n.resolvePromise(s)})),r.push(s[f].on("*:hide",function(e){var t=e.target,n=t.get(i),r=e.buttonNode,s=r&&r.get(l);n.resolvePromise(s)})),s[u].render(),s[a].render(),s[f].render()},c.prototype.viewMessage=function(t){var n=this;return n.renderPromise().then(function(){return new e.Promise(function(e,r){var l=t.get("level"),c=t.get("primarybutton"),h=n.panels,p=h[l],d=t.get(o),v=/btn_/.test(d),m;h[u].hide(),h[a].hide(),h[f].hide(),p=h[l],p.set(s+"Right",v?"":null),p.set("template",t.get("message")),p.set(o+"Template",d),d&&c&&(m=p.get("footerView"),m.setPrimaryButton(c)),p.set(i,t),p.set(s,t.get(s)),p.once("*:hide",function(){e()}),p.show()})})},c.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[u].destroy(),e[a].destroy(),e[f].destroy()},c.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},YUI.Env.ITSADialog=new c({handleAnonymous:!0})},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"]});
