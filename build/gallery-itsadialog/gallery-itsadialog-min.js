YUI.add("gallery-itsadialog",function(e,t){"use strict";function d(){d.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=5e3,s="model",o="title",u="footer",a="info",f="warn",l="error",c="value",h="itsa-dialog",p="escape:hide";d.NAME="itsadialog",e.extend(d,e.ITSAMessageViewer),d.prototype.initializer=function(){var t=this;t._eventhandlers=[],e.later(i,t,t.renderPromise)},d.prototype.renderPromise=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel").then(e.bind(t._renderPanels,t)))},d.prototype._renderPanels=function(){var t=this,n={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:200,dragable:!0,maxWidth:550,className:h},r=t._eventhandlers,i;i=t.panels={},i[a]=new e.ITSAViewModelPanel(n),i[f]=new e.ITSAViewModelPanel(n),i[l]=new e.ITSAViewModelPanel(n),r.push(i[a].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=e.type===p||o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),r.push(i[f].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),r.push(i[l].after("*:hide",function(e){var t=e.target,n=t.get(s),r=e.buttonNode,i=r&&r.get(c),o=n.get("rejectButton"),u=o&&(new RegExp("btn_"+i+"$")).test(o),a={itsamessage:n,button:i};u?n.rejectPromise(a):n.resolvePromise(a)})),i[a].render(),i[f].render(),i[l].render()},d.prototype.viewMessage=function(t){var n=this;return n.renderPromise().then(function(){return new e.Promise(function(e){var i=t.get("level"),c=t.get("primaryButton"),h=t.get("rejectButton"),p=n.panels,d=p[i],v=t.get("noButtons"),m=t.get(u),g=/btn_/.test(m),y,b;p[a].hide(),p[f].hide(),p[l].hide(),d=p[i],d.set("closeButton",!g&&!v),d.set("closableByEscape",typeof h=="string"),d.set(u+"Template",v?null:m),!v&&m&&r.isValue(c)&&(y=d.get("footerView"),b=typeof c=="boolean"&&!c,b?y.removePrimaryButton():y.setPrimaryButton(c)),d.set(o,t.get(o)),d.set(s,t),d.set("template",t.get("message")),t.promise.then(null,function(){return!0}).then(function(){t.UIToModel(),e(t)}),d.show()})})},d.prototype.resurrect=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e];n&&n.show()})},d.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[a].destroy(),e[f].destroy(),e[l].destroy()},d.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},e.Global.ITSADialog||(e.Global.ITSADialog=new d({handleAnonymous:!0})),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
