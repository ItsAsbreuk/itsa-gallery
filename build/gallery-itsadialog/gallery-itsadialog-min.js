YUI.add("gallery-itsadialog",function(e,t){"use strict";function L(){L.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=5e3,s='<i class="itsa-dialogicon {icon}"></i>',o="suspended",u="boolean",a="model",f="title",l="footer",c="info",h="warn",p="error",d="value",v="uppercase",m="lowercase",g="capitalize",y="itsa-dialog",b="escape:hide",w="visible",E="Transform",S="button"+E,x="label"+E,T="up",N=y+c+T,C=y+h+T,k=y+p+T;L.NAME="itsadialog",e.ITSADialogClass=e.extend(L,e.ITSAMessageViewer,{},{ATTRS:{buttonTransform:{value:null,validator:function(e){return e===null||e===v||e===m||e===g}},labelTransform:{value:null,validator:function(e){return e===null||e===v||e===m||e===g}},showIcon:{value:!0,validator:function(e){return typeof e===u}}}}),L.prototype.initializer=function(){var t=this;t._eventhandlers=[],t._body=e.one("body"),e.later(i,t,t.renderPromise)},L.prototype.renderPromise=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel","gallerycss-itsa-dialog").then(e.bind(t._renderPanels,t)))},L.prototype._renderPanels=function(){var t=this,n={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:280,dragable:!0,maxWidth:550,buttonTransform:t.get(S),labelTransform:t.get(x),className:y},r=t._eventhandlers,i,s,o,u;i=t.panels={},s=i[c]=new e.ITSAViewModelPanel(n),o=i[h]=new e.ITSAViewModelPanel(n),u=i[p]=new e.ITSAViewModelPanel(n),r.push(s.after("*:hide",function(e){var t=e.target,n=t.get(a),r=e.buttonNode,i=r&&r.get(d),s=n.rejectButton,o=r&&r.hasClass("itsa-panelclosebtn")&&(i="closebutton"),u=e.type===b||o||s&&(new RegExp("btn_"+i+"$")).test(s);u?n.reject(i):n.UIToModel()&&n._set("button",i)&&n.resolve(n.toJSON())})),r.push(o.after("*:hide",function(e){var t=e.target,n=t.get(a),r=e.buttonNode,i=r&&r.get(d),s=n.rejectButton,o=r.hasClass("itsa-panelclosebtn")&&(i="closebutton"),u=e.type===b||o||s&&(new RegExp("btn_"+i+"$")).test(s);u?n.reject(i):n.UIToModel()&&n._set("button",i)&&n.resolve(n.toJSON())})),r.push(u.after("*:hide",function(e){var t=e.target,n=t.get(a),r=e.buttonNode,i=r&&r.get(d),s=n.rejectButton,o=r.hasClass("itsa-panelclosebtn")&&(i="closebutton"),u=e.type===b||o||s&&(new RegExp("btn_"+i+"$")).test(s);u?n.reject(i):n.UIToModel()&&n._set("button",i)&&n.resolve(n.toJSON())})),r.push(t.on(x+"Change",function(e){var t=e.newVal;s.set(x,t),o.set(x,t),u.set(x,t)})),r.push(t.on(S+"Change",function(e){var t=e.newVal;s.set(S,t),o.set(S,t),u.set(S,t)})),r.push(s.on(w+"Change",function(e){t._body.toggleClass(N,e.newVal)})),r.push(o.on(w+"Change",function(e){t._body.toggleClass(C,e.newVal)})),r.push(u.on(w+"Change",function(e){t._body.toggleClass(k,e.newVal)})),s.render(),o.render(),u.render()},L.prototype.viewMessage=function(t){var n=this;return n.renderPromise().then(function(){return new e.Promise(function(r){var i=n.panels,s=i[t.level];n._showPanel(s,t),t.promise.then(function(){return s.set(w,!1,{silent:!0})},function(){return s.set(w,!1,{silent:!0})}).then(r).then(null,function(t){e.soon(function(){throw t})})})})},L.prototype._showPanel=function(e,t){var n=this,i=t.primaryButton,c=t.rejectButton,h=t.buttonLabels,p=t.hotKeys,d=t.customBtns,v=t.noButtons,m=typeof t.noHideOnSubmit===u?t.noHideOnSubmit:!1,g=t[l],y=/btn_/.test(g),b=t.icon,w=b&&n.get("showIcon"),E,S;e.set("noHideOnSubmit",m),e.removeButtonLabel(),e.removeCustomBtn(),e.removeHotKey(),e.set("closeButton",t.closeButton||!y&&!v),e.set("closableByEscape",typeof c=="string"),e.set(l+"Template",v?null:g),h&&e.setButtonLabels(h),p&&e.setHotKeys(p),d&&e.addCustomBtns(d),!v&&g&&r.isValue(i)&&(E=e.get("footerView"),S=typeof i=="boolean"&&!i,S?E.removePrimaryButton():E.setPrimaryButton(i)),e.set(f,t[f]),e.set(a,t),e._body.toggleClass("itsa-hasicon",w),e.set("template",(w?r.sub(s,{icon:b}):"")+t.message),t[o]||e.show()},L.prototype.resurrect=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e.level];n&&n.set(w,!0,{silent:!0})})},L.prototype.suspend=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e.level];n&&n.set(w,!1,{silent:!0})})},L.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[c].destroy(),e[h].destroy(),e[p].destroy()},L.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},e.Global.ITSADialog||(e.Global.ITSADialog=new L),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
