YUI.add("gallery-itsadialog",function(e,t){"use strict";function q(){q.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=335,s=5e3,o='<i class="itsa-dialogicon {icon}"></i>',u="_suspended",a="boolean",f="string",l="number",c="model",h="title",p="footer",d="info",v="warn",m="error",g="value",y="uppercase",b="lowercase",w="capitalize",E="fadeDelay",S="itsa",x="dialog",T=S+x,N=S+"-"+x,C="escape:hide",k="visible",L="itsa-panelclosebtn",A="closebutton",O="btn_",M="button",_="Change",D="Transform",P=M+D,H="label"+D,B="up",j=N+d+B,F=N+v+B,I=N+m+B;q.NAME="itsadialog",e.ITSADialogClass=e.extend(q,e.ITSAMessageViewer,{},{ATTRS:{buttonTransform:{value:null,validator:function(e){return e===null||e===y||e===b||e===w}},fadeDelay:{value:.1,validator:function(e){return typeof e===l&&e>=0}},labelTransform:{value:null,validator:function(e){return e===null||e===y||e===b||e===w}},showIcon:{value:!0,validator:function(e){return typeof e===a}}}}),q.prototype.initializer=function(){var t=this;t._eventhandlers=[],t._body=e.one("body"),t._panels={},t._viewName=T,e.later(s,t,t.isRendered)},q.prototype.isRendered=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel","gallerycss-itsa-dialog","gallerycss-itsa-form").then(e.bind(t._renderPanels,t)))},q.prototype.resurrect=function(e){var t=this;t.isRendered().then(function(){var n=t._panels[e.level];n&&n.set(k,!0,{transconfig:{duration:t.get(E)}})})},q.prototype.suspend=function(e){var t=this;t.isRendered().then(function(){var n=t._panels[e.level];n&&n.set(k,!1)})},q.prototype.viewMessage=function(t){var n=this;return n.isRendered().then(function(){return new e.Promise(function(r){var i=n._panels,s=i[t.level];n._showPanel(s,t),t._promise.then(function(){return s.set(k,!1)},function(){return s.set(k,!1)}).then(r).then(null,function(t){e.soon(function(){throw t})})})})},q.prototype.destructor=function(){var e=this._panels;this._clearEventhandlers(),e[d].destroy(),e[v].destroy(),e[m].destroy()},q.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},q.prototype._renderPanels=function(){var t=this,r={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:i,dragable:!0,maxWidth:550,buttonTransform:t.get(P),labelTransform:t.get(H),className:N},s=t._panels,o=t._eventhandlers,u,a,f;u=s[d]=new e.ITSAViewModelPanel(r),a=s[v]=new e.ITSAViewModelPanel(r),f=s[m]=new e.ITSAViewModelPanel(r),n.each([d,v,m],function(e){o.push(s[e].after("*:hide",function(e){var t=e.target,n=t.get(c),r=e.buttonNode,i=r&&r.get(g),s=n.rejectButton,o=r&&r.hasClass(L)&&(i=A),u=e.type===C||o||s&&(new RegExp(O+i+"$")).test(s);n.UIToModel(),n._set(M,i),u?n.reject(i):n.resolve(n.toJSON())}))}),o.push(t.on(H+_,function(e){var t=e.newVal;u.set(H,t),a.set(H,t),f.set(H,t)})),o.push(t.on(P+_,function(e){var t=e.newVal;u.set(P,t),a.set(P,t),f.set(P,t)})),o.push(u.on(k+_,function(e){t._body.toggleClass(j,e.newVal)})),o.push(a.on(k+_,function(e){t._body.toggleClass(F,e.newVal)})),o.push(f.on(k+_,function(e){t._body.toggleClass(I,e.newVal)})),u.render(),a.render(),f.render()},q.prototype._showPanel=function(e,t){var n=this,i=t.primaryButton,s=t.rejectButton,l=t.buttonLabels,d=t.hotKeys,v=t.customBtns,m=t.noButtons,g=t.closeButton,y=typeof t.noHideOnSubmit===a?t.noHideOnSubmit:!1,b=t[p],w=/btn_/.test(b),S=t.icon,x=S&&n.get("showIcon"),T,N;e.set("noHideOnSubmit",y),e.removeButtonLabel(),e.removeCustomBtn(),e.removeHotKey(),e.set("closeButton",typeof g===a?g:!w&&!m),e.set("closableByEscape",typeof s===f),e.set(p+"Template",m?null:b),l&&e.setButtonLabels(l),d&&e.setHotKeys(d),v&&e.addCustomBtns(v),!m&&b&&r.isValue(i)&&(T=e.get("footerView"),N=typeof i=="boolean"&&!i,N?T.removePrimaryButton():T.setPrimaryButton(i)),e.set(h,t[h]),e.set(c,t),e._body.toggleClass("itsa-hasicon",x),e.set("template",(x?r.sub(o,{icon:S}):"")+t.message),t[u]||e.show({duration:n.get(E)})},e.Global.ITSADialog||(e.Global.ITSADialog=new q),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","node-core","event-custom-base","yui-later","timers","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
