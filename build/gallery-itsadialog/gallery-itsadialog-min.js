YUI.add("gallery-itsadialog",function(e,t){"use strict";function H(){H.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=335,s=5e3,o='<i class="itsa-dialogicon {icon}"></i>',u="_suspended",a="boolean",f="string",l="model",c="title",h="footer",p="info",d="warn",v="error",m="value",g="uppercase",y="lowercase",b="capitalize",w="itsa-dialog",E="escape:hide",S="visible",x="itsa-panelclosebtn",T="closebutton",N="btn_",C="button",k="Change",L="Transform",A=C+L,O="label"+L,M="up",_=w+p+M,D=w+d+M,P=w+v+M;H.NAME="itsadialog",e.ITSADialogClass=e.extend(H,e.ITSAMessageViewer,{},{ATTRS:{buttonTransform:{value:null,validator:function(e){return e===null||e===g||e===y||e===b}},labelTransform:{value:null,validator:function(e){return e===null||e===g||e===y||e===b}},showIcon:{value:!0,validator:function(e){return typeof e===a}}}}),H.prototype.initializer=function(){var t=this;t._eventhandlers=[],t._body=e.one("body"),e.later(s,t,t.isRendered)},H.prototype.isRendered=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel","gallerycss-itsa-dialog","gallerycss-itsa-form").then(e.bind(t._renderPanels,t)))},H.prototype.resurrect=function(e){var t=this;t.isRendered().then(function(){var n=t.panels[e.level];n&&n.set(S,!0,{silent:!0})})},H.prototype.suspend=function(e){var t=this;t.isRendered().then(function(){var n=t.panels[e.level];n&&n.set(S,!1,{silent:!0})})},H.prototype.viewMessage=function(t){var n=this;return n.isRendered().then(function(){return new e.Promise(function(r){var i=n.panels,s=i[t.level];n._showPanel(s,t),t._promise.then(function(){return s.set(S,!1,{silent:!0})},function(){return s.set(S,!1,{silent:!0})}).then(r).then(null,function(t){e.soon(function(){throw t})})})})},H.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[p].destroy(),e[d].destroy(),e[v].destroy()},H.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},H.prototype._renderPanels=function(){var t=this,r={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:i,dragable:!0,maxWidth:550,buttonTransform:t.get(A),labelTransform:t.get(O),className:w},s=t._eventhandlers,o,u,a,f;o=t.panels={},u=o[p]=new e.ITSAViewModelPanel(r),a=o[d]=new e.ITSAViewModelPanel(r),f=o[v]=new e.ITSAViewModelPanel(r),n.each([p,d,v],function(e){s.push(o[e].after("*:hide",function(e){var t=e.target,n=t.get(l),r=e.buttonNode,i=r&&r.get(m),s=n.rejectButton,o=r&&r.hasClass(x)&&(i=T),u=e.type===E||o||s&&(new RegExp(N+i+"$")).test(s);n.UIToModel(),n._set(C,i),u?n.reject(i):n.resolve(n.toJSON())}))}),s.push(t.on(O+k,function(e){var t=e.newVal;u.set(O,t),a.set(O,t),f.set(O,t)})),s.push(t.on(A+k,function(e){var t=e.newVal;u.set(A,t),a.set(A,t),f.set(A,t)})),s.push(u.on(S+k,function(e){t._body.toggleClass(_,e.newVal)})),s.push(a.on(S+k,function(e){t._body.toggleClass(D,e.newVal)})),s.push(f.on(S+k,function(e){t._body.toggleClass(P,e.newVal)})),u.render(),a.render(),f.render()},H.prototype._showPanel=function(e,t){var n=this,i=t.primaryButton,s=t.rejectButton,p=t.buttonLabels,d=t.hotKeys,v=t.customBtns,m=t.noButtons,g=t.closeButton,y=typeof t.noHideOnSubmit===a?t.noHideOnSubmit:!1,b=t[h],w=/btn_/.test(b),E=t.icon,S=E&&n.get("showIcon"),x,T;e.set("noHideOnSubmit",y),e.removeButtonLabel(),e.removeCustomBtn(),e.removeHotKey(),e.set("closeButton",typeof g===a?g:!w&&!m),e.set("closableByEscape",typeof s===f),e.set(h+"Template",m?null:b),p&&e.setButtonLabels(p),d&&e.setHotKeys(d),v&&e.addCustomBtns(v),!m&&b&&r.isValue(i)&&(x=e.get("footerView"),T=typeof i=="boolean"&&!i,T?x.removePrimaryButton():x.setPrimaryButton(i)),e.set(c,t[c]),e.set(l,t),e._body.toggleClass("itsa-hasicon",S),e.set("template",(S?r.sub(o,{icon:E}):"")+t.message),t[u]||e.show()},e.Global.ITSADialog||(e.Global.ITSADialog=new H),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
