YUI.add("gallery-itsadialog",function(e,t){"use strict";function P(){P.superclass.constructor.apply(this,arguments)}var n=e.Array,r=e.Lang,i=5e3,s='<i class="itsa-dialogicon {icon}"></i>',o="suspended",u="boolean",a="string",f="model",l="title",c="footer",h="info",p="warn",d="error",v="value",m="uppercase",g="lowercase",y="capitalize",b="itsa-dialog",w="escape:hide",E="visible",S="itsa-panelclosebtn",x="closebutton",T="btn_",N="button",C="Change",k="Transform",L=N+k,A="label"+k,O="up",M=b+h+O,_=b+p+O,D=b+d+O;P.NAME="itsadialog",e.ITSADialogClass=e.extend(P,e.ITSAMessageViewer,{},{ATTRS:{buttonTransform:{value:null,validator:function(e){return e===null||e===m||e===g||e===y}},labelTransform:{value:null,validator:function(e){return e===null||e===m||e===g||e===y}},showIcon:{value:!0,validator:function(e){return typeof e===u}}}}),P.prototype.initializer=function(){var t=this;t._eventhandlers=[],t._body=e.one("body"),e.later(i,t,t.renderPromise)},P.prototype.renderPromise=function(){var t=this;return t._renderPromise||(t._renderPromise=e.usePromise("gallery-itsaviewmodelpanel","gallerycss-itsa-dialog").then(e.bind(t._renderPanels,t)))},P.prototype._renderPanels=function(){var t=this,r={visible:!1,centered:!0,modal:!0,editable:!0,minWidth:280,dragable:!0,maxWidth:550,buttonTransform:t.get(L),labelTransform:t.get(A),className:b},i=t._eventhandlers,s,o,u,a;s=t.panels={},o=s[h]=new e.ITSAViewModelPanel(r),u=s[p]=new e.ITSAViewModelPanel(r),a=s[d]=new e.ITSAViewModelPanel(r),n.each([h,p,d],function(e){i.push(s[e].after("*:hide",function(e){var t=e.target,n=t.get(f),r=e.buttonNode,i=r&&r.get(v),s=n.rejectButton,o=r&&r.hasClass(S)&&(i=x),u=e.type===w||o||s&&(new RegExp(T+i+"$")).test(s);u?n.reject(i):n.UIToModel()&&n._set(N,i)&&n.resolve(n.toJSON())}))}),i.push(t.on(A+C,function(e){var t=e.newVal;o.set(A,t),u.set(A,t),a.set(A,t)})),i.push(t.on(L+C,function(e){var t=e.newVal;o.set(L,t),u.set(L,t),a.set(L,t)})),i.push(o.on(E+C,function(e){t._body.toggleClass(M,e.newVal)})),i.push(u.on(E+C,function(e){t._body.toggleClass(_,e.newVal)})),i.push(a.on(E+C,function(e){t._body.toggleClass(D,e.newVal)})),o.render(),u.render(),a.render()},P.prototype.viewMessage=function(t){var n=this;return n.renderPromise().then(function(){return new e.Promise(function(r){var i=n.panels,s=i[t.level];n._showPanel(s,t),t.promise.then(function(){return s.set(E,!1,{silent:!0})},function(){return s.set(E,!1,{silent:!0})}).then(r).then(null,function(t){e.soon(function(){throw t})})})})},P.prototype._showPanel=function(e,t){var n=this,i=t.primaryButton,h=t.rejectButton,p=t.buttonLabels,d=t.hotKeys,v=t.customBtns,m=t.noButtons,g=t.closeButton,y=typeof t.noHideOnSubmit===u?t.noHideOnSubmit:!1,b=t[c],w=/btn_/.test(b),E=t.icon,S=E&&n.get("showIcon"),x,T;e.set("noHideOnSubmit",y),e.removeButtonLabel(),e.removeCustomBtn(),e.removeHotKey(),e.set("closeButton",typeof g===u?g:!w&&!m),e.set("closableByEscape",typeof h===a),e.set(c+"Template",m?null:b),p&&e.setButtonLabels(p),d&&e.setHotKeys(d),v&&e.addCustomBtns(v),!m&&b&&r.isValue(i)&&(x=e.get("footerView"),T=typeof i=="boolean"&&!i,T?x.removePrimaryButton():x.setPrimaryButton(i)),e.set(l,t[l]),e.set(f,t),e._body.toggleClass("itsa-hasicon",S),e.set("template",(S?r.sub(s,{icon:E}):"")+t.message),t[o]||e.show()},P.prototype.resurrect=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e.level];n&&n.set(E,!0,{silent:!0})})},P.prototype.suspend=function(e){var t=this;t.renderPromise().then(function(){var n=t.panels[e.level];n&&n.set(E,!1,{silent:!0})})},P.prototype.destructor=function(){var e=this.panels;this._clearEventhandlers(),e[h].destroy(),e[p].destroy(),e[d].destroy()},P.prototype._clearEventhandlers=function(){var e=this;n.each(e._eventhandlers,function(e){e.detach()})},e.Global.ITSADialog||(e.Global.ITSADialog=new P),e.ITSADialog=e.Global.ITSADialog},"@VERSION@",{requires:["yui-base","promise","event-custom-base","yui-later","oop","gallery-itsaviewmodelpanel","gallery-itsamodulesloadedpromise","gallery-itsamessageviewer"],skinnable:!0});
