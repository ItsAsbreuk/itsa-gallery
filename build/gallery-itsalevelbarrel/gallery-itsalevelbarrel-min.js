YUI.add("gallery-itsalevelbarrel",function(e,t){"use strict";function L(){L.superclass.constructor.apply(this,arguments)}var n=e.Lang,r=e.Array,i="label",s="value",o="maxValue",u="Change",a="className",f="olor",l="c"+f,c="C"+f,h="line"+c,p="barrel",d="background"+c,v="etails",m="d"+v,g="showD"+v,y=p+m,b="itsa-"+p+"-hidden",w="boundingBox",E="contentBox",S="level-indicator",x='<i class="itsaicon-dialog-info"></i>',T='<i class="itsaicon-dialog-error"></i>',N="1px 1px {color}, -1px 1px {color}, 1px -1px {color}, -1px -1px {color}",C='<button class="pure-button itsabutton-bordered itsabutton-onlyicon itsa-'+y+'-button {buttonvisible}">{'+m+"button}</button>"+'<div class="'+y+" {"+m+'class}"><div>{'+m+"}</div></div>"+'<div class="'+p+'label"><span>{label}</span></div>'+'<div class="'+p+'value"></div>'+'<div class="'+S+'"></div>',k="itsa-"+p+"-container";L.NAME="itsalevelbarrel",L.ATTRS={showDetails:{value:!1,validator:function(e){return typeof e=="boolean"}},details:{value:null,validator:function(e){return e===null||typeof e=="string"}},value:{value:0,validator:function(e){return typeof e=="number"}},maxValue:{value:100,validator:function(e){return typeof e=="number"}},className:{value:null,validator:function(e){return e===null||typeof e=="string"}},label:{value:null,validator:function(e){return e===null||typeof e=="string"}},color:{value:null,validator:function(e){return e===null||typeof e=="string"}},unity:{value:null,validator:function(e){return e===null||typeof e=="string"}},backgroundColor:{value:null,validator:function(e){return e===null||typeof e=="string"}},lineColor:{value:null,validator:function(e){return e===null||typeof e=="string"}}},e.ITSALevelBarrel=e.extend(L,e.Widget),L.prototype.initializer=function(){},L.prototype.renderUI=function(){var e=this,t=e.get(w),r=e.get(E),s=e.get(a),o=e.get(g),u=e.get(m)||"",f=e.get(l),c=e.get(d),p=e.get(h);t.addClass(k),s&&t.addClass(s),r.setHTML(n.sub(C,{label:e.get(i)||"",buttonvisible:u===""?b:"",detailsbutton:o?T:x,details:u,detailsclass:o?"":b})),f&&e._setColor({newVal:f}),c&&e._setBackgroundColor({newVal:c}),p&&e._setLineColor({newVal:p})},L.prototype.bindUI=function(){var t=this,n=t.get(E).one(".itsa-"+y+"-button"),r;r=t._eventhandlers=[],r.push(t.after([s+u,o+u],e.bind(t.syncUI,t))),r.push(t.after([l+u],e.bind(t._setColor,t))),r.push(t.after([h+u],e.bind(t._setLineColor,t))),r.push(t.after([d+u],e.bind(t._setBackgroundColor,t))),r.push(t.after([a+u],e.bind(t._changeClassName,t))),r.push(t.after([i+u],e.bind(t._changeLabel,t))),r.push(t.after([m+u],e.bind(t._changeDetails,t))),r.push(t.after([g+u],e.bind(t._changeShowDetails,t))),r.push(n.on("click",e.bind(t.toggleDetails,t)))},L.prototype.syncUI=function(){var e=this,t=e.get(E),n=t.one("."+S),r=e.get(s),i=e.get(o),u=Math.round(100*(i-r)/i),a=e.get("unity"),f=t.one(".barrelvalue");n.setStyle("top",u+"%"),f.setHTML(r+(a?'<span class="barrelunity">'+e.get("unity")+"</span>":""))},L.prototype.toggleDetails=function(){var e=this;e.set(g,!e.get(g))},L.prototype.destructor=function(){var e=this;e._clearEventhandlers()},L.prototype._changeDetails=function(e){var t=this,n=e.newVal||"",r=t.get(E),i=r.one(".barreldetails div"),s=r.one(".itsa-"+y+"-button");i.setHTML(n),s.toggleClass(b,n==="")},L.prototype._changeShowDetails=function(e){var t=this,n=e.newVal,r=t.get(E),i=r.one(".barreldetails"),s=r.one(".itsa-"+y+"-button");i.toggleClass(b,!n),s.setHTML(n?T:x)},L.prototype._changeLabel=function(e){var t=this,n=e.newVal||"",r=t.get(E),i=r.one(".barrellabel span");i.setHTML(n)},L.prototype._changeClassName=function(e){var t=this,n=e.newVal,r=e.prevVal,i=t.get(w);r&&i.removeClass(r),n&&i.addClass(n)},L.prototype._clearEventhandlers=function(){r.each(this._eventhandlers,function(e){e.detach()})},L.prototype._setColor=function(e){var t=this,n=e.newVal||"",r=t.get(E),i=r.one(".barrelvalue");i.setStyle("color",n)},L.prototype._setLineColor=function(e){var t=this,r=e.newVal,i=t.get(E),s=i.one(".barrelvalue"),o=r&&r!==""?n.sub(N,{color:r}):"";s.setStyle("textShadow",o)},L.prototype._setBackgroundColor=function(e){var t=this,n=e.newVal||"",r=t.get(E),i=r.one("."+S);i.setStyle("backgroundColor",n)}},"@VERSION@",{requires:["widget","node-base","node-style","gallerycss-itsa-base","gallerycss-itsa-dialog"],skinnable:!0});
